# Sunday School App — Детальное описание функционала

**Версия:** 1.0  
**Дата:** 30 октября 2025  
**Язык:** Русский

---

## Содержание

1. [Обзор приложения](#1-обзор-приложения)
2. [Роли пользователей](#2-роли-пользователей)
3. [Публичные страницы](#3-публичные-страницы)
4. [Приватные страницы](#4-приватные-страницы)
5. [Административные страницы](#5-административные-страницы)
6. [Пользовательские сценарии](#6-пользовательские-сценарии)
7. [Предложения по улучшению](#7-предложения-по-улучшению)

---

## 1. Обзор приложения

### 1.1 Назначение
Sunday School App — веб-приложение для автоматизации управления воскресной школой баптистской церкви:
- Учёт посещаемости учеников
- Проверка домашних заданий и запоминания золотых стихов
- Управление преподавателями, учениками и семьями
- Ведение истории успеваемости

### 1.2 Ключевые возможности
- ✅ Управление уроками и академическими годами
- ✅ Проверка домашних заданий (тест, тетрадь, золотые стихи, спевка)
- ✅ **Система мотивации с баллами, достижениями и визуализацией прогресса (домики)**
- ✅ **Рейтинг учеников в группе с игрофикацией**
- ✅ Ведение личных карточек учеников с полной историей
- ✅ Управление группами (grades) с гибкими настройками оценивания
- ✅ CRUD операции для всех сущностей (учителя, ученики, семьи)
- ✅ Ролевой доступ (Teacher, Admin, Superadmin)

---

## 2. Роли пользователей

### 2.1 Teacher (Преподаватель)

**Доступные разделы:**
- Управление уроками своей группы
- Проверка домашних заданий
- Просмотр данных учеников своей группы
- Создание/редактирование уроков

**Ограничения:**
- ❌ Не может видеть данные других групп
- ❌ Не имеет доступа к административным страницам
- ❌ Не может управлять пользователями

**Типичные задачи:**
1. Создать урок с темой и золотыми стихами
2. Проверить домашнее задание всех учеников группы
3. Просмотреть историю конкретного ученика
4. Посмотреть сводную таблицу по уроку

---

### 2.2 Admin (Администратор)

**Доступные разделы:**
- Все возможности Teacher
- Управление преподавателями
- Управление группами (grades)
- Управление учениками
- Управление семьями
- Настройки групп (критерии оценивания)

**Расширенные права:**
- ✅ Доступ ко всем группам и урокам
- ✅ CRUD операции для всех сущностей
- ✅ Конфигурация параметров оценивания

**Типичные задачи:**
1. Добавить нового преподавателя и назначить ему группу
2. Создать новую группу с учениками
3. Добавить семью и её детей
4. Настроить критерии оценивания для группы (показывать/скрывать параметры)
5. Деактивировать неактивных учеников

---

### 2.3 Superadmin (Главный администратор)

**Доступные разделы:**
- Все возможности Admin
- Управление ролями пользователей (Post-MVP)
- Системные настройки (Post-MVP)

**В MVP:** функционал идентичен Admin

---

### 2.4 Parent (Родитель) — Post-MVP

**Планируемые возможности:**
- Просмотр данных своих детей (только чтение)
- Просмотр расписания уроков
- Получение уведомлений

---

### 2.5 Pupil (Ученик) — Post-MVP

**Планируемые возможности:**
- Просмотр собственных данных (только чтение)
- Просмотр своих оценок
- Просмотр предстоящих уроков

---

## 3. Публичные страницы

### 3.1 Страница аутентификации (/auth)

**Назначение:** Вход и регистрация пользователей

**Wireframe:**
```
╔════════════════════════════════════════════════╗
║         🏛️ Sunday School App                   ║
║                                                ║
║     ┌──────────────────────────────────┐      ║
║     │  [ Вход ]    [ Регистрация ]     │      ║
║     └──────────────────────────────────┘      ║
║                                                ║
║     ┌────────────────────────────────┐        ║
║     │ Email:                         │        ║
║     │ [________________________]     │        ║
║     │                                │        ║
║     │ Пароль:                        │        ║
║     │ [________________________]     │        ║
║     │                                │        ║
║     │ [ ] Запомнить меня             │        ║
║     │                                │        ║
║     │ [      ВОЙТИ В СИСТЕМУ      ]  │        ║
║     │                                │        ║
║     │ Забыли пароль?                 │        ║
║     └────────────────────────────────┘        ║
║                                                ║
╚════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Вкладки:**
   - "Вход" (активная по умолчанию)
   - "Регистрация" (отключена в MVP — только по приглашению)

2. **Форма входа:**
   - Поле Email (обязательное, валидация формата email)
   - Поле Пароль (обязательное, скрытый ввод)
   - Чекбокс "Запомнить меня"
   - Кнопка "Войти в систему"
   - Ссылка "Забыли пароль?" (Post-MVP)

3. **Валидация:**
   - Email: проверка формата (example@domain.com)
   - Пароль: минимум 8 символов
   - Показ ошибок под полями красным текстом

4. **Состояния:**
   - Loading: кнопка с спиннером "Вход..."
   - Error: красное сообщение над формой
   - Success: редирект на соответствующую страницу

**Логика редиректа после входа:**
```
Teacher    → /grade-data (выбор своей группы)
Admin      → /grades-list (dashboard)
Superadmin → /grades-list (dashboard)
```

**Сценарий использования (Teacher):**
1. Преподаватель открывает приложение
2. Видит страницу входа
3. Вводит email: teacher@church.com
4. Вводит пароль
5. Нажимает "Войти в систему"
6. Система проверяет credentials
7. Перенаправление на /grade-data
8. Видит список академических годов своей группы

---

### 3.2 Страница 404 (/not-found)

**Назначение:** Информирование о несуществующей странице

**Wireframe:**
```
╔════════════════════════════════════════════════╗
║                                                ║
║              🔍                                 ║
║                                                ║
║              404                               ║
║         Страница не найдена                    ║
║                                                ║
║   Запрашиваемая страница не существует         ║
║        или была перемещена                     ║
║                                                ║
║     [  Вернуться на главную  ]                 ║
║                                                ║
╚════════════════════════════════════════════════╝
```

**Элементы:**
- Крупная надпись "404"
- Понятное объяснение
- Кнопка возврата (редирект на /auth если не авторизован, иначе на главную страницу роли)

---

## 4. Приватные страницы

### 4.1 Страница группы — Список учебных годов (/grade-data)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Показать академические годы для выбранной группы, перейти к урокам

**Wireframe:**
```
╔══════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа (6-8 лет)          ║
╠══════════════════════════════════════════════════════════╣
║                                                          ║
║  📚 Младшая группа (6-8 лет)            [⚙️ Настройки]  ║
║  ════════════════════════════════════════                ║
║                                                          ║
║  Учебные годы:                                           ║
║                                                          ║
║  ┌────────────────────────────────────────────┐         ║
║  │  📅 2024-2025                              │         ║
║  │  1 сентября 2024 — 31 мая 2025            │         ║
║  │  ────────────────────────────────          │         ║
║  │  📖 Уроков: 36                             │         ║
║  │                                            │         ║
║  │              [Открыть уроки →]             │         ║
║  └────────────────────────────────────────────┘         ║
║                                                          ║
║  ┌────────────────────────────────────────────┐         ║
║  │  📅 2023-2024                              │         ║
║  │  1 сентября 2023 — 31 мая 2024            │         ║
║  │  ────────────────────────────────          │         ║
║  │  📖 Уроков: 34 ✅ Завершён                 │         ║
║  │                                            │         ║
║  │              [Открыть уроки →]             │         ║
║  └────────────────────────────────────────────┘         ║
║                                                          ║
║  [➕ Добавить новый учебный год]  (только Admin)        ║
║                                                          ║
╚══════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Хлебные крошки (Breadcrumb):**
   - 🏠 Главная > Группы > [Название группы]

2. **Заголовок страницы:**
   - Название группы и возрастной диапазон
   - Кнопка "⚙️ Настройки" (только Admin) → /grade-data-settings

3. **Карточки учебных годов:**
   - Иконка календаря 📅
   - Название года (например, "2024-2025")
   - Даты начала и окончания
   - Количество уроков
   - Статус (Активный/Завершён)
   - Кнопка "Открыть уроки" → переход на /year-lessons-list

4. **Кнопка добавления:**
   - "➕ Добавить новый учебный год" (только для Admin)
   - Открывает модальное окно создания года

**Модальное окно "Создать учебный год":**
```
┌─────────────────────────────────────────────┐
│ Создать новый учебный год            [✕]   │
├─────────────────────────────────────────────┤
│                                             │
│ Год:                                        │
│ [2025-2026________________]                 │
│                                             │
│ Дата начала:                                │
│ [📅 01.09.2025]                             │
│                                             │
│ Дата окончания:                             │
│ [📅 31.05.2026]                             │
│                                             │
│                                             │
│    [  Отмена  ]      [  Создать  ]          │
│                                             │
└─────────────────────────────────────────────┘
```

**Сценарий (Teacher):**
1. Teacher входит в систему
2. Видит список учебных годов своей группы
3. Выбирает текущий год "2024-2025"
4. Нажимает "Открыть уроки"
5. Переходит на страницу списка уроков

**Сценарий (Admin):**
1. Admin выбирает группу из /grades-list
2. Переходит на /grade-data
3. Видит все учебные годы группы
4. Нажимает "Настройки" → переходит в /grade-data-settings
5. Настраивает параметры оценивания
6. Возвращается назад
7. Нажимает "Добавить новый учебный год"
8. Заполняет форму
9. Создаёт новый год

---

### 4.2 Список уроков за учебный год (/year-lessons-list)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Просмотр, создание, редактирование и удаление уроков

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа > 2024-2025                         ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  📖 Уроки: 2024-2025 учебный год                 [➕ Создать урок]       ║
║  ═════════════════════════════════════════════════════════════            ║
║                                                                           ║
║  [🔍 Поиск по теме...]                   [Фильтр: Все ▼] [Сортировка ▼]  ║
║                                                                           ║
║  ┌───────────────────────────────────────────────────────────────────┐   ║
║  │ № │  Дата      │ Тема урока           │ Преподаватель │ Действия │   ║
║  ├───┼────────────┼──────────────────────┼───────────────┼──────────┤   ║
║  │ 1 │ 01.09.2024 │ Сотворение мира      │ Иванова М.В.  │ ✏️  📦   │   ║
║  ├───┼────────────┼──────────────────────┼───────────────┼──────────┤   ║
║  │ 2 │ 08.09.2024 │ Адам и Ева           │ Иванова М.В.  │ ✏️  📦   │   ║
║  ├───┼────────────┼──────────────────────┼───────────────┼──────────┤   ║
║  │ 3 │ 15.09.2024 │ Каин и Авель         │ Иванова М.В.  │ ✏️  📦   │   ║
║  ├───┼────────────┼──────────────────────┼───────────────┼──────────┤   ║
║  │ 4 │ 22.09.2024 │ Ной и потоп          │ Петров И.С.   │ ✏️  📦   │   ║
║  ├───┼────────────┼──────────────────────┼───────────────┼──────────┤   ║
║  │ 5 │ 29.09.2024 │ Вавилонская башня    │ Иванова М.В.  │ ✏️  📦   │   ║
║  └───┴────────────┴──────────────────────┴───────────────┴──────────┘   ║
║                                                                           ║
║  [📦 Архив (5)]                                                           ║
║  ◄ Назад    Страница 1 из 8    Далее ►                                   ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Шапка:**
   - Breadcrumb навигация
   - Заголовок с названием года
   - Кнопка "➕ Создать урок" (крупная, акцентная)

2. **Панель фильтров:**
   - Поиск по теме (live search)
   - Фильтр по преподавателю
   - Сортировка (по дате, по номеру)

3. **Таблица уроков:**
   - Столбец №: порядковый номер урока
   - Столбец Дата: дата проведения урока
   - Столбец Тема: название/тема урока (кликабельна → /lesson-data)
   - Столбец Преподаватель: ФИО ответственного учителя
   - Столбец Действия:
     - ✏️ Редактировать → /edit-lesson/:id
     - 📦 Архивировать → модальное окно подтверждения

4. **Кнопка архива:**
   - "📦 Архив (5)" — показывает количество архивных уроков
   - Переход на страницу архивных уроков

5. **Пагинация:**
   - Навигация по страницам (если уроков > 10)

**Модальное окно подтверждения архивирования:**
```
┌──────────────────────────────────────────┐
│ Архивировать урок                 [✕]   │
├──────────────────────────────────────────┤
│                                          │
│  📦 Вы уверены, что хотите архивировать  │
│     урок №5 "Вавилонская башня"?        │
│                                          │
│  Урок будет скрыт из основного списка,  │
│  но все данные сохранятся.               │
│                                          │
│  Вы сможете восстановить урок из архива  │
│  в любое время.                          │
│                                          │
│                                          │
│  [  Отмена  ]    [  В архив  ]           │
│                                          │
└──────────────────────────────────────────┘
```

**Сценарий 1 (Teacher создаёт урок):**
1. Teacher на странице списка уроков
2. Нажимает "➕ Создать урок"
3. Переходит на /new-lesson
4. Заполняет форму урока
5. Сохраняет
6. Возвращается на список уроков
7. Видит новый урок в конце списка

**Сценарий 2 (Teacher редактирует урок):**
1. Teacher находит нужный урок в списке
2. Нажимает ✏️ (Редактировать)
3. Переходит на /edit-lesson/:id
4. Изменяет тему или золотые стихи
5. Сохраняет изменения
6. Возвращается на список
7. Видит обновлённую информацию

**Сценарий 3 (Teacher архивирует урок):**
1. Teacher находит урок, который был проведён ошибочно
2. Нажимает 📦 (Архивировать)
3. Видит модальное окно подтверждения
4. Читает информацию о сохранении данных
5. Нажимает "В архив"
6. Урок исчезает из основного списка
7. Видит уведомление "Урок перемещён в архив"
8. Счётчик архива увеличивается: "📦 Архив (6)"

**Сценарий 4 (Admin просматривает и восстанавливает из архива):**
1. Admin на странице списка уроков
2. Видит кнопку "📦 Архив (6)"
3. Нажимает на неё
4. Открывается страница архивных уроков
5. Видит список всех архивированных уроков
6. Находит нужный урок
7. Нажимает "↩️ Восстановить"
8. Урок возвращается в основной список
9. Видит уведомление "Урок восстановлён"

---

### 4.2.1 Архив уроков (/year-lessons-list/archive)

**Доступ:** Teacher (для своих групп), Admin (для всех групп)

**Назначение:** Просмотр и восстановление архивированных уроков

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа > Архив уроков                      ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  📦 Архивные уроки: 2024-2025 учебный год          [← Вернуться к урокам]║
║  ═════════════════════════════════════════════════════════════            ║
║                                                                           ║
║  [🔍 Поиск по теме...]                   [Фильтр: Все ▼] [Сортировка ▼]  ║
║                                                                           ║
║  ┌───────────────────────────────────────────────────────────────────────┐║
║  │ № │  Дата      │ Тема урока           │ Архивирован   │ Действия    │║
║  ├───┼────────────┼──────────────────────┼───────────────┼─────────────┤║
║  │ 3 │ 15.09.2024 │ Каин и Авель         │ 20.10.2024    │ 👁️  ↩️      │║
║  ├───┼────────────┼──────────────────────┼───────────────┼─────────────┤║
║  │ 7 │ 13.10.2024 │ Вавилонская башня    │ 15.10.2024    │ 👁️  ↩️      │║
║  ├───┼────────────┼──────────────────────┼───────────────┼─────────────┤║
║  │12 │ 17.11.2024 │ Иосиф в Египте       │ 25.11.2024    │ 👁️  ↩️      │║
║  └───┴────────────┴──────────────────────┴───────────────┴─────────────┘║
║                                                                           ║
║  ℹ️ Всего архивных уроков: 3                                             ║
║                                                                           ║
║  ◄ Назад    Страница 1 из 1                                              ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Хлебные крошки:**
   - Навигация: Главная > Группы > [Название группы] > Архив уроков

2. **Панель фильтров:**
   - Поиск по теме (live search)
   - Фильтр по преподавателю
   - Сортировка (по дате архивирования, по дате урока, по номеру)

3. **Таблица архивных уроков:**
   - Столбец №: порядковый номер урока
   - Столбец Дата: дата проведения урока
   - Столбец Тема: название/тема урока (кликабельна → /lesson-data в режиме просмотра)
   - Столбец Архивирован: дата архивирования
   - Столбец Действия:
     - 👁️ Просмотреть → /lesson-data/:id (только чтение)
     - ↩️ Восстановить → модальное окно подтверждения

4. **Информационная панель:**
   - Общее количество архивных уроков

**Модальное окно восстановления:**
```
┌──────────────────────────────────────────┐
│ Восстановить урок                 [✕]   │
├──────────────────────────────────────────┤
│                                          │
│  ↩️ Восстановить урок №7                 │
│     "Вавилонская башня"?                 │
│                                          │
│  Урок вернётся в основной список уроков. │
│  Все данные и записи об оценках будут    │
│  доступны для редактирования.            │
│                                          │
│                                          │
│  [  Отмена  ]    [  Восстановить  ]      │
│                                          │
└──────────────────────────────────────────┘
```

**Особенности:**
- Архивные уроки нельзя редактировать напрямую из архива
- Можно только просматривать данные урока и записи
- Для редактирования нужно сначала восстановить урок
- Admin может восстановить любой урок независимо от срока архивирования
- Teacher может восстановить свои уроки в течение 30 дней (после требуется одобрение Admin)

**Сценарий 1 (Teacher восстанавливает недавно архивированный урок):**
1. Teacher нажимает "📦 Архив (3)" на странице списка уроков
2. Открывается страница архивных уроков
3. Видит урок "Вавилонская башня", архивированный 3 дня назад
4. Нажимает ↩️ (Восстановить)
5. Видит модальное окно подтверждения
6. Нажимает "Восстановить"
7. Урок исчезает из архива
8. Видит уведомление "Урок успешно восстановлён"
9. Возвращается на страницу списка уроков
10. Видит восстановленный урок в основном списке

**Сценарий 2 (Teacher пытается восстановить старый урок):**
1. Teacher на странице архивных уроков
2. Видит урок "Каин и Авель", архивированный 45 дней назад
3. Нажимает ↩️ (Восстановить)
4. Видит модальное окно с уведомлением:
   "Прошло более 30 дней с момента архивирования. 
    Для восстановления требуется одобрение администратора.
    Отправить запрос?"
5. Нажимает "Отправить запрос"
6. Видит уведомление "Запрос отправлен администратору"
7. Admin получает уведомление и может одобрить/отклонить запрос

**Сценарий 3 (Teacher просматривает архивный урок):**
1. Teacher на странице архивных уроков
2. Нажимает 👁️ (Просмотреть) для урока "Иосиф в Египте"
3. Открывается страница /lesson-data/:id в режиме "только чтение"
4. Видит всю информацию: тему, золотые стихи, список учеников с оценками
5. Все элементы интерфейса неактивны (нельзя редактировать)
6. Видит баннер: "⚠️ Это архивный урок. Для редактирования восстановите его."
7. Может нажать кнопку "↩️ Восстановить урок" прямо со страницы просмотра

---

### 4.3 Настройки группы (/grade-data-settings)

**Доступ:** Admin только

**Назначение:** Настройка видимости параметров оценивания для конкретной группы

**Wireframe:**
```
╔══════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа > Настройки         ║
╠══════════════════════════════════════════════════════════╣
║                                                          ║
║  ⚙️ Настройки оценивания: Младшая группа (6-8 лет)      ║
║  ════════════════════════════════════════════            ║
║                                                          ║
║  Выберите, какие параметры будут использоваться          ║
║  при проверке домашнего задания для этой группы:         ║
║                                                          ║
║  ┌────────────────────────────────────────────────┐     ║
║  │                                                │     ║
║  │  Золотые стихи                     [🔘 ВКЛ]   │     ║
║  │  Запоминание библейских стихов                │     ║
║  │  Метка: [Золотые стихи_____________]          │     ║
║  │                                                │     ║
║  │  ───────────────────────────────────           │     ║
║  │                                                │     ║
║  │  Оценка за тест                    [🔘 ВКЛ]   │     ║
║  │  Письменный тест по пройденному уроку         │     ║
║  │  Метка: [Тест_______________________]         │     ║
║  │                                                │     ║
║  │  ───────────────────────────────────           │     ║
║  │                                                │     ║
║  │  Оценка за тетрадь                 [🔘 ВКЛ]   │     ║
║  │  Работа в рабочей тетради                     │     ║
║  │  Метка: [Тетрадь____________________]         │     ║
║  │                                                │     ║
║  │  ───────────────────────────────────           │     ║
║  │                                                │     ║
║  │  Посещение спевки                  [⚪ ВЫКЛ]  │     ║
║  │  Участие в репетиции хора                     │     ║
║  │  Метка: [Спевка_____________________]         │     ║
║  │                                                │     ║
║  └────────────────────────────────────────────────┘     ║
║                                                          ║
║  💡 Отключённые параметры не будут отображаться          ║
║     при проверке домашних заданий                        ║
║                                                          ║
║                                                          ║
║  [  ← Назад  ] [Сбросить настройки] [Сохранить изменения]║
║                                                          ║
╚══════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Заголовок:**
   - Название страницы с указанием группы
   - Пояснительный текст

2. **Блоки настроек (для каждого параметра):**
   - Название параметра (жирным шрифтом)
   - Описание параметра (мелким шрифтом)
   - Переключатель ВКЛ/ВЫКЛ (toggle switch)
   - Поле для кастомной метки (опционально)

3. **Параметры:**
   - **Золотые стихи** (включено по умолчанию)
   - **Оценка за тест** (включено по умолчанию)
   - **Оценка за тетрадь** (включено по умолчанию)
   - **Посещение спевки** (включено по умолчанию)

4. **Кнопки действий:**
   - "← Назад" — вернуться на /grade-data
   - "Сбросить настройки" — вернуть всё к дефолтным значениям
   - "Сохранить изменения" — сохранить текущие настройки

**Информационное сообщение:**
- 💡 Подсказка о том, что отключённые параметры скрыты при проверке ДЗ

**Сценарий (Admin настраивает группу):**
1. Admin на странице /grade-data
2. Нажимает "⚙️ Настройки"
3. Переходит на /grade-data-settings
4. Видит текущие настройки (все включены)
5. Решает отключить "Посещение спевки" для младшей группы
6. Переключает toggle в положение ВЫКЛ
7. Изменяет метку "Тест" на "Письменная работа"
8. Нажимает "Сохранить изменения"
9. Видит уведомление "Настройки сохранены"
10. Возвращается на /grade-data
11. Теперь при проверке ДЗ для этой группы не будет поля "Спевка"

---

### 4.4 Создание урока (/new-lesson)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Создание нового урока с золотыми стихами

**Wireframe:**
```
╔════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа > 2024-2025 > Новый урок ║
╠════════════════════════════════════════════════════════════════╣
║                                                                ║
║  ➕ Создать новый урок                                         ║
║  ══════════════════════════════════════════                    ║
║                                                                ║
║  Номер урока:                                                  ║
║  [6___] (автоматически)                                        ║
║                                                                ║
║  Дата урока: *                                                 ║
║  [📅 06.10.2024_____________]                                  ║
║                                                                ║
║  Тема урока: *                                                 ║
║  [Авраам и Исаак_____________________________________]         ║
║                                                                ║
║  Ответственный преподаватель: *                                ║
║  [Иванова Мария Васильевна ▼]                                  ║
║                                                                ║
║  ─────────────────────────────────────────────────             ║
║                                                                ║
║  📖 Золотые стихи (требуется 3):                               ║
║                                                                ║
║  ┌──────────────────────────────────────────────────────┐     ║
║  │ Стих 1:                                              │     ║
║  │ [Начните вводить ссылку (напр., Быт. 22:14)... 🔍]  │     ║
║  │                                                      │     ║
║  │ ✅ Быт. 22:14                                         │     ║
║  │ "И нарек Авраам имя месту тому: Иегова-ире..."   [✕]│     ║
║  └──────────────────────────────────────────────────────┘     ║
║                                                                ║
║  ┌──────────────────────────────────────────────────────┐     ║
║  │ Стих 2:                                              │     ║
║  │ [Начните вводить ссылку... 🔍]                       │     ║
║  │                                                      │     ║
║  │ ⚪ Не выбран                                          │     ║
║  └──────────────────────────────────────────────────────┘     ║
║                                                                ║
║  ┌──────────────────────────────────────────────────────┐     ║
║  │ Стих 3:                                              │     ║
║  │ [Начните вводить ссылку... 🔍]                       │     ║
║  │                                                      │     ║
║  │ ⚪ Не выбран                                          │     ║
║  └──────────────────────────────────────────────────────┘     ║
║                                                                ║
║  [➕ Создать новый золотой стих]                               ║
║                                                                ║
║  ─────────────────────────────────────────────────             ║
║                                                                ║
║  Заметки (опционально):                                        ║
║  [_______________________________________________________]     ║
║  [_______________________________________________________]     ║
║  [_______________________________________________________]     ║
║                                                                ║
║                                                                ║
║  [  ← Отмена  ]                     [  Создать урок  ]         ║
║                                                                ║
╚════════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Основные поля:**
   - **Номер урока** — автозаполнение (следующий по порядку)
   - **Дата урока** — date picker, обязательное
   - **Тема урока** — текстовое поле, обязательное
   - **Преподаватель** — выпадающий список преподавателей группы, обязательное

2. **Секция золотых стихов:**
   - 3 блока для выбора стихов (обязательно все 3)
   - Каждый блок содержит:
     - Autocomplete поле с поиском по ссылке
     - Отображение выбранного стиха (ссылка + текст)
     - Кнопка удаления [✕]
   
3. **Autocomplete золотых стихов:**
   - Начало ввода "Быт." → показывает варианты из базы
   - Выбор из списка или создание нового
   - Кнопка "➕ Создать новый золотой стих" → модальное окно

4. **Кнопки:**
   - "← Отмена" — вернуться без сохранения
   - "Создать урок" — валидация и сохранение

**Модальное окно "Создать новый золотой стих":**
```
┌───────────────────────────────────────────────────┐
│ Добавить новый золотой стих               [✕]    │
├───────────────────────────────────────────────────┤
│                                                   │
│ Ссылка на стих: *                                 │
│ [Быт. 22:14_____________________]                 │
│                                                   │
│ Текст стиха: *                                    │
│ [_____________________________________________]   │
│ [_____________________________________________]   │
│ [_____________________________________________]   │
│ [_____________________________________________]   │
│                                                   │
│ 💡 Введите полный текст библейского стиха         │
│                                                   │
│                                                   │
│    [  Отмена  ]         [  Добавить стих  ]       │
│                                                   │
└───────────────────────────────────────────────────┘
```

**Валидация формы:**
- ❌ Дата урока не может быть более чем на 2 года в будущем
- ❌ Тема урока: минимум 3 символа, максимум 200
- ❌ Должны быть выбраны ровно 3 золотых стиха
- ❌ Преподаватель обязателен

**Сценарий (Teacher создаёт урок):**
1. Teacher на /year-lessons-list
2. Нажимает "➕ Создать урок"
3. Переходит на /new-lesson
4. Видит автоматически проставленный номер "6"
5. Выбирает дату 06.10.2024
6. Вводит тему "Авраам и Исаак"
7. Выбирает себя как преподавателя
8. Начинает вводить в Стих 1: "Быт. 22"
9. Видит выпадающий список подходящих стихов
10. Выбирает "Быт. 22:14"
11. Стих отображается с полным текстом
12. Повторяет для Стих 2 и Стих 3
13. Не может найти нужный стих в базе
14. Нажимает "➕ Создать новый золотой стих"
15. Заполняет модальное окно
16. Добавляет новый стих
17. Выбирает его для Стих 3
18. Нажимает "Создать урок"
19. Видит уведомление "Урок успешно создан"
20. Перенаправляется на /year-lessons-list
21. Видит новый урок в списке

---

### 4.5 Редактирование урока (/edit-lesson/:id)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Изменение данных существующего урока

**Wireframe:** Аналогичен /new-lesson, но:
- Все поля предзаполнены
- Заголовок "✏️ Редактировать урок #6"
- Дополнительная кнопка "📦 Архивировать урок"
- Кнопка "Создать урок" заменена на "Сохранить изменения"

**Особенности:**
- Можно изменить любые поля
- Можно удалить/заменить золотые стихи
- При архивировании урока — модальное окно подтверждения
- Архивированный урок можно восстановить из архива

**Сценарий (Teacher редактирует тему):**
1. Teacher на /edit-lesson/6
2. Видит заполненную форму урока #6
3. Изменяет тему с "Авраам и Исаак" на "Жертвоприношение Авраама"
4. Нажимает "Сохранить изменения"
5. Видит уведомление "Урок обновлён"
6. Возвращается на /year-lessons-list

---

### 4.6 Обзор урока (/lesson-data/:id)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Центральная точка навигации для работы с уроком

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая > 2024-2025 > Урок #6      ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  📖 Урок #6 — Жертвоприношение Авраама      [✏️ Редактировать]║
║  Дата: 6 октября 2024 (воскресенье)                      ║
║  Преподаватель: Иванова Мария Васильевна                 ║
║  ══════════════════════════════════════════               ║
║                                                           ║
║  📚 Золотые стихи:                                        ║
║  ┌─────────────────────────────────────────────────┐     ║
║  │ 1. Быт. 22:14                                   │     ║
║  │    "И нарек Авраам имя месту тому: Иегова-ире  │     ║
║  │     как говорится ныне: на горе Иеговы усмотрится"│  ║
║  │                                                 │     ║
║  │ 2. Евр. 11:17                                   │     ║
║  │    "Верою Авраам, будучи искушаем, принес      │     ║
║  │     в жертву Исаака..."                         │     ║
║  │                                                 │     ║
║  │ 3. Иак. 2:21                                    │     ║
║  │    "Не делами ли оправдался Авраам, отец наш..."│     ║
║  └─────────────────────────────────────────────────┘     ║
║                                                           ║
║  ─────────────────────────────────────────────            ║
║                                                           ║
║  📊 Прогресс проверки:                                    ║
║  ████████████░░░░░░░░  12 из 15 учеников (80%)           ║
║                                                           ║
║  ─────────────────────────────────────────────            ║
║                                                           ║
║  Действия с уроком:                                       ║
║                                                           ║
║  ┌────────────────────────────────────────────────┐      ║
║  │                                                │      ║
║  │  📋 Открыть полную сводную таблицу             │      ║
║  │  Посмотреть все оценки учеников в одной таблице│      ║
║  │                                                │      ║
║  │          [  Открыть таблицу  ]                 │      ║
║  │                                                │      ║
║  └────────────────────────────────────────────────┘      ║
║                                                           ║
║  ┌────────────────────────────────────────────────┐      ║
║  │                                                │      ║
║  │  ✅ Проверить домашние задания                  │      ║
║  │  Последовательная проверка ДЗ для каждого ученика│    ║
║  │                                                │      ║
║  │          [  Начать проверку  ]                 │      ║
║  │                                                │      ║
║  └────────────────────────────────────────────────┘      ║
║                                                           ║
║  [  ← Назад к списку уроков  ]                           ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Шапка урока:**
   - Номер и тема урока
   - Дата проведения
   - Ответственный преподаватель
   - Кнопка "✏️ Редактировать" → /edit-lesson/:id

2. **Блок золотых стихов:**
   - Список всех 3 золотых стихов
   - Ссылка и полный текст каждого

3. **Прогресс-бар:**
   - Показывает, сколько учеников уже проверено
   - Процент заполненности
   - Визуальный индикатор

4. **Карточки действий (2 основных):**
   
   **Карточка 1: Полная сводная таблица**
   - Иконка 📋
   - Описание: просмотр всех оценок в табличном виде
   - Кнопка "Открыть таблицу" → /lesson-data-all/:id
   
   **Карточка 2: Проверка домашних заданий**
   - Иконка ✅
   - Описание: пошаговая проверка каждого ученика
   - Кнопка "Начать проверку" → /checking-homework-all/:id

5. **Кнопка возврата:**
   - "← Назад к списку уроков"

**Сценарий (Teacher переходит к проверке):**
1. Teacher на /year-lessons-list
2. Кликает на тему урока "Жертвоприношение Авраама"
3. Переходит на /lesson-data/6
4. Видит информацию об уроке
5. Видит прогресс 12/15 (80%)
6. Решает проверить оставшихся учеников
7. Нажимает "Начать проверку"
8. Переходит на /checking-homework-all/6
9. Видит список учеников с индикацией кто проверен

---

### 4.7 Полная сводная таблица урока (/lesson-data-all/:id)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Просмотр всех оценок учеников по уроку в табличном формате

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая > 2024-2025 > Урок #6 > Сводная таблица          ║
╠═══════════════════════════════════════════════════════════════════════════════════╣
║                                                                                   ║
║  📋 Сводная таблица: Урок #6 (6 октября 2024)               [📥 Экспорт CSV]    ║
║  Тема: Жертвоприношение Авраама                                                  ║
║  ════════════════════════════════════════════════════════════════                 ║
║                                                                                   ║
║  [☑ Показать только присутствовавших]  [☐ Показать только непроверенных]        ║
║                                                                                   ║
║  ┌────┬──────────────┬────┬────┬────┬────┬──────┬────────┬──────┬────────┐      ║
║  │ № │   Ученик     │При.│ЗС1 │ЗС2 │ЗС3 │ Тест │Тетрадь │Спевка│Действия│      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 1  │ 👤 Иванов П. │ ✅ │ 2  │ 2  │ 2  │  9   │   8    │  ✅  │   ✏️   │      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 2  │ 👤 Петрова А.│ ✅ │ 1  │ 2  │ 2  │  8   │   7    │  ✅  │   ✏️   │      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 3  │ 👤 Сидоров М.│ ❌ │ -  │ -  │ -  │  -   │   -    │  ❌  │   ✏️   │      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 4  │ 👤 Смирнова Е│ ✅ │ 2  │ 1  │ 2  │  10  │   9    │  ✅  │   ✏️   │      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 5  │ 👤 Кузнецов Д│ ✅ │ 0  │ 1  │ 1  │  6   │   5    │  ❌  │   ✏️   │      ║
║  ├────┼──────────────┼────┼────┼────┼────┼──────┼────────┼──────┼────────┤      ║
║  │ 6  │ 👤 Попова В. │ ⚠️ │ -  │ -  │ -  │  -   │   -    │  -   │   ✏️   │      ║
║  └────┴──────────────┴────┴────┴────┴────┴──────┴────────┴──────┴────────┘      ║
║                                                                                   ║
║  Легенда:                                                                        ║
║  При. = Присутствие | ЗС = Золотой стих (0-2 балла)                             ║
║  Тест = Оценка за тест (0-10) | Тетрадь = Оценка за тетрадь (0-10)              ║
║  ✅ = Да | ❌ = Нет | ⚠️ = Не проверено | - = Нет данных                         ║
║                                                                                   ║
║  [  ← Назад к обзору урока  ]                                                    ║
║                                                                                   ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Шапка:**
   - Название урока и дата
   - Кнопка "📥 Экспорт CSV" (экспорт таблицы)

2. **Фильтры:**
   - Чекбокс "Показать только присутствовавших"
   - Чекбокс "Показать только непроверенных"

3. **Таблица с колонками:**
   - **№** — порядковый номер
   - **Ученик** — аватар + ФИО (кликабельно → /pupil-personal-data/:id)
   - **При.** — присутствие (✅/❌/⚠️)
   - **ЗС1, ЗС2, ЗС3** — оценки за золотые стихи (0/1/2 или "-")
   - **Тест** — оценка за тест (0-10 или "-")
   - **Тетрадь** — оценка за тетрадь (0-10 или "-")
   - **Спевка** — посещение спевки (✅/❌ или "-")
   - **Действия** — иконка редактирования ✏️

4. **Индикаторы:**
   - ✅ Зелёная галочка — Да/Присутствовал
   - ❌ Красный крестик — Нет/Отсутствовал
   - ⚠️ Жёлтый треугольник — Не проверено
   - "-" — Нет данных (если отсутствовал)

5. **Легенда:**
   - Расшифровка сокращений и символов

6. **Кнопка возврата:**
   - "← Назад к обзору урока"

**Цветовое кодирование:**
- Строка с отсутствующим учеником — серый фон
- Строка с непроверенным учеником — жёлтый фон
- Ячейка с низкой оценкой (0-4) — красный оттенок
- Ячейка с хорошей оценкой (8-10) — зелёный оттенок

**При клике на ✏️ (Редактировать):**
Открывается модальное окно, аналогичное окну проверки ДЗ (см. следующий раздел)

**Сценарий (Teacher просматривает результаты):**
1. Teacher на /lesson-data/6
2. Нажимает "Открыть таблицу"
3. Переходит на /lesson-data-all/6
4. Видит полную таблицу со всеми учениками
5. Замечает, что Попова В. (⚠️) не проверена
6. Нажимает ✏️ рядом с её именем
7. Открывается модальное окно проверки
8. Заполняет данные
9. Сохраняет
10. Видит обновлённую таблицу (⚠️ пропал, появились оценки)
11. Нажимает "Экспорт CSV" для сохранения отчёта
12. Скачивает файл "Урок_6_Жертвоприношение_Авраама_2024-10-06.csv"

---

### 4.8 Проверка домашних заданий (/checking-homework-all/:id)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Пошаговая проверка домашних заданий для всех учеников

**Wireframe (главный экран):**
```
╔═══════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая > 2024-2025 > Урок #6 > Проверка║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  ✅ Проверка домашних заданий — Урок #6                       ║
║  Жертвоприношение Авраама (6 октября 2024)                   ║
║  ══════════════════════════════════════════                   ║
║                                                               ║
║  📊 Прогресс: 12 из 15 проверено (80%)                        ║
║  ████████████░░░░░░░░                                         ║
║                                                               ║
║  ─────────────────────────────────────────────                ║
║                                                               ║
║  Список учеников:                                             ║
║                                                               ║
║  ┌────────────────────────────────────────────────────┐      ║
║  │ 👤 Иванов Пётр                     ✅ Проверен │🔍│      ║
║  │    ЗС: 2/2/2 | Тест: 9 | Тетрадь: 8 | Спевка: Да │      ║
║  └────────────────────────────────────────────────────┘      ║
║                                                               ║
║  ┌────────────────────────────────────────────────────┐      ║
║  │ 👤 Петрова Анна                    ✅ Проверен │🔍│      ║
║  │    ЗС: 1/2/2 | Тест: 8 | Тетрадь: 7 | Спевка: Да │      ║
║  └────────────────────────────────────────────────────┘      ║
║                                                               ║
║  ┌────────────────────────────────────────────────────┐      ║
║  │ 👤 Сидоров Михаил                  ❌ Отсутствовал│🔍│    ║
║  │    Не присутствовал на уроке                      │      ║
║  └────────────────────────────────────────────────────┘      ║
║                                                               ║
║  ┌────────────────────────────────────────────────────┐      ║
║  │ 👤 Попова Виктория                 ⚠️ Не проверен│🔍│     ║
║  │    Требуется проверка                             │      ║
║  └────────────────────────────────────────────────────┘      ║
║                                                               ║
║  [  ← Назад к обзору урока  ]                                ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**Модальное окно проверки ученика:**
```
┌──────────────────────────────────────────────────────────────┐
│ Проверка ДЗ — Попова Виктория                        [✕]     │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  👤 Попова Виктория (10 лет)                                 │
│  Урок #6: Жертвоприношение Авраама                          │
│                                                              │
│  ══════════════════════════════════════════                  │
│                                                              │
│  ПРИСУТСТВИЕ:                                                │
│  ┌──────────────────────────────────────┐                   │
│  │   [✓ Присутствовал]   [ Отсутствовал]│                   │
│  └──────────────────────────────────────┘                   │
│                                                              │
│  ──────────────────────────────────────────                  │
│                                                              │
│  📖 ЗОЛОТЫЕ СТИХИ:                                           │
│                                                              │
│  Стих 1: Быт. 22:14                                          │
│  "И нарек Авраам имя месту тому: Иегова-ире..."             │
│  ┌──────────────────────────────────────────────┐           │
│  │  Оценка: [ 0 ]  [ 1 ]  [✓2 ]                │           │
│  │  0 - не знает | 1 - с подсказкой | 2 - назубок│         │
│  └──────────────────────────────────────────────┘           │
│                                                              │
│  Стих 2: Евр. 11:17                                          │
│  "Верою Авраам, будучи искушаем..."                         │
│  ┌──────────────────────────────────────────────┐           │
│  │  Оценка: [ 0 ]  [✓1 ]  [ 2 ]                │           │
│  └──────────────────────────────────────────────┘           │
│                                                              │
│  Стих 3: Иак. 2:21                                           │
│  "Не делами ли оправдался Авраам..."                        │
│  ┌──────────────────────────────────────────────┐           │
│  │  Оценка: [ 0 ]  [✓1 ]  [ 2 ]                │           │
│  └──────────────────────────────────────────────┘           │
│                                                              │
│  ──────────────────────────────────────────                  │
│                                                              │
│  📝 ДОМАШНЕЕ ЗАДАНИЕ:                                         │
│                                                              │
│  Оценка за тест (0-10):                                      │
│  [███████████8████████] 8                                    │
│                                                              │
│  Оценка за тетрадь (0-10):                                   │
│  [█████████7█████████] 7                                     │
│                                                              │
│  ──────────────────────────────────────────                  │
│                                                              │
│  🎵 ПОСЕЩЕНИЕ СПЕВКИ:                                         │
│  ┌──────────────────────────────────────┐                   │
│  │   [✓ Был(а)]   [ Не был(а)]          │                   │
│  └──────────────────────────────────────┘                   │
│                                                              │
│  ══════════════════════════════════════════                  │
│                                                              │
│  [← Предыдущий]  [Отмена]  [Сохранить]  [Следующий →]       │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**Элементы модального окна:**

1. **Шапка:**
   - ФИО ученика + возраст
   - Номер и тема урока
   - Кнопка закрытия [✕]

2. **Секция "Присутствие":**
   - Переключатель Присутствовал/Отсутствовал
   - Если выбрано "Отсутствовал" → все остальные поля автоматически обнуляются

3. **Секция "Золотые стихи":**
   - Для каждого из 3 стихов:
     - Ссылка на стих
     - Полный текст стиха (для справки учителя)
     - Три кнопки выбора оценки: 0 / 1 / 2
     - Подсказка что означает каждая оценка

4. **Секция "Домашнее задание":**
   - **Оценка за тест**: слайдер 0-10 с числовым отображением
   - **Оценка за тетрадь**: слайдер 0-10 с числовым отображением

5. **Секция "Посещение спевки":**
   - Переключатель Был(а)/Не был(а)

6. **Кнопки навигации:**
   - **← Предыдущий** — переход к предыдущему ученику (с сохранением)
   - **Отмена** — закрыть без сохранения
   - **Сохранить** — сохранить и закрыть
   - **Следующий →** — сохранить и перейти к следующему ученику

**Особенности интерфейса:**

1. **Автосохранение:**
   - При нажатии "Следующий" или "Предыдущий" данные автоматически сохраняются

2. **Валидация:**
   - Если ученик присутствовал, все поля обязательны
   - Если отсутствовал, все оценки = 0 (автоматически)

3. **Keyboard shortcuts:**
   - `Enter` — Сохранить и следующий
   - `Esc` — Отмена
   - `→` — Следующий ученик
   - `←` — Предыдущий ученик

4. **Визуальная обратная связь:**
   - При сохранении — короткая анимация "Сохранено ✓"
   - Номер текущего ученика в общем списке (например, "3 из 15")

**Сценарий (Teacher проверяет ДЗ):**
1. Teacher на /lesson-data/6
2. Нажимает "Начать проверку"
3. Переходит на /checking-homework-all/6
4. Видит список всех учеников
5. Замечает, что Попова В. не проверена (⚠️)
6. Кликает на карточку Поповой В. (или на 🔍)
7. Открывается модальное окно проверки
8. Отмечает "Присутствовал"
9. Оценивает золотые стихи: 2/1/1
10. Выставляет оценку за тест: 8 (двигает слайдер)
11. Выставляет оценку за тетрадь: 7
12. Отмечает, что была на спевке
13. Нажимает "Следующий →"
14. Данные сохраняются
15. Открывается окно следующего непроверенного ученика
16. Продолжает проверку всех оставшихся
17. После последнего ученика → автоматическое закрытие модалки
18. Видит обновлённый прогресс 15/15 (100%)

---

### 4.9 Личные данные ученика (/pupil-personal-data/:id)

**Доступ:**
- Teacher (ученики своей группы, read/write)
- Admin (все ученики, read/write)
- Parent (свои дети, read-only, Post-MVP)
- Pupil (собственные данные, read-only, Post-MVP)

**Назначение:** Полная информация об ученике с историей всех уроков

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Ученики > Попова Виктория                        ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  ┌─────────────────────────────────────────────────────────┐ ║
║  │  👤 Попова Виктория Андреевна              [✏️ Редактировать]║
║  │                                                         │ ║
║  │  📅 Дата рождения: 15 января 2014 (10 лет)             │ ║
║  │  📚 Группа: Младшая группа (6-8 лет)                   │ ║
║  │  👨‍👩‍👧 Семья: Поповы (Андрей и Елена)                     │ ║
║  │     📞 Тел. отца: +7 (912) 345-67-89                   │ ║
║  │     📞 Тел. матери: +7 (912) 345-67-90                 │ ║
║  │                                                         │ ║
║  │  [Просмотреть данные семьи →]                          │ ║
║  └─────────────────────────────────────────────────────────┘ ║
║                                                               ║
║  ──────────────────────────────────────────────               ║
║                                                               ║
║  [ Обзор ]  [ История уроков ]  [ Статистика ]               ║
║                                                               ║
║  ══════════════════════════════════════════                   ║
║                                                               ║
║  📊 ОБЗОР (вкладка активна):                                  ║
║                                                               ║
║  Статистика за текущий год (2024-2025):                       ║
║                                                               ║
║  ┌────────────────┬────────────────┬────────────────┐        ║
║  │ Присутствие    │ Золотые стихи  │ Средний балл   │        ║
║  │ 34 из 36       │ Средний: 5.2/6 │ Тест: 8.3      │        ║
║  │ (94%)          │ (87%)          │ Тетрадь: 7.8   │        ║
║  └────────────────┴────────────────┴────────────────┘        ║
║                                                               ║
║  ┌──────────────────────────────────────────────────┐        ║
║  │  📈 График успеваемости (последние 10 уроков):   │        ║
║  │                                                  │        ║
║  │  10│      ●                                      │        ║
║  │   9│  ●     ●   ●       ●                        │        ║
║  │   8│             ●   ●     ●                     │        ║
║  │   7│                          ●                  │        ║
║  │   6│                                            │        ║
║  │    └────────────────────────────────────        │        ║
║  │     #27 #28 #29 #30 #31 #32 #33 #34 #35        │        ║
║  └──────────────────────────────────────────────────┘        ║
║                                                               ║
║  [← Назад к списку учеников]                                 ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**Вкладка "История уроков":**
```
╔═══════════════════════════════════════════════════════════════════════════╗
║  [ Обзор ]  [●История уроков ]  [ Статистика ]                           ║
║                                                                           ║
║  ══════════════════════════════════════════════════                       ║
║                                                                           ║
║  📋 ИСТОРИЯ ВСЕХ УРОКОВ                      [📥 Экспорт в Excel]        ║
║                                                                           ║
║  Фильтры:                                                                ║
║  [Учебный год: 2024-2025 ▼]  [Месяц: Все ▼]  [🔍 Поиск по теме...]      ║
║                                                                           ║
║  ┌───┬───────────┬───────────────────┬────┬─────┬──────┬────────┬──────┐ ║
║  │ № │   Дата    │ Тема урока        │При.│ ЗС  │ Тест │Тетрадь │Спевка│ ║
║  ├───┼───────────┼───────────────────┼────┼─────┼──────┼────────┼──────┤ ║
║  │ 1 │01.09.2024 │ Сотворение мира   │ ✅ │ 6/6 │  9   │   8    │  ✅  │ ║
║  ├───┼───────────┼───────────────────┼────┼─────┼──────┼────────┼──────┤ ║
║  │ 2 │08.09.2024 │ Адам и Ева        │ ✅ │ 5/6 │  8   │   7    │  ✅  │ ║
║  ├───┼───────────┼───────────────────┼────┼─────┼──────┼────────┼──────┤ ║
║  │ 3 │15.09.2024 │ Каин и Авель      │ ❌ │  -  │  -   │   -    │  ❌  │ ║
║  ├───┼───────────┼───────────────────┼────┼─────┼──────┼────────┼──────┤ ║
║  │ 4 │22.09.2024 │ Ной и потоп       │ ✅ │ 6/6 │  10  │   9    │  ✅  │ ║
║  ├───┼───────────┼───────────────────┼────┼─────┼──────┼────────┼──────┤ ║
║  │...│    ...    │        ...        │ ...│ ... │ ...  │  ...   │ ...  │ ║
║  └───┴───────────┴───────────────────┴────┴─────┴──────┴────────┴──────┘ ║
║                                                                           ║
║  ◄ Назад    Страница 1 из 4    Далее ►                                   ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝
```

**Вкладка "Статистика":**
```
╔═══════════════════════════════════════════════════════════════╗
║  [ Обзор ]  [ История уроков ]  [●Статистика ]               ║
║                                                               ║
║  ══════════════════════════════════════════                   ║
║                                                               ║
║  📊 ДЕТАЛЬНАЯ СТАТИСТИКА                                      ║
║                                                               ║
║  ┌───────────────────────────────────────────────────┐       ║
║  │  ПОСЕЩАЕМОСТЬ ПО МЕСЯЦАМ (2024-2025)             │       ║
║  │                                                   │       ║
║  │  Сентябрь: ████████░░  4/5 уроков (80%)          │       ║
║  │  Октябрь:  ██████████  4/4 уроков (100%)         │       ║
║  │  Ноябрь:   ████████░░  4/5 уроков (80%)          │       ║
║  │  Декабрь:  ████████░░  3/4 уроков (75%)          │       ║
║  └───────────────────────────────────────────────────┘       ║
║                                                               ║
║  ┌───────────────────────────────────────────────────┐       ║
║  │  ЗОЛОТЫЕ СТИХИ                                    │       ║
║  │                                                   │       ║
║  │  На "2" (назубок):      75%  [██████████████████] │       ║
║  │  На "1" (с подсказкой): 20%  [████░░░░░░░░░░░░░░] │       ║
║  │  На "0" (не знает):      5%  [█░░░░░░░░░░░░░░░░░] │       ║
║  └───────────────────────────────────────────────────┘       ║
║                                                               ║
║  ┌───────────────────────────────────────────────────┐       ║
║  │  ДОМАШНИЕ ЗАДАНИЯ                                 │       ║
║  │                                                   │       ║
║  │  Тест:     Средний балл: 8.3                     │       ║
║  │            Лучший: 10 | Худший: 6                │       ║
║  │                                                   │       ║
║  │  Тетрадь:  Средний балл: 7.8                     │       ║
║  │            Лучший: 9 | Худший: 5                 │       ║
║  └───────────────────────────────────────────────────┘       ║
║                                                               ║
║  ┌───────────────────────────────────────────────────┐       ║
║  │  ПОСЕЩЕНИЕ СПЕВОК: 30 из 36 (83%)                │       ║
║  └───────────────────────────────────────────────────┘       ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Профильная карточка:**
   - Аватар ученика (если загружен)
   - ФИО полностью
   - Дата рождения и возраст
   - Текущая группа
   - Информация о семье (родители, телефоны)
   - Кнопка "Редактировать" (только для Admin/Teacher)
   - Ссылка на страницу семьи

2. **Вкладки:**
   - **Обзор** — краткая сводка и график
   - **История уроков** — полная таблица всех уроков
   - **Статистика** — детальная статистика по разным параметрам

3. **Функции экспорта:**
   - Excel/CSV экспорт полной истории
   - PDF отчёт (Post-MVP)

**Сценарий (Teacher просматривает ученика):**
1. Teacher на /checking-homework-all/6
2. Кликает на имя ученика "Попова Виктория"
3. Переходит на /pupil-personal-data/15
4. Видит полную информацию о Виктории
5. Переключается на вкладку "История уроков"
6. Просматривает все оценки Виктории за год
7. Замечает, что она пропустила урок #3
8. Переключается на "Статистику"
9. Видит, что посещаемость 94% (очень хорошо)
10. Видит, что золотые стихи знает на 87% (хорошо)
11. Экспортирует историю в Excel для отчёта родителям
12. Возвращается назад к проверке ДЗ

---

### 4.10 Рейтинг группы (/grade-leaderboard/:id)

**Доступ:** Teacher (своя группа), Admin (все группы)

**Назначение:** Отображение рейтинга учеников с визуализацией прогресса и достижениями

**Wireframe:**
```
╔═════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Группы > Младшая группа > Рейтинг                         ║
╠═════════════════════════════════════════════════════════════════════════╣
║                                                                         ║
║  🏆 Рейтинг группы: Младшая группа (6-8 лет)                           ║
║  ═══════════════════════════════════════════════════════════════════    ║
║                                                                         ║
║  [Все ученики] [Этот месяц] [Этот год]         📊 Средний балл: 161   ║
║                                                                         ║
║  ┌────────────────────────────────────────────────────────────────────┐║
║  │ #  │ Ученик          │ Баллы │ Прогресс      │ Достижения         │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 🥇 │ 👧 Попова В.     │  190  │ 🏠▓▓▓▓▓▓▓▓▓░   │ 🏆 📖 💯          │║
║  │    │                 │       │ 1 этаж 9/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 🥈 │ 👦 Иванов П.     │  175  │ 🏠▓▓▓▓▓▓▓▓░░   │ 📖 💯             │║
║  │    │                 │       │ 1 этаж 7/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 🥉 │ 👧 Сидорова М.   │  163  │ 🏠▓▓▓▓▓▓▓░░░   │ 🎓                │║
║  │    │                 │       │ 1 этаж 6/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 4  │ 👦 Петров С.     │  145  │ 🏠▓▓▓▓▓▓░░░░   │ 🎓                │║
║  │    │                 │       │ 1 этаж 4/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 5  │ 👧 Козлова А.    │  132  │ 🏠▓▓▓▓▓░░░░░   │                   │║
║  │    │                 │       │ 1 этаж 3/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 6  │ 👦 Смирнов Д.    │  118  │ 🏠▓▓▓▓░░░░░░   │                   │║
║  │    │                 │       │ 1 этаж 1/10   │                    │║
║  ├────┼─────────────────┼───────┼───────────────┼────────────────────┤║
║  │ 7  │ 👧 Федорова Е.   │   95  │ 🏠▓▓▓░░░░░░░   │ 🎓                │║
║  │    │                 │       │ 0 этажей 9/10 │                    │║
║  └────┴─────────────────┴───────┴───────────────┴────────────────────┘║
║                                                                         ║
║  💡 Баллы автоматически рассчитываются за каждый урок                  ║
║     Макс. 23 балла за урок | 10 баллов = 1 кирпичик | 10 кирпичиков = 1 этаж║
║                                                                         ║
║  🎉 Последние достижения:                                               ║
║  • Попова Виктория получила 🏆 "Отличник" (2 дня назад)                ║
║  • Иванов Пётр получил 💯 "Столетие" (5 дней назад)                    ║
║                                                                         ║
╚═════════════════════════════════════════════════════════════════════════╝
```

**Элементы интерфейса:**

1. **Фильтры периода:**
   - Все ученики (с начала года)
   - Этот месяц
   - Этот год

2. **Таблица рейтинга:**
   - Столбец # (ранг): 🥇🥈🥉 для топ-3, цифры для остальных
   - Столбец Ученик: аватар + имя
   - Столбец Баллы: текущие баллы (цифра)
   - Столбец Прогресс: 
     - Визуализация домика (progress bar из кирпичиков)
     - Текст "X этажей Y/10 кирпичиков"
   - Столбец Достижения: иконки заработанных badges

3. **Статистика:**
   - Средний балл по группе
   - Лучший ученик месяца
   - Лента недавних достижений

4. **Модальное окно деталей домика (клик на прогресс):**
```
┌────────────────────────────────┐
│   🏠 Прогресс: Попова Виктория │
├────────────────────────────────┤
│                                │
│      ╔═══╗                     │
│      ║ ▓ ║  ← Этаж 2 (9/10)    │
│      ║ ▓ ║                     │
│      ╠═══╣                     │
│      ║ ▓ ║  ← Этаж 1 (10/10)   │
│      ║ ▓ ║     ✅ завершён     │
│      ╚═══╝                     │
│                                │
│  📊 Статистика:                │
│  • Всего баллов: 190           │
│  • Кирпичей: 19/100            │
│  • Этажей: 1/10                │
│  • Уроков посещено: 9          │
│  • Идеальных уроков: 2         │
│  • Текущая серия: 3 урока      │
│                                │
│  До след. кирпичика: 2 балла   │
│  До след. этажа: 12 баллов     │
│                                │
│         [   Закрыть   ]        │
│                                │
└────────────────────────────────┘
```

**Формула расчёта баллов:**
- Присутствие: 1 балл
- Золотые стихи: 0/1/2 балла × 3 = 0-6 баллов
- Тест: 0-10 баллов
- Тетрадь: 0-10 × 0.5 = 0-5 баллов
- Спевка: 1 балл
- **ИТОГО: до 23 баллов за урок**

**Сценарий 1 (Teacher просматривает рейтинг):**
1. Teacher заходит на /grade-leaderboard/младшая-группа
2. Видит рейтинг всех учеников
3. Замечает, что Попова Виктория лидирует с 190 баллами
4. Кликает на её прогресс-бар домика
5. Видит детальную визуализацию: 1 этаж построен, строится 2-й
6. Закрывает модалку
7. Переключает фильтр на "Этот месяц"
8. Видит изменение рейтинга: теперь лидирует Иванов Пётр

**Сценарий 2 (Teacher показывает рейтинг ученикам):**
1. Teacher во время урока открывает рейтинг на проекторе
2. Дети видят свои позиции и домики
3. Мотивация: кто ближе к завершению этажа
4. Обсуждают недавние достижения
5. Дети стараются больше готовиться к следующему уроку

---

### 4.11 Достижения ученика (/pupil-achievements/:id)

**Доступ:** 
- Teacher (ученики своей группы)
- Admin (все ученики)

**Назначение:** Просмотр всех достижений (badges) ученика

**Wireframe:**
```
╔═════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Ученики > Попова Виктория > Достижения                    ║
╠═════════════════════════════════════════════════════════════════════════╣
║                                                                         ║
║  🎖️ Достижения: Попова Виктория                                        ║
║  ═══════════════════════════════════════════════════════════════════    ║
║                                                                         ║
║  Заработано: 5 из 8 | Прогресс: 62.5%                                  ║
║                                                                         ║
║  ┌──────────────────────┬──────────────────────┬──────────────────────┐║
║  │                      │                      │                      │║
║  │       🏆             │       📖             │       💯             │║
║  │    Отличник          │   Знаток стихов      │    Столетие          │║
║  │                      │                      │                      │║
║  │ ✅ Получено          │ ✅ Получено          │ ✅ Получено          │║
║  │ 15.10.2024           │ 08.10.2024           │ 01.10.2024           │║
║  │                      │                      │                      │║
║  │ [  Подробнее  ]      │ [  Подробнее  ]      │ [  Подробнее  ]      │║
║  │                      │                      │                      │║
║  ├──────────────────────┼──────────────────────┼──────────────────────┤║
║  │                      │                      │                      │║
║  │       🎓             │       📅             │       ⭐             │║
║  │   Первый урок        │  Без пропусков       │    Прилежный         │║
║  │                      │                      │                      │║
║  │ ✅ Получено          │ 🔒 Заблокировано     │ 🔄 В прогрессе       │║
║  │ 01.09.2024           │ 4/12 уроков          │ Средний балл: 8.5    │║
║  │                      │                      │ Нужно: 9             │║
║  │ [  Подробнее  ]      │                      │                      │║
║  │                      │                      │                      │║
║  ├──────────────────────┼──────────────────────┼──────────────────────┤║
║  │                      │                      │                      │║
║  │       🏠             │       📆             │                      │║
║  │    Строитель         │     Полгода          │                      │║
║  │                      │                      │                      │║
║  │ 🔒 Заблокировано     │ 🔒 Заблокировано     │                      │║
║  │ 190/1000 баллов      │ 9/24 урока           │                      │║
║  │ 81% до цели          │ 62% до цели          │                      │║
║  │                      │                      │                      │║
║  └──────────────────────┴──────────────────────┴──────────────────────┘║
║                                                                         ║
║  📜 История достижений:                                                 ║
║  ┌────────────────────────────────────────────────────────────────┐   ║
║  │ 15.10.2024  🏆 Отличник - 5 уроков подряд с максимальным баллом│   ║
║  ├────────────────────────────────────────────────────────────────┤   ║
║  │ 08.10.2024  📖 Знаток стихов - 10 раз подряд все стихи на "2"  │   ║
║  ├────────────────────────────────────────────────────────────────┤   ║
║  │ 01.10.2024  💯 Столетие - набрал 100 баллов                    │   ║
║  ├────────────────────────────────────────────────────────────────┤   ║
║  │ 01.09.2024  🎓 Первый урок - посетил первый урок               │   ║
║  └────────────────────────────────────────────────────────────────┘   ║
║                                                                         ║
╚═════════════════════════════════════════════════════════════════════════╝
```

**Статусы достижений:**
- ✅ **Получено** — достижение заработано (дата получения)
- 🔄 **В прогрессе** — частично выполнено (прогресс-бар)
- 🔒 **Заблокировано** — не начато (критерий получения)

**Модальное окно - Детали достижения:**
```
┌──────────────────────────────────────────┐
│ 🏆 Отличник                       [✕]   │
├──────────────────────────────────────────┤
│                                          │
│  ✅ Получено: 15 октября 2024            │
│                                          │
│  📋 Описание:                            │
│  5 уроков подряд с максимальным баллом   │
│  (23 балла за урок)                      │
│                                          │
│  🎁 Бонус: +10 баллов                    │
│                                          │
│  📊 История получения:                   │
│  ┌────────────────────────────────────┐  │
│  │ Урок #5: Авраам      23/23 ✅      │  │
│  │ Урок #6: Исаак       23/23 ✅      │  │
│  │ Урок #7: Иаков       23/23 ✅      │  │
│  │ Урок #8: Иосиф       23/23 ✅      │  │
│  │ Урок #9: Моисей      23/23 ✅      │  │
│  └────────────────────────────────────┘  │
│                                          │
│  💡 Можно получить снова!                │
│     Сохраняй серию идеальных уроков.     │
│                                          │
│                [   Закрыть   ]           │
│                                          │
└──────────────────────────────────────────┘
```

**Типы достижений:**

| Иконка | Название | Критерий |
|--------|----------|----------|
| 🏆 | Отличник | 5 уроков подряд с макс. баллом (23) |
| 📅 | Без пропусков | Посетил все уроки месяца |
| 📖 | Знаток стихов | 10 раз подряд все стихи на "2" |
| ⭐ | Прилежный | Средний балл за ДЗ > 9 |
| 🎓 | Первый урок | Посетил первый урок |
| 💯 | Столетие | Набрал 100 баллов |
| 🏠 | Строитель | Построил 1 дом (1000 баллов) |
| 📆 | Полгода | Посетил все уроки полугодия |

**Сценарий 1 (Teacher просматривает достижения ученика):**
1. Teacher открывает карточку Поповой Виктории
2. Переходит на вкладку "Достижения"
3. Видит 5 полученных достижений
4. Кликает на 🏆 "Отличник"
5. Видит детальную информацию: когда получено, за какие уроки
6. Видит, что ученица получила +10 бонусных баллов
7. Закрывает модалку
8. Обращает внимание на прогресс "⭐ Прилежный" (8.5/9)
9. Понимает, что ученице нужно немного подтянуть домашку

**Сценарий 2 (Teacher поощряет ученика за достижение):**
1. Система автоматически начисляет 🏆 "Отличник" Иванову Петру
2. Teacher видит всплывающее уведомление на /checking-homework
3. Объявляет классу о новом достижении
4. Дети аплодируют
5. Иванов Петр мотивирован продолжать учиться

---

## 5. Административные страницы

### 5.1 Управление преподавателями (/teachers)

**Доступ:** Admin, Superadmin

**Назначение:** CRUD операции для преподавателей

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════╗
║ 🏠 Dashboard > Преподаватели                                  ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  👨‍🏫 Управление преподавателями        [➕ Добавить преподавателя]║
║  ════════════════════════════════════════                     ║
║                                                               ║
║  [🔍 Поиск по имени...]  [Группа: Все ▼]  [Статус: Все ▼]    ║
║                                                               ║
║  ┌────────────────────┐  ┌────────────────────┐              ║
║  │ 👤 Иванова М.В.    │  │ 👤 Петров И.С.     │              ║
║  │ [Аватар]           │  │ [Аватар]           │              ║
║  │                    │  │                    │              ║
║  │ Группы:            │  │ Группы:            │              ║
║  │ • Младшая (6-8)    │  │ • Средняя (9-11)   │              ║
║  │ • Средняя (9-11)   │  │                    │              ║
║  │                    │  │                    │              ║
║  │ ✅ Активный         │  │ ✅ Активный         │              ║
║  │                    │  │                    │              ║
║  │ [✏️ Редактировать]  │  │ [✏️ Редактировать]  │              ║
║  │ [⏸ Деактивировать] │  │ [⏸ Деактивировать] │              ║
║  └────────────────────┘  └────────────────────┘              ║
║                                                               ║
║  ┌────────────────────┐  ┌────────────────────┐              ║
║  │ 👤 Сидорова Е.А.   │  │ 👤 Козлов А.В.     │              ║
║  │ [Аватар]           │  │ [Аватар]           │              ║
║  │                    │  │                    │              ║
║  │ Группы:            │  │ Группы:            │              ║
║  │ • Старшая (12-14)  │  │ • Младшая (6-8)    │              ║
║  │                    │  │                    │              ║
║  │ ✅ Активный         │  │ ⏸ Неактивный       │              ║
║  │                    │  │                    │              ║
║  │ [✏️ Редактировать]  │  │ [✏️ Редактировать]  │              ║
║  │ [⏸ Деактивировать] │  │ [▶ Активировать]   │              ║
║  └────────────────────┘  └────────────────────┘              ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**Модальное окно "Добавить/Редактировать преподавателя":**
```
┌────────────────────────────────────────────────────┐
│ Добавить нового преподавателя              [✕]    │
├────────────────────────────────────────────────────┤
│                                                    │
│  Фото:                                             │
│  ┌──────────────────┐                              │
│  │   [📷 Загрузить] │                              │
│  │   или перетащите │                              │
│  └──────────────────┘                              │
│                                                    │
│  Имя: *                                            │
│  [Мария____________________]                       │
│                                                    │
│  Фамилия: *                                        │
│  [Иванова__________________]                       │
│                                                    │
│  Отчество:                                         │
│  [Васильевна_______________]                       │
│                                                    │
│  Email (для входа): *                              │
│  [maria.ivanova@church.com_]                       │
│                                                    │
│  ─────────────────────────────────                 │
│                                                    │
│  Назначение групп: *                               │
│  [🔍 Начните вводить название группы...]           │
│                                                    │
│  Выбранные группы:                                 │
│  ┌──────────────────────────────────────┐         │
│  │ [Младшая группа (6-8 лет)       ✕]   │         │
│  │ [Средняя группа (9-11 лет)      ✕]   │         │
│  └──────────────────────────────────────┘         │
│                                                    │
│  ─────────────────────────────────                 │
│                                                    │
│  Статус:                                           │
│  [✓ Активный]  [ Неактивный]                       │
│                                                    │
│                                                    │
│  [  Отмена  ]     [  Сохранить преподавателя  ]    │
│                                                    │
└────────────────────────────────────────────────────┘
```

**Элементы:**
- Карточки преподавателей с аватарами
- Поиск по имени
- Фильтры (по группе, по статусу)
- Модальное окно для добавления/редактирования
- Загрузка фото (drag & drop или выбор файла)
- Multi-select для назначения групп
- Деактивация (мягкое удаление)

**Валидация:**
- Email уникален в системе
- Минимум одна группа должна быть назначена
- ФИО обязательны

**Сценарий (Admin добавляет преподавателя):**
1. Admin на /teachers
2. Нажимает "➕ Добавить преподавателя"
3. Открывается модальное окно
4. Загружает фото
5. Заполняет ФИО: Мария Васильевна Иванова
6. Вводит email: maria.ivanova@church.com
7. Начинает вводить "Младшая" в поле групп
8. Видит выпадающий список групп
9. Выбирает "Младшая группа (6-8 лет)"
10. Добавляется чип с группой
11. Добавляет ещё "Средняя группа (9-11 лет)"
12. Оставляет статус "Активный"
13. Нажимает "Сохранить преподавателя"
14. Система создаёт User account с ролью Teacher
15. Система создаёт Teacher запись
16. Видит новую карточку в списке преподавателей
17. Система отправляет email на maria.ivanova@church.com с временным паролем (Post-MVP)

---

### 5.2 Управление группами (/grades-list)

**Доступ:** Admin, Superadmin

**Назначение:** CRUD операции для групп (grades)

**Wireframe:**
```
╔════════════════════════════════════════════════════════════╗
║ 🏠 Dashboard > Группы                                      ║
╠════════════════════════════════════════════════════════════╣
║                                                            ║
║  📚 Управление группами                 [➕ Создать группу]║
║  ═══════════════════════════════════════                   ║
║                                                            ║
║  [🔍 Поиск по названию...]  [Статус: Все ▼]                ║
║                                                            ║
║  ┌──────────────────────────────────────────────────┐     ║
║  │  📚 Младшая группа (6-8 лет)                     │     ║
║  │  ────────────────────────────────────            │     ║
║  │                                                  │     ║
║  │  👥 Учеников: 12                                 │     ║
║  │  👨‍🏫 Преподавателей: 2                             │     ║
║  │     • Иванова М.В.                               │     ║
║  │     • Козлов А.В.                                │     ║
║  │                                                  │     ║
║  │  ✅ Активная                                      │     ║
║  │                                                  │     ║
║  │  [Открыть]  [✏️ Редактировать]  [⏸ Деактивировать]│    ║
║  └──────────────────────────────────────────────────┘     ║
║                                                            ║
║  ┌──────────────────────────────────────────────────┐     ║
║  │  📚 Средняя группа (9-11 лет)                    │     ║
║  │  ────────────────────────────────────            │     ║
║  │                                                  │     ║
║  │  👥 Учеников: 15                                 │     ║
║  │  👨‍🏫 Преподавателей: 2                             │     ║
║  │     • Иванова М.В.                               │     ║
║  │     • Петров И.С.                                │     ║
║  │                                                  │     ║
║  │  ✅ Активная                                      │     ║
║  │                                                  │     ║
║  │  [Открыть]  [✏️ Редактировать]  [⏸ Деактивировать]│    ║
║  └──────────────────────────────────────────────────┘     ║
║                                                            ║
║  ┌──────────────────────────────────────────────────┐     ║
║  │  📚 Старшая группа (12-14 лет)                   │     ║
║  │  ────────────────────────────────────            │     ║
║  │                                                  │     ║
║  │  👥 Учеников: 10                                 │     ║
║  │  👨‍🏫 Преподавателей: 1                             │     ║
║  │     • Сидорова Е.А.                              │     ║
║  │                                                  │     ║
║  │  ✅ Активная                                      │     ║
║  │                                                  │     ║
║  │  [Открыть]  [✏️ Редактировать]  [⏸ Деактивировать]│    ║
║  └──────────────────────────────────────────────────┘     ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

**Модальное окно "Создать/Редактировать группу":**
```
┌───────────────────────────────────────────────────────┐
│ Создать новую группу                          [✕]    │
├───────────────────────────────────────────────────────┤
│                                                       │
│  Название группы: *                                   │
│  [Младшая группа________________]                     │
│                                                       │
│  Возрастной диапазон: *                               │
│  [6-8 лет_______________________]                     │
│                                                       │
│  Описание:                                            │
│  [Группа для детей младшего______________________]    │
│  [школьного возраста_____________________________]    │
│                                                       │
│  ──────────────────────────────────────               │
│                                                       │
│  Назначить преподавателей: *                          │
│  [🔍 Поиск преподавателей...]                          │
│                                                       │
│  Выбранные преподаватели:                             │
│  ┌───────────────────────────────────────┐           │
│  │ [👤 Иванова М.В.                  ✕]  │           │
│  │ [👤 Козлов А.В.                   ✕]  │           │
│  └───────────────────────────────────────┘           │
│                                                       │
│  ──────────────────────────────────────               │
│                                                       │
│  Добавить учеников:                                   │
│  [🔍 Поиск учеников...]                                │
│                                                       │
│  Выбранные ученики (12):                              │
│  ┌───────────────────────────────────────┐           │
│  │ [👤 Иванов П. (9 лет)             ✕]  │           │
│  │ [👤 Петрова А. (8 лет)            ✕]  │           │
│  │ [👤 Сидоров М. (10 лет)           ✕]  │           │
│  │ [...показать ещё 9]                    │           │
│  └───────────────────────────────────────┘           │
│                                                       │
│  ──────────────────────────────────────               │
│                                                       │
│  Статус:                                              │
│  [✓ Активная]  [ Неактивная]                          │
│                                                       │
│                                                       │
│  [  Отмена  ]         [  Создать группу  ]            │
│                                                       │
└───────────────────────────────────────────────────────┘
```

**Элементы:**
- Карточки групп с информацией
- Кнопка "Открыть" → переход на /grade-data (страницу группы)
- Модальное окно для создания/редактирования
- Multi-select для назначения преподавателей и учеников
- Автоматическое создание GradeSettings при создании группы

**Важное поведение:**
- При создании группы автоматически создаются настройки по умолчанию (все параметры включены)
- Нельзя удалить группу, если в ней есть ученики (сначала нужно переназначить учеников)
- Можно деактивировать группу (мягкое удаление)

**Сценарий (Admin создаёт группу):**
1. Admin на /grades-list
2. Нажимает "➕ Создать группу"
3. Заполняет название: "Младшая группа"
4. Заполняет возраст: "6-8 лет"
5. Добавляет описание
6. Начинает вводить имя преподавателя
7. Выбирает Иванову М.В. и Козлова А.В.
8. Начинает добавлять учеников по одному
9. Выбирает 12 учеников из списка
10. Нажимает "Создать группу"
11. Система создаёт Grade запись
12. Система создаёт GradeSettings с дефолтными значениями
13. Система связывает учеников и преподавателей с группой
14. Видит новую карточку группы
15. Может сразу открыть её и начать создавать уроки

---

### 5.3 Управление учениками (/pupils)

**Доступ:** Admin, Superadmin

**Назначение:** CRUD операции для учеников

**Wireframe:**
```
╔════════════════════════════════════════════════════════════╗
║ 🏠 Dashboard > Ученики                                     ║
╠════════════════════════════════════════════════════════════╣
║                                                            ║
║  👨‍🎓 Управление учениками                [➕ Добавить ученика]║
║  ═══════════════════════════════════════                   ║
║                                                            ║
║  [🔍 Поиск по имени...]  [Группа: Все ▼]  [Семья: Все ▼]  ║
║  [Возраст: Все ▼]  [Статус: Все ▼]                        ║
║                                                            ║
║  ┌─────────────────┐  ┌─────────────────┐                 ║
║  │ 👤 Иванов Пётр  │  │ 👤 Петрова Анна │                 ║
║  │ [Аватар]        │  │ [Аватар]        │                 ║
║  │                 │  │                 │                 ║
║  │ Возраст: 9 лет  │  │ Возраст: 8 лет  │                 ║
║  │ ДР: 12.03.2015  │  │ ДР: 05.07.2016  │                 ║
║  │                 │  │                 │                 ║
║  │ Группа:         │  │ Группа:         │                 ║
║  │ Младшая (6-8)   │  │ Младшая (6-8)   │                 ║
║  │                 │  │                 │                 ║
║  │ Семья:          │  │ Семья:          │                 ║
║  │ Ивановы         │  │ Петровы         │                 ║
║  │                 │  │                 │                 ║
║  │ ✅ Активный      │  │ ✅ Активный      │                 ║
║  │                 │  │                 │                 ║
║  │ [Просмотр]      │  │ [Просмотр]      │                 ║
║  │ [✏️ Редактировать]│ │ [✏️ Редактировать]│                 ║
║  │ [⏸ Деактивировать]│ │ [⏸ Деактивировать]│                 ║
║  └─────────────────┘  └─────────────────┘                 ║
║                                                            ║
║  (ещё 25 учеников...)                                      ║
║                                                            ║
║  ◄ Назад    Страница 1 из 3    Далее ►                    ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

**Модальное окно "Добавить/Редактировать ученика":**
```
┌─────────────────────────────────────────────────────┐
│ Добавить нового ученика                     [✕]    │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Фото:                                              │
│  ┌──────────────────┐                               │
│  │   [📷 Загрузить] │                               │
│  │   (опционально)  │                               │
│  └──────────────────┘                               │
│                                                     │
│  Имя: *                                             │
│  [Виктория_____________]                            │
│                                                     │
│  Фамилия: *                                         │
│  [Попова_______________]                            │
│                                                     │
│  Отчество:                                          │
│  [Андреевна____________]                            │
│                                                     │
│  Дата рождения: *                                   │
│  [📅 15.01.2014_______]  Возраст: 10 лет            │
│                                                     │
│  ────────────────────────────────────               │
│                                                     │
│  Семья: *                                           │
│  [Поповы ▼]                                         │
│  [➕ Создать новую семью]                            │
│                                                     │
│  Группа: *                                          │
│  [Младшая группа (6-8 лет) ▼]                       │
│                                                     │
│  ────────────────────────────────────               │
│                                                     │
│  Статус:                                            │
│  [✓ Активный]  [ Неактивный]                        │
│                                                     │
│                                                     │
│  [  Отмена  ]      [  Сохранить ученика  ]          │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**Особенности:**
- Кнопка "Просмотр" → переход на /pupil-personal-data/:id
- Возраст рассчитывается автоматически из даты рождения
- Можно создать новую семью прямо из этой формы (inline creation)
- Фильтрация по множеству критериев
- Пагинация для больших списков

**Валидация:**
- Дата рождения: возраст 3-18 лет
- Семья обязательна
- Группа обязательна
- Нельзя деактивировать ученика с записями в текущем учебном году (нужно сначала удалить записи или завершить год)

**Сценарий (Admin добавляет ученика):**
1. Admin на /pupils
2. Нажимает "➕ Добавить ученика"
3. Заполняет ФИО: Виктория Андреевна Попова
4. Выбирает дату рождения: 15.01.2014
5. Видит автоматически рассчитанный возраст: 10 лет
6. Начинает выбирать семью
7. Не находит нужную семью в списке
8. Нажимает "➕ Создать новую семью"
9. Открывается вложенная модалка создания семьи
10. Заполняет данные родителей (см. следующий раздел)
11. Семья создаётся и автоматически выбирается
12. Выбирает группу "Младшая группа"
13. Нажимает "Сохранить ученика"
14. Система создаёт Pupil запись
15. Видит нового ученика в списке

---

### 5.4 Управление семьями (/families)

**Доступ:** Admin, Superadmin

**Назначение:** CRUD операции для семей

**Wireframe:**
```
╔═══════════════════════════════════════════════════════════════╗
║ 🏠 Dashboard > Семьи                                          ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  👨‍👩‍👧‍👦 Управление семьями                   [➕ Добавить семью]║
║  ═══════════════════════════════════════                      ║
║                                                               ║
║  [🔍 Поиск по фамилии...]  [Статус: Все ▼]                    ║
║                                                               ║
║  ┌──────────────────────────────────────────────────────┐    ║
║  │  👨‍👩‍👧‍👦 Семья Поповых                                  │    ║
║  │  ─────────────────────────────────────────            │    ║
║  │                                                       │    ║
║  │  👨 Отец: Андрей Викторович Попов                     │    ║
║  │     📞 +7 (912) 345-67-89                             │    ║
║  │                                                       │    ║
║  │  👩 Мать: Елена Сергеевна Попова                      │    ║
║  │     📞 +7 (912) 345-67-90                             │    ║
║  │                                                       │    ║
║  │  👥 Дети в воскресной школе (1):                      │    ║
║  │     • Попова Виктория (10 лет) - Младшая группа      │    ║
║  │                                                       │    ║
║  │  ✅ Активная                                           │    ║
║  │                                                       │    ║
║  │  [✏️ Редактировать]  [⏸ Деактивировать]               │    ║
║  └──────────────────────────────────────────────────────┘    ║
║                                                               ║
║  ┌──────────────────────────────────────────────────────┐    ║
║  │  👨‍👩‍👧‍👦 Семья Ивановых                                 │    ║
║  │  ─────────────────────────────────────────            │    ║
║  │                                                       │    ║
║  │  👨 Отец: Пётр Иванович Иванов                        │    ║
║  │     📞 +7 (912) 111-22-33                             │    ║
║  │                                                       │    ║
║  │  👩 Мать: Мария Петровна Иванова                      │    ║
║  │     📞 +7 (912) 111-22-34                             │    ║
║  │                                                       │    ║
║  │  👥 Дети в воскресной школе (2):                      │    ║
║  │     • Иванов Пётр (9 лет) - Младшая группа           │    ║
║  │     • Иванова Анна (6 лет) - Младшая группа          │    ║
║  │                                                       │    ║
║  │  ✅ Активная                                           │    ║
║  │                                                       │    ║
║  │  [✏️ Редактировать]  [⏸ Деактивировать]               │    ║
║  └──────────────────────────────────────────────────────┘    ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**Модальное окно "Добавить/Редактировать семью":**
```
┌──────────────────────────────────────────────────┐
│ Добавить новую семью                     [✕]    │
├──────────────────────────────────────────────────┤
│                                                  │
│  👨 ОТЕЦ:                                         │
│                                                  │
│  Имя:                                            │
│  [Андрей________________]                        │
│                                                  │
│  Фамилия:                                        │
│  [Попов_________________]                        │
│                                                  │
│  Телефон:                                        │
│  [+7 (___) ___-__-__]                            │
│                                                  │
│  ───────────────────────────────────             │
│                                                  │
│  👩 МАТЬ:                                         │
│                                                  │
│  Имя:                                            │
│  [Елена_________________]                        │
│                                                  │
│  Фамилия:                                        │
│  [Попова________________]                        │
│                                                  │
│  Телефон:                                        │
│  [+7 (___) ___-__-__]                            │
│                                                  │
│  ───────────────────────────────────             │
│                                                  │
│  Дети в воскресной школе:                        │
│  (управляется через страницу Учеников)           │
│  • (Пока нет детей)                              │
│                                                  │
│  ───────────────────────────────────             │
│                                                  │
│  Статус:                                         │
│  [✓ Активная]  [ Неактивная]                     │
│                                                  │
│  💡 Хотя бы один родитель должен быть указан     │
│                                                  │
│                                                  │
│  [  Отмена  ]       [  Сохранить семью  ]        │
│                                                  │
└──────────────────────────────────────────────────┘
```

**Элементы:**
- Карточки семей с информацией о родителях и детях
- Список детей кликабелен (переход на /pupil-personal-data/:id)
- Телефоны с маской ввода
- Валидация: хотя бы один родитель должен быть указан

**Важные правила:**
- Нельзя удалить семью, если к ней привязаны ученики
- Можно деактивировать (если все дети деактивированы)
- При редактировании можно увидеть всех детей, но добавление/удаление детей делается через /pupils

**Сценарий (Admin создаёт семью):**
1. Admin на /families
2. Нажимает "➕ Добавить семью"
3. Заполняет данные отца: Андрей Викторович Попов, телефон
4. Заполняет данные матери: Елена Сергеевна Попова, телефон
5. Нажимает "Сохранить семью"
6. Система создаёт Family запись
7. Видит новую карточку семьи
8. Переходит на /pupils
9. Добавляет ребёнка, выбирая эту семью

---

## 6. Пользовательские сценарии

### 6.1 Типичная неделя Teacher

**Понедельник-суббота:**
- Подготовка к уроку: изучение темы, подбор материалов
- Проверка, что урок создан в системе (тема, дата, золотые стихи)

**Воскресенье (до урока):**
1. Teacher приходит в церковь
2. Открывает приложение на планшете/ноутбуке
3. Входит в систему (email + пароль)
4. Автоматически попадает на страницу своей группы
5. Видит список академических годов
6. Открывает текущий год 2024-2025
7. Видит список всех уроков
8. Находит сегодняшний урок #6 "Жертвоприношение Авраама"
9. Кликает на тему урока
10. Попадает на страницу обзора урока
11. Видит золотые стихи для напоминания
12. Видит, что прогресс 0/15 (ещё никто не проверен)
13. Откладывает устройство, идёт вести урок

**Воскресенье (после урока):**
14. Возвращается с планшетом
15. Открывает урок #6
16. Нажимает "Начать проверку"
17. Видит список всех 15 учеников
18. Кликает на первого: Иванов Пётр
19. Открывается модальное окно проверки
20. Отмечает "Присутствовал"
21. Проверяет знание золотых стихов:
    - Стих 1: Пётр знает назубок → 2 балла
    - Стих 2: Пётр знает назубок → 2 балла
    - Стих 3: Пётр знает назубок → 2 балла
22. Просматривает тест Пети → ставит 9/10
23. Просматривает тетрадь → ставит 8/10
24. Отмечает, что Петя был на спевке
25. Нажимает "Следующий →"
26. Данные сохраняются, открывается окно Петровой Анны
27. Повторяет процесс для всех 15 учеников
28. Некоторых учеников пропускает (отсутствовали) - быстро отмечает "Отсутствовал" и жмёт "Следующий"
29. После последнего ученика модалка закрывается
30. Видит обновлённый прогресс 15/15 (100%)
31. Закрывает приложение, уходит домой

**В течение недели (если нужно):**
32. Может зайти и посмотреть сводную таблицу урока
33. Может экспортировать данные в CSV
34. Может посмотреть личную карточку любого ученика
35. Может увидеть статистику и тренды

---

### 6.2 Типичный месяц Admin

**Начало учебного года (сентябрь):**

1. Admin входит в систему
2. Попадает на Dashboard /grades-list
3. Проверяет, что все группы активны
4. Переходит в /teachers
5. Проверяет список преподавателей
6. Замечает, что Козлов А.В. ушёл → деактивирует его
7. Нужно добавить нового преподавателя → нажимает "➕ Добавить"
8. Заполняет данные нового учителя: Смирнов Д.И.
9. Загружает фото
10. Назначает на Младшую группу
11. Создаёт учителя
12. Система генерирует account с email и временным паролем

13. Переходит в /pupils
14. Добавляет новых учеников (3 новых ребёнка)
15. Для одного из них создаёт новую семью прямо в форме
16. Назначает учеников на группы

17. Переходит на /grades-list
18. Открывает Младшую группу
19. Попадает на /grade-data
20. Видит, что нет учебного года 2024-2025
21. Создаёт новый учебный год: 01.09.2024 - 31.05.2025

22. Переходит в настройки группы /grade-data-settings
23. Для Младшей группы отключает "Посещение спевки" (они ещё малы)
24. Сохраняет настройки

**В течение года:**

25. Раз в неделю заходит проверить, что учителя вносят данные
26. Смотрит статистику по группам
27. Просматривает личные карточки учеников
28. Помогает родителям, если нужен доступ к данным детей
29. Периодически экспортирует отчёты для руководства церкви

**Середина года (январь):**

30. Один из учеников переезжает → Admin деактивирует его
31. Приходит новая семья с 2 детьми:
    - Создаёт семью Сидоровых
    - Создаёт ученика Сидоров М. (10 лет) → Младшая группа
    - Создаёт ученика Сидорова А. (7 лет) → Младшая группа

**Конец года (май-июнь):**

32. Проверяет, что все уроки за год проведены
33. Экспортирует сводную статистику по всем группам
34. Готовит отчёт для церкви:
    - Количество учеников: 37
    - Средняя посещаемость: 89%
    - Проведено уроков: 108 (по всем группам)
35. Переводит учеников из Младшей в Среднюю группу (если они выросли)
36. Планирует новый учебный год

---

### 6.3 Сценарий использования (Parent) — Post-MVP

**Будущий функционал:**

1. Parent получает доступ к приложению (email + password)
2. Входит в систему
3. Видит список своих детей
4. Кликает на Виктория Попова
5. Видит полную историю уроков Виктории (только чтение)
6. Видит статистику:
   - Посещаемость: 94%
   - Золотые стихи: 87%
   - Средний балл тест: 8.3
   - Средний балл тетрадь: 7.8
7. Радуется успехам дочери
8. Видит, что урок #3 пропущен → спрашивает у дочери почему
9. Видит предстоящие уроки (календарь)
10. Может скачать отчёт для себя

---

## 7. Предложения по улучшению функционала

### 7.1 Краткосрочные улучшения (для следующей итерации)

#### 7.1.1 Календарь и расписание

**Проблема:** Нет общего календаря с датами уроков

**Решение:**
- Страница `/calendar` с календарной сеткой
- Отображение всех уроков по датам
- Разные цвета для разных групп
- Клик на урок → переход на страницу урока
- Фильтр по группам

**Пример интерфейса:**
```
┌─────────────── ОКТЯБРЬ 2024 ────────────────┐
│ ПН  ВТ  СР  ЧТ  ПТ  СБ  ВС                  │
│                         1   2   3   4   5   │
│  7   8   9  10  11  12  13                  │
│                           [📚Урок #6]        │
│ 14  15  16  17  18  19  20                  │
│                           [📚Урок #7]        │
│ 21  22  23  24  25  26  27                  │
│                           [📚Урок #8]        │
└─────────────────────────────────────────────┘
```

**Преимущества:**
- Наглядное представление расписания
- Планирование наперёд
- Быстрый переход к нужному уроку

---

#### 7.1.2 Уведомления

**Проблема:** Учителя и родители не получают напоминаний

**Решение:**
- Email уведомления:
  - Учителям: напоминание о завтрашнем уроке (суббота вечером)
  - Родителям: еженедельный отчёт об успеваемости ребёнка
  - Админу: статистика по неделе (сколько уроков проведено)

- Push-уведомления (PWA):
  - Напоминание за 1 день до урока
  - Уведомление, когда учитель проверил ДЗ ребёнка

- Telegram-бот (опционально):
  - Подписка на уведомления
  - Быстрый просмотр статистики ребёнка
  - Получение напоминаний

**Преимущества:**
- Меньше забытых уроков
- Родители в курсе прогресса детей
- Повышение вовлечённости

---

### 7.2 Среднесрочные улучшения (3-6 месяцев)

#### 7.2.1 Аналитика и отчёты

**Расширенная аналитика:**

1. **Дашборд для Admin:**
   - Графики посещаемости по месяцам
   - Топ-10 учеников по баллам
   - Средний балл по группам
   - Динамика по годам (сравнение)

2. **Экспорт отчётов:**
   - PDF отчёт по ученику (для родителей)
   - Excel сводка по группе (для учителя)
   - Годовой отчёт для церкви
   - Графики и диаграммы

3. **Сравнительная статистика:**
   - Сравнение групп между собой
   - Тренды по годам
   - Эффективность учителей

**Преимущества:**
- Данные для принятия решений
- Прозрачность для руководства
- Мотивация для учителей

---

#### 7.2.2 Материалы к урокам

**Проблема:** Учителя хранят материалы где попало

**Решение:**
- Библиотека материалов `/resources`
- Для каждого урока можно прикрепить:
  - PDF файлы (рабочие тетради)
  - Презентации
  - Аудио/видео материалы
  - Ссылки на внешние ресурсы

- Категории:
  - По темам (Ветхий Завет, Новый Завет)
  - По типу (картинки, видео, тесты)
  - По возрасту (6-8, 9-11, 12-14)

- Доступ:
  - Учителя: загрузка и скачивание
  - Админ: модерация и организация
  - Родители: скачивание (опционально)

**Преимущества:**
- Централизованное хранилище
- Переиспользование материалов
- Новые учителя быстро находят материалы

---

#### 7.2.3 Посещаемость через QR-коды

**Проблема:** Отмечать присутствие вручную долго

**Решение:**
- Каждому ученику выдаётся карточка с QR-кодом
- При входе в класс ученик сканирует свой QR
- Система автоматически отмечает присутствие
- Учитель видит в real-time кто пришёл
- После урока остаётся только проверить ДЗ

**Альтернатива:**
- NFC-метки (если есть считыватель)
- Мобильное приложение для родителей (отметить присутствие)

**Преимущества:**
- Экономия времени
- Точность (нельзя "забыть" отметить)
- Современный подход

---

### 7.3 Долгосрочные улучшения (6-12 месяцев)

#### 7.3.1 Мобильное приложение

**Платформы:** iOS + Android (React Native)

**Функционал:**
- Все возможности веб-версии
- Offline режим (просмотр данных без интернета)
- Push-уведомления
- Быстрая проверка ДЗ на телефоне
- Камера для фотографирования работ учеников

**Преимущества:**
- Удобство для учителей (не нужен ноутбук)
- Родители могут проверить прогресс на ходу
- Современный UX

---

#### 7.3.2 Интеграция с церковной системой

**Проблема:** Данные дублируются в разных системах

**Решение:**
- API интеграция с Church Management System
- Синхронизация данных о семьях
- Общая база контактов
- Единый вход (SSO)

**Преимущества:**
- Нет дублирования данных
- Единая экосистема церкви

---

#### 7.3.3 Видеоуроки и онлайн-занятия

**Для гибридного формата:**
- Запись уроков на видео
- Хранение в облаке
- Доступ для учеников, которые пропустили
- Онлайн-уроки через Zoom/Meet (интеграция)
- Автоматическая отметка присутствия на онлайн-уроке

**Преимущества:**
- Охват детей, которые не могут прийти
- Повторение материала дома
- Современный подход к обучению

---

### 7.4 UX/UI улучшения

#### 7.4.1 Тёмная тема

- Переключатель Light/Dark mode
- Сохранение предпочтения пользователя
- Автоматическое переключение по времени суток

---

#### 7.4.2 Drag & Drop

- Перетаскивание учеников между группами
- Перетаскивание уроков для изменения порядка
- Перетаскивание файлов для загрузки

---

#### 7.4.3 Keyboard shortcuts

- `Ctrl+N` — создать новый урок
- `Ctrl+S` — сохранить
- `Ctrl+F` — поиск
- `Esc` — закрыть модалку
- `→` / `←` — навигация между учениками при проверке ДЗ

---

#### 7.4.4 Голосовой ввод

- Для быстрой проверки ДЗ
- Учитель говорит: "Иванов Пётр, золотые стихи 2-2-2, тест 9, тетрадь 8"
- Система распознаёт и заполняет форму

---

### 7.5 Административные улучшения

#### 7.5.1 Audit Log

- Логирование всех изменений данных
- Кто, когда и что изменил
- Возможность отката изменений
- Отчёт для аудита

---

#### 7.5.2 Backup & Restore

- Автоматический ежедневный бэкап БД
- Возможность скачать бэкап вручную
- Восстановление из бэкапа (Admin)

---

#### 7.5.3 Multi-tenancy

- Поддержка нескольких церквей в одной системе
- Изолированные данные
- Разные домены/поддомены
- Централизованное управление

---

#### 7.5.4 Расширенное управление архивом

**Текущая реализация:** Базовое архивирование уроков с ручным восстановлением

**Предлагаемые улучшения:**

1. **Автоматическая политика хранения:**
   - Настраиваемый срок хранения архивных уроков (90 дней, 180 дней, 1 год, бессрочно)
   - Автоматическое уведомление Admin перед окончательным удалением
   - Массовая очистка старых архивных данных

2. **Расширенные фильтры архива:**
   - Поиск по причине архивирования
   - Фильтр по пользователю, который архивировал
   - Группировка по периодам (учебным годам, кварталам)

3. **Экспорт архивных данных:**
   - Экспорт в Excel/PDF для долговременного хранения
   - Экспорт отдельного урока со всеми записями
   - Массовый экспорт всего архива

4. **Причины архивирования:**
   - Обязательное указание причины при архивировании
   - Предопределённые причины: "Ошибочно создан", "Отменён", "Дубликат", "Другое"
   - История причин в интерфейсе просмотра

5. **Запросы на восстановление:**
   - Страница для Admin с очередью запросов
   - Уведомления при новых запросах
   - Возможность добавить комментарий при отклонении

6. **Bulk операции:**
   - Массовое архивирование нескольких уроков
   - Массовое восстановление
   - Выбор через чекбоксы с подтверждением

**Wireframe: Страница запросов на восстановление (Admin)**
```
╔═══════════════════════════════════════════════════════════════════════════╗
║ 🏠 Главная > Администрирование > Запросы на восстановление               ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  📨 Запросы на восстановление уроков                                      ║
║  ═══════════════════════════════════════════════════════════              ║
║                                                                           ║
║  [Все (5)] [Новые (3)] [Одобренные (1)] [Отклонённые (1)]                ║
║                                                                           ║
║  ┌───────────────────────────────────────────────────────────────────┐   ║
║  │ 📌 НОВЫЙ                                                          │   ║
║  │ Урок #12 "Иосиф в Египте" — Младшая группа                       │   ║
║  │ Запрос от: Иванова М.В. (Teacher)                                │   ║
║  │ Дата запроса: 25.10.2024 14:30                                   │   ║
║  │ Архивирован: 45 дней назад (10.09.2024)                          │   ║
║  │ Причина архивирования: "Ошибочно создан"                         │   ║
║  │                                                                    │   ║
║  │ [Одобрить] [Отклонить] [Просмотреть урок]                        │   ║
║  └────────────────────────────────────────────────────────────────────┘   ║
║                                                                           ║
║  ┌───────────────────────────────────────────────────────────────────┐   ║
║  │ 📌 НОВЫЙ                                                          │   ║
║  │ Урок #7 "Вавилонская башня" — Средняя группа                     │   ║
║  │ Запрос от: Петров И.С. (Teacher)                                 │   ║
║  │ Дата запроса: 24.10.2024 09:15                                   │   ║
║  │ Архивирован: 52 дня назад (03.09.2024)                           │   ║
║  │ Причина архивирования: "Отменён"                                 │   ║
║  │                                                                    │   ║
║  │ [Одобрить] [Отклонить] [Просмотреть урок]                        │   ║
║  └────────────────────────────────────────────────────────────────────┘   ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝
```

**Преимущества:**
- Полная прозрачность работы с архивом
- Снижение риска потери данных
- Удобное администрирование
- Соответствие best practices по управлению данными

---

### 7.6 Приоритизация улучшений

**Высокий приоритет (внедрить в следующей итерации):**
1. ✅ Календарь и расписание
2. ✅ Email уведомления
3. Расширенная аналитика с графиками

**Средний приоритет (3-6 месяцев):**
4. Аналитика и отчёты
5. Библиотека материалов к урокам
6. Тёмная тема

**Низкий приоритет (6-12 месяцев):**
7. Мобильное приложение
8. QR-коды для посещаемости
9. Видеоуроки
10. Интеграция с церковной системой

---

## Заключение

Данный документ описывает полный функционал Sunday School App MVP с детальными wireframes, элементами интерфейса и пользовательскими сценариями.

**Ключевые особенности приложения:**
- ✅ Интуитивный интерфейс для всех ролей
- ✅ Быстрая проверка домашних заданий
- ✅ **Система мотивации с баллами, домиками и достижениями**
- ✅ **Рейтинг учеников и игрофикация**
- ✅ Полная история учеников
- ✅ Гибкие настройки для разных групп
- ✅ Ролевой доступ (Teacher, Admin)
- ✅ Архивирование уроков с возможностью восстановления

**Готовность к разработке:**
- Все страницы описаны с wireframes
- Все модальные окна спроектированы
- Все сценарии проработаны
- Валидация и бизнес-логика определены

**Следующие шаги:**
1. Согласование дизайна с заказчиком
2. Создание визуальных прототипов в Figma
3. Начало разработки по фазам (см. Master PRD)
4. Тестирование с реальными пользователями
5. Итеративное улучшение на основе обратной связи

---

**Версия документа:** 1.0  
**Дата создания:** 30 октября 2025  
**Автор:** AI Development Team  
**Статус:** Ready for Review
