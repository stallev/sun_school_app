# SSG —Å —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø—ã

## –°—Ç–∞—Ç—É—Å
üîç **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** - –ê–Ω–∞–ª–∏–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSG/ISR

## –í–æ–ø—Ä–æ—Å

–ù–∞—Å–∫–æ–ª—å–∫–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∏ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Static Site Generation (SSG) —Å —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π** –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø—ã? –ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ —É–º–µ–Ω—å—à–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ AWS AppSync? –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª**: `src/app/(private)/grades/[gradeId]/page.tsx`

```typescript
export const dynamic = 'force-dynamic'; // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

export default async function GradeDetailPage({ params }) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  const user = await getAuthenticatedUser();
  if (!user) {
    redirect(RoutePath.auth);
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Server Action
  const gradeResult = await getGradeWithFullDataAction({ id: gradeId });
  // ...
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (SSR)
- –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
- –¢—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync

–î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø—ã —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- **~110 –∑–∞–ø—Ä–æ—Å–æ–≤** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö: **~1100 –∑–∞–ø—Ä–æ—Å–æ–≤** –∫ AppSync

## SSG —Å —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (ISR)

### –ß—Ç–æ —Ç–∞–∫–æ–µ ISR (Incremental Static Regeneration)

ISR –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –µ—ë
- –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (revalidate)
- –û–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å AWS Amplify Hosting

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**:
- AWS Amplify Hosting –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Next.js ISR (Incremental Static Regeneration)
- Next.js 15.5.9 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å AWS Amplify Hosting (—Å–º. [AMPLIFY_COMPATIBILITY.md](../infrastructure/AMPLIFY_COMPATIBILITY.md))
- –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AWS Amplify –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `export const revalidate` –≤ Server Components
- `revalidatePath` –∏ `revalidateTag` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ Server Actions –Ω–∞ AWS Amplify Hosting

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è Next.js 15.5.9 –Ω–∞ AWS Amplify Hosting

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ISR –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø—ã

```typescript
// src/app/(private)/grades/[gradeId]/page.tsx

// –†–µ–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
export const revalidate = 300;

export default async function GradeDetailPage({ params }) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞)
  const user = await getAuthenticatedUser();
  if (!user) {
    redirect(RoutePath.auth);
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞)
  const gradeResult = await getGradeWithFullDataAction({ id: gradeId });
  if (!gradeResult.success) {
    notFound();
  }

  // –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
  const gradeData = gradeResult.data;
  // ...
}
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ AppSync, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è
2. **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–≤ —Ç–µ—á–µ–Ω–∏–µ revalidate –ø–µ—Ä–∏–æ–¥–∞)**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∫—ç—à–∞, **–∑–∞–ø—Ä–æ—Å—ã –∫ AppSync –ù–ï –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è**
3. **–ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è revalidate**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync

**–ë–µ–∑ ISR**:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- –ü—Ä–∏ 100 –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ —á–∞—Å: **~11,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å**

**–° ISR (revalidate = 300 —Å–µ–∫—É–Ω–¥ = 5 –º–∏–Ω—É—Ç)**:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- –ó–∞–ø—Ä–æ—Å—ã –≤ —á–∞—Å: **~1,320 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å** (12 —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–π √ó 110 –∑–∞–ø—Ä–æ—Å–æ–≤)

**–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏**: **~90%** (—Å 11,000 –¥–æ 1,320 –∑–∞–ø—Ä–æ—Å–æ–≤)

**–ü—Ä–∏ revalidate = 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)**:
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- –ó–∞–ø—Ä–æ—Å—ã –≤ —á–∞—Å: **~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å**

**–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏**: **~99%** (—Å 11,000 –¥–æ 110 –∑–∞–ø—Ä–æ—Å–æ–≤)

## –ü—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤—Å–µ–≥–¥–∞**, –¥–∞–∂–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```typescript
export default async function GradeDetailPage({ params }) {
  // –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ (–Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è)
  const user = await getAuthenticatedUser();
  if (!user) {
    redirect(RoutePath.auth);
  }

  // –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞
  const gradeResult = await getGradeWithFullDataAction({ id: gradeId });
  if (!gradeResult.success || gradeResult.error.includes('Forbidden')) {
    notFound();
  }

  // –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑ –∫—ç—à–∞
  const gradeData = gradeResult.data;
  // ...
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: `getGradeWithFullDataAction` –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è, –Ω–æ:
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ, –∑–∞–ø—Ä–æ—Å—ã –∫ AppSync –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Next.js cache)
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤ –∫—ç—à–µ, –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ AppSync

### 2. –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ revalidate.

**–ü—Ä–∏–º–µ—Ä**:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ 10:00
- Revalidate = 5 –º–∏–Ω—É—Ç
- –£—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ 10:03
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ 10:04
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Ä–æ–∫ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –µ—â–µ –Ω–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞)

**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å On-Demand Revalidation –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –ø–µ—Ä–∏–æ–¥ revalidate

### 3. On-Demand Revalidation

**–ò–¥–µ—è**: –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –ø–æ —Ç–∞–π–º–µ—Ä—É.

```typescript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–∞
import { revalidatePath } from 'next/cache';

export async function createLessonAction(input: CreateLessonInput) {
  // –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
  const lesson = await createLesson(input);
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥—Ä—É–ø–ø—ã
  revalidatePath(`/grades/${input.gradeId}`);
  
  return { success: true, data: lesson };
}
```

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å AWS Amplify Hosting**:
- ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**: `revalidatePath` –∏ `revalidateTag` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ AWS Amplify Hosting
- ‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π**: AWS Amplify –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Next.js ISR –∏ On-Demand Revalidation
- ‚úÖ **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AWS Amplify –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `revalidatePath` –≤ Server Actions
- ‚úÖ **Next.js 15.5.9**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å AWS Amplify Hosting (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤ [AMPLIFY_COMPATIBILITY.md](../infrastructure/AMPLIFY_COMPATIBILITY.md))

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
- –ú–µ–Ω—å—à–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å AWS Amplify Hosting

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `revalidatePath` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥ Server Actions

### 4. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥—Ä—É–ø–ø—ã –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Teacher –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ–≥–æ –≥—Ä—É–ø–ø—ã).

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã –∏–ª–∏ —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:

```typescript
export default async function GradeDetailPage({ params }) {
  const user = await getAuthenticatedUser();
  const isAdmin = checkRole(user, ['ADMIN', 'SUPERADMIN']);
  
  // –î–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö)
  const gradeData = await getGradeWithFullDataAction({ id: gradeId });
  
  // –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏–ª–∏ —á–µ—Ä–µ–∑ —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
  return (
    <div>
      {isAdmin && <AdminActions />}
      {/* –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
    </div>
  );
}
```

## –û—Ü–µ–Ω–∫–∞ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ SSG/ISR

1. ‚úÖ **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync**: –î–æ 90-99% —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ –∫—ç—à–∞
3. ‚úÖ **–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç**: –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync = –º–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç
4. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync
5. ‚úÖ **–õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. ‚ö†Ô∏è **–ù–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ revalidate
2. ‚ö†Ô∏è **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ On-Demand Revalidation**: –ù—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `revalidatePath` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
3. ‚ö†Ô∏è **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**: –í—Å–µ —Ä–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (–Ω–æ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync)
4. ‚ö†Ô∏è **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
5. ‚ö†Ô∏è **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫—ç—à–µ–º –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ß–∞—Å—Ç–æ –∏–∑–º–µ–Ω—è—é—â–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –£—Ä–æ–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å)
- –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: ‚ùå **–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** SSG/ISR
- –î–∞–Ω–Ω—ã–µ –±—ã—Å—Ç—Ä–æ —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç
- –ù—É–∂–Ω–∞ —á–∞—Å—Ç–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –í—ã–≥–æ–¥–∞ –æ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–µ–¥–∫–æ –∏–∑–º–µ–Ω—è—é—â–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –£—Ä–æ–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–¥–∫–æ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
- –î–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ
- –î–æ–ø—É—Å—Ç–∏–º–∞ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** SSG/ISR
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync
- –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ
- –ë–æ–ª—å—à–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –° On-Demand Revalidation

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –î–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–æ, –Ω–æ –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å On-Demand Revalidation

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** SSG/ISR —Å On-Demand Revalidation
- –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

### –î–ª—è MVP: –£—Å–ª–æ–≤–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–£—Å–ª–æ–≤–∏—è**:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ISR —Å revalidate = 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å On-Demand Revalidation –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–æ–≤
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è MVP**:
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync (–¥–æ 99%)
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å `export const revalidate`)

**–†–∏—Å–∫–∏**:
- –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞
- –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å On-Demand Revalidation

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –ù–∞—á–∞—Ç—å —Å ISR —Å revalidate = 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å On-Demand Revalidation –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ revalidate –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥—Ä—É–ø–ø—ã

```typescript
// src/app/(private)/grades/[gradeId]/page.tsx

// –†–µ–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å
export const revalidate = 3600;

export default async function GradeDetailPage({ params }) {
  const { gradeId } = await params;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)
  const user = await getAuthenticatedUser();
  if (!user) {
    redirect(RoutePath.auth);
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ –∫—ç—à–∞)
  const gradeResult = await getGradeWithFullDataAction({ id: gradeId });

  if (!gradeResult.success) {
    if (gradeResult.error.includes('not found') || gradeResult.error.includes('Forbidden')) {
      notFound();
    }
    redirect(RoutePath.grades.base);
  }

  const gradeData = gradeResult.data;
  // ...
}
```

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å On-Demand Revalidation

```typescript
// actions/lessons.ts
import { revalidatePath } from 'next/cache';

export async function createLessonAction(input: CreateLessonInput) {
  // –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
  const lesson = await createLesson(input);
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥—Ä—É–ø–ø—ã
  revalidatePath(`/grades/${input.gradeId}`);
  
  return { success: true, data: lesson };
}

export async function updateLessonAction(input: UpdateLessonInput) {
  // –û–±–Ω–æ–≤–∏—Ç—å —É—Ä–æ–∫
  const lesson = await updateLesson(input);
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥—Ä—É–ø–ø—ã
  revalidatePath(`/grades/${lesson.gradeId}`);
  
  return { success: true, data: lesson };
}

// actions/homework.ts
export async function updateHomeworkCheckAction(input: UpdateHomeworkCheckInput) {
  // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –î–ó
  const check = await updateHomeworkCheck(input);
  
  // –ü–æ–ª—É—á–∏—Ç—å lessonId –¥–ª—è —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–∏
  const lesson = await getLesson(check.lessonId);
  if (lesson) {
    revalidatePath(`/grades/${lesson.gradeId}`);
  }
  
  return { success: true, data: check };
}
```

### 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Server Action –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
// actions/grades.ts
import { unstable_cache } from 'next/cache';

export async function getGradeWithFullDataAction(input: unknown) {
  // ...
  
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Next.js cache –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  // ‚ö†Ô∏è –í–ê–ñ–ù–û: unstable_cache —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ AWS Amplify Hosting, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
  // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ISR –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  const getCachedGradeData = unstable_cache(
    async (gradeId: string) => {
      return await getGradeWithRelations(gradeId);
    },
    ['grade-data'],
    {
      revalidate: 3600, // 1 —á–∞—Å
      tags: [`grade-${gradeId}`], // –¢–µ–≥ –¥–ª—è On-Demand Revalidation
    }
  );
  
  const gradeData = await getCachedGradeData(id);
  // ...
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `unstable_cache` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ AWS Amplify Hosting, –Ω–æ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ISR –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`export const revalidate`) –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å revalidateTag –¥–ª—è On-Demand Revalidation

```typescript
// actions/lessons.ts
import { revalidateTag } from 'next/cache';

export async function createLessonAction(input: CreateLessonInput) {
  const lesson = await createLesson(input);
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ —Ç–µ–≥
  revalidateTag(`grade-${input.gradeId}`);
  
  return { success: true, data: lesson };
}
```

## –û—Ü–µ–Ω–∫–∞ —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–±–µ–∑ ISR)

**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è**:
- 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≥—Ä—É–ø–ø—ã –≤ —á–∞—Å
- ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–ù–∞–≥—Ä—É–∑–∫–∞**: 100 √ó 110 = **11,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å**

### –° ISR (revalidate = 3600 —Å–µ–∫—É–Ω–¥)

**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è**:
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- –ó–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º–∏ –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞: 0 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync

**–ù–∞–≥—Ä—É–∑–∫–∞**: **~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å**

**–°–Ω–∏–∂–µ–Ω–∏–µ**: **99%** (—Å 11,000 –¥–æ 110 –∑–∞–ø—Ä–æ—Å–æ–≤)

### –° ISR (revalidate = 300 —Å–µ–∫—É–Ω–¥) + On-Demand Revalidation

**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è**:
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync
- On-Demand Revalidation –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö: ~110 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
- 10 –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —á–∞—Å: 10 √ó 110 = 1,100 –∑–∞–ø—Ä–æ—Å–æ–≤

**–ù–∞–≥—Ä—É–∑–∫–∞**: (12 —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–π √ó 110) + 1,100 = **2,420 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AppSync –≤ —á–∞—Å**

**–°–Ω–∏–∂–µ–Ω–∏–µ**: **78%** (—Å 11,000 –¥–æ 2,420 –∑–∞–ø—Ä–æ—Å–æ–≤)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å

‚úÖ **–î–∞, –≤–æ–∑–º–æ–∂–Ω–æ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSG/ISR –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø—ã

### –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync

‚úÖ **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ**: –î–æ 90-99% –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞ revalidate

### –¶–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç—å –¥–ª—è MVP

‚úÖ **–£—Å–ª–æ–≤–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ISR —Å revalidate = 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ On-Demand Revalidation –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### –¶–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –∫–∞–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è:
- –°–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ AppSync
- –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–∞—Ç—å —Å ISR**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ISR —Å revalidate = 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)
2. **–î–æ–±–∞–≤–∏—Ç—å On-Demand Revalidation**: –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–æ–≤)
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ revalidate –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [Issue: –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞](./GRADE_PAGE_AUTHENTICATION_AND_RATE_LIMIT_ERRORS.md)
- [–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö](./GRADE_PAGE_DATA_FETCHING.md)
- [AmplifyData –∏ –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤](./AMPLIFY_DATA_AND_RATE_LIMITS.md)
- [–ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤](./GRADE_PAGE_BATCH_QUERIES_OPTIMIZATION.md)

