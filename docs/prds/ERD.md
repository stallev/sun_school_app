# Entity Relationship Diagram (ERD) - Sunday School App

## –í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞: 1.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 11 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** Sunday School App (–í–æ—Å–∫—Ä–µ—Å–Ω–∞—è —à–∫–æ–ª–∞)  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** PostgreSQL, Prisma ORM, Supabase  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL 15.x (Supabase)

---

## 1. –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–π —à–∫–æ–ª–æ–π –±–∞–ø—Ç–∏—Å—Ç—Å–∫–æ–π —Ü–µ—Ä–∫–≤–∏. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

### 1.1 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ 3NF –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª—è—Ö
- **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:** Foreign Keys —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- **–ì–∏–±–∫–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä—É–ø–ø
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å—ã –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

## 2. –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–≤—è–∑–µ–π (ERD)

```mermaid
erDiagram
    User ||--o{ Account : has
    User ||--o{ Session : has
    User ||--o{ VerificationToken : has
    User ||--o{ Grade : "teaches (many-to-many)"
    User ||--o{ UserGrade : "assigned to"
    
    Grade ||--o{ UserGrade : "has teachers"
    Grade ||--o{ AcademicYear : "has"
    Grade ||--o{ Pupil : "contains"
    Grade ||--o{ GradeEvent : "has events"
    Grade ||--|| GradeSettings : "has settings"
    
    AcademicYear ||--o{ Lesson : "contains"
    
    Lesson ||--o{ LessonGoldenVerse : "has verses"
    Lesson ||--o{ HomeworkCheck : "has checks"
    
    GoldenVerse ||--o{ LessonGoldenVerse : "used in lessons"
    
    Pupil ||--o{ HomeworkCheck : "has checks"
    Pupil ||--o{ PupilAchievement : "has achievements"
    Pupil ||--o{ FamilyMember : "belongs to family"
    
    Family ||--o{ FamilyMember : "has members"
    
    Achievement ||--o{ PupilAchievement : "awarded to pupils"
    
    User {
        string id PK
        string name
        string email UK
        datetime emailVerified
        string password
        string image
        enum role
        boolean active
        datetime createdAt
        datetime updatedAt
    }
    
    Account {
        string id PK
        string userId FK
        string type
        string provider
        string providerAccountId
        string refresh_token
        string access_token
        int expires_at
        string token_type
        string scope
        string id_token
        string session_state
    }
    
    Session {
        string id PK
        string sessionToken UK
        string userId FK
        datetime expires
    }
    
    VerificationToken {
        string identifier
        string token UK
        datetime expires
    }
    
    Grade {
        string id PK
        string name
        string description
        int minAge
        int maxAge
        boolean active
        datetime createdAt
        datetime updatedAt
    }
    
    UserGrade {
        string id PK
        string userId FK
        string gradeId FK
        datetime assignedAt
        datetime createdAt
        datetime updatedAt
    }
    
    AcademicYear {
        string id PK
        string gradeId FK
        string name
        date startDate
        date endDate
        enum status
        datetime createdAt
        datetime updatedAt
    }
    
    Lesson {
        string id PK
        string academicYearId FK
        string title
        text content
        date lessonDate
        int order
        datetime createdAt
        datetime updatedAt
    }
    
    GoldenVerse {
        string id PK
        string book
        int chapter
        int verse
        text text
        datetime createdAt
        datetime updatedAt
    }
    
    LessonGoldenVerse {
        string id PK
        string lessonId FK
        string goldenVerseId FK
        int order
        datetime createdAt
    }
    
    Pupil {
        string id PK
        string gradeId FK
        string firstName
        string lastName
        string middleName
        date dateOfBirth
        string photo
        boolean active
        datetime createdAt
        datetime updatedAt
    }
    
    HomeworkCheck {
        string id PK
        string lessonId FK
        string pupilId FK
        boolean isPresent
        boolean goldenVerse1
        int goldenVerse1Score
        boolean goldenVerse2
        int goldenVerse2Score
        boolean goldenVerse3
        int goldenVerse3Score
        boolean test
        int testScore
        boolean notebook
        int notebookScore
        boolean singing
        int points
        datetime createdAt
        datetime updatedAt
    }
    
    Family {
        string id PK
        string name
        string address
        string phone
        string email
        datetime createdAt
        datetime updatedAt
    }
    
    FamilyMember {
        string id PK
        string familyId FK
        string pupilId FK
        string relationship
        datetime createdAt
    }
    
    Achievement {
        string id PK
        string name
        string description
        string icon
        string type
        json criteria
        datetime createdAt
        datetime updatedAt
    }
    
    PupilAchievement {
        string id PK
        string pupilId FK
        string achievementId FK
        datetime awardedAt
        datetime createdAt
    }
    
    GradeEvent {
        string id PK
        string gradeId FK
        enum type
        string title
        text description
        date eventDate
        time startTime
        time endTime
        datetime createdAt
        datetime updatedAt
    }
    
    GradeSettings {
        string id PK
        string gradeId FK UK
        boolean showGoldenVerses
        boolean showTest
        boolean showNotebook
        boolean showSinging
        string goldenVersesLabel
        string testLabel
        string notebookLabel
        string singingLabel
        json customPoints
        datetime createdAt
        datetime updatedAt
    }
```

---

## 3. –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

### 3.1. User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —Å–∏—Å—Ç–µ–º—ã (–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, —Ä–æ–¥–∏—Ç–µ–ª–∏, —É—á–µ–Ω–∏–∫–∏)

**–¢–∞–±–ª–∏—Ü–∞:** `users`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| name | String | –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | NOT NULL, min 2 chars |
| email | String | Email –∞–¥—Ä–µ—Å –¥–ª—è –≤—Ö–æ–¥–∞ | UNIQUE, NOT NULL, valid email |
| emailVerified | DateTime? | –î–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email | NULL –µ—Å–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω |
| password | String | –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å (bcrypt) | NOT NULL, min 8 chars |
| image | String? | URL –∞–≤–∞—Ç–∞—Ä–∞ (Supabase Storage) | NULL |
| role | Enum UserRole | –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | NOT NULL, DEFAULT 'TEACHER' |
| active | Boolean | –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | DEFAULT true |
| createdAt | DateTime | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**Enum UserRole:**
- `TEACHER` - –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
- `ADMIN` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `SUPERADMIN` - –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `PARENT` - –†–æ–¥–∏—Ç–µ–ª—å (Post-MVP)
- `PUPIL` - –£—á–µ–Ω–∏–∫ (Post-MVP)

**–ò–Ω–¥–µ–∫—Å—ã:**
- `email` (UNIQUE)
- `role`
- `active`
- `createdAt`

**–°–≤—è–∑–∏:**
- `accounts` ‚Üí Account[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `sessions` ‚Üí Session[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `verificationTokens` ‚Üí VerificationToken[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `userGrades` ‚Üí UserGrade[] (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º —á–µ—Ä–µ–∑ UserGrade, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ —Å–∏—Å—Ç–µ–º–µ
- –ü–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (bcrypt, 10 rounds)
- –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (active = false) –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π (—á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ User –∑–∞–ø–∏—Å–∏, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Auth.js
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤ proxy.ts
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

---

### 3.2. Account (OAuth –∞–∫–∫–∞—É–Ω—Ç—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ OAuth –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Auth.js)

**–¢–∞–±–ª–∏—Ü–∞:** `accounts`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| userId | String | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | FK ‚Üí User.id, NOT NULL |
| type | String | –¢–∏–ø –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | NOT NULL (e.g., "oauth", "email") |
| provider | String | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | NOT NULL (e.g., "google", "credentials") |
| providerAccountId | String | ID –∞–∫–∫–∞—É–Ω—Ç–∞ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | NOT NULL |
| refresh_token | String? | Refresh token | NULL, TEXT |
| access_token | String? | Access token | NULL, TEXT |
| expires_at | Int? | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ | NULL |
| token_type | String? | –¢–∏–ø —Ç–æ–∫–µ–Ω–∞ | NULL |
| scope | String? | –û–±–ª–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ | NULL |
| id_token | String? | ID token | NULL, TEXT |
| session_state | String? | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ | NULL |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `userId` (INDEX)
- `[provider, providerAccountId]` (UNIQUE)

**–°–≤—è–∑–∏:**
- `user` ‚Üí User (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è provider + providerAccountId –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç—ã

---

### 3.3. Session (–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Auth.js, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è JWT)

**–¢–∞–±–ª–∏—Ü–∞:** `sessions`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| sessionToken | String | –¢–æ–∫–µ–Ω —Å–µ—Å—Å–∏–∏ | UNIQUE, NOT NULL |
| userId | String | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | FK ‚Üí User.id, NOT NULL |
| expires | DateTime | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ | NOT NULL |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `sessionToken` (UNIQUE)
- `userId` (INDEX)
- `expires` (INDEX –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π)

**–°–≤—è–∑–∏:**
- `user` ‚Üí User (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –°–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞—é—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ–≥–æ —Å–µ—Å—Å–∏–∏
- –î–ª—è JWT —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π (—Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ cookies)

---

### 3.4. VerificationToken (–¢–æ–∫–µ–Ω—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email –∏ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è (Auth.js)

**–¢–∞–±–ª–∏—Ü–∞:** `verification_tokens`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| identifier | String | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (email) | NOT NULL, —á–∞—Å—Ç—å PK |
| token | String | –¢–æ–∫–µ–Ω –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ | UNIQUE, NOT NULL |
| expires | DateTime | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ | NOT NULL |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[identifier, token]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á)
- `expires` (INDEX –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –¢–æ–∫–µ–Ω—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª–µ–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ (cron job)

---

### 3.5. Grade (–ì—Ä—É–ø–ø—ã/–∫–ª–∞—Å—Å—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥—Ä—É–ø–ø–∞—Ö –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–π —à–∫–æ–ª—ã

**–¢–∞–±–ª–∏—Ü–∞:** `grades`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| name | String | –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã | NOT NULL, min 2 chars |
| description | String? | –û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã | NULL, TEXT |
| minAge | Int? | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç | NULL, 0-18 |
| maxAge | Int? | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç | NULL, 0-18 |
| active | Boolean | –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –≥—Ä—É–ø–ø–∞ | DEFAULT true |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `name` (INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞)
- `active` (INDEX)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `userGrades` ‚Üí UserGrade[] (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º —á–µ—Ä–µ–∑ UserGrade, SET NULL)
- `academicYears` ‚Üí AcademicYear[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `pupils` ‚Üí Pupil[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, SET NULL)
- `gradeEvents` ‚Üí GradeEvent[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `gradeSettings` ‚Üí GradeSettings (–æ–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å UNIQUE constraint)
- –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã (active = false) –æ–Ω–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä—É–ø–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è GradeSettings —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- minAge –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å <= maxAge

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –¥–ª—è Teacher/Admin
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤ –ø–æ –≥—Ä—É–ø–ø–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø—ã

---

### 3.6. UserGrade (–°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≥—Ä—É–ø–ø–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–≤—è–∑—å many-to-many –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏) –∏ –≥—Ä—É–ø–ø–∞–º–∏

**–¢–∞–±–ª–∏—Ü–∞:** `user_grades`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| userId | String | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | FK ‚Üí User.id, NOT NULL |
| gradeId | String | ID –≥—Ä—É–ø–ø—ã | FK ‚Üí Grade.id, NOT NULL |
| assignedAt | DateTime | –î–∞—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è | NOT NULL, DEFAULT now() |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[userId, gradeId]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á)
- `userId` (INDEX)
- `gradeId` (INDEX)

**–°–≤—è–∑–∏:**
- `user` ‚Üí User (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `grade` ‚Üí Grade (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–∏–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø
- –û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è userId + gradeId –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≥—Ä—É–ø–ø—ã —É–¥–∞–ª—è–µ—Ç—Å—è —Å–≤—è–∑—å

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫–∞–∫–∏–µ –≥—Ä—É–ø–ø—ã –≤–∏–¥–∏—Ç Teacher
- –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –≥—Ä—É–ø–ø–µ

---

### 3.7. AcademicYear (–£—á–µ–±–Ω—ã–µ –≥–æ–¥—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—á–µ–±–Ω—ã—Ö –≥–æ–¥–∞—Ö –¥–ª—è –≥—Ä—É–ø–ø

**–¢–∞–±–ª–∏—Ü–∞:** `academic_years`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| gradeId | String | ID –≥—Ä—É–ø–ø—ã | FK ‚Üí Grade.id, NOT NULL |
| name | String | –ù–∞–∑–≤–∞–Ω–∏–µ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ | NOT NULL (e.g., "2024-2025") |
| startDate | Date | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ | NOT NULL |
| endDate | Date | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ | NOT NULL |
| status | Enum AcademicYearStatus | –°—Ç–∞—Ç—É—Å —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ | NOT NULL, DEFAULT 'ACTIVE' |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**Enum AcademicYearStatus:**
- `ACTIVE` - –ê–∫—Ç–∏–≤–Ω—ã–π (—Ç–µ–∫—É—â–∏–π —É—á–µ–±–Ω—ã–π –≥–æ–¥)
- `COMPLETED` - –ó–∞–≤–µ—Ä—à–µ–Ω
- `PLANNED` - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω (Post-MVP)

**–ò–Ω–¥–µ–∫—Å—ã:**
- `gradeId` (INDEX)
- `status` (INDEX)
- `[gradeId, status]` (—Å–æ—Å—Ç–∞–≤–Ω–æ–π INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ–¥–æ–≤ –≥—Ä—É–ø–ø—ã)
- `startDate` (INDEX)
- `endDate` (INDEX)

**–°–≤—è–∑–∏:**
- `grade` ‚Üí Grade (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `lessons` ‚Üí Lesson[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- endDate –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > startDate
- **–î–ª—è –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω ACTIVE —É—á–µ–±–Ω—ã–π –≥–æ–¥**
- **–£—Ä–æ–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ –≥–æ–¥–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º ACTIVE**
- **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Ä–æ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –≥–æ–¥ –≥—Ä—É–ø–ø—ã**
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ (status = COMPLETED) —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π ACTIVE –≥–æ–¥
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ—ë —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–ø–∏—Å–æ–∫ —É—á–µ–±–Ω—ã—Ö –≥–æ–¥–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≥—Ä—É–ø–ø—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤ –ø–æ —É—á–µ–±–Ω–æ–º—É –≥–æ–¥—É
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã

---

### 3.8. Lesson (–£—Ä–æ–∫–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ä–æ–∫–∞—Ö

**–¢–∞–±–ª–∏—Ü–∞:** `lessons`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| academicYearId | String | ID —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ | FK ‚Üí AcademicYear.id, NOT NULL |
| title | String | –¢–µ–º–∞/–Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ | NOT NULL, min 3 chars |
| content | Text? | –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞ (BlockNote JSON) | NULL, TEXT |
| lessonDate | Date | –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —É—Ä–æ–∫–∞ | NOT NULL |
| order | Int | –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —É—Ä–æ–∫–∞ | NOT NULL, DEFAULT 0 |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `academicYearId` (INDEX)
- `lessonDate` (INDEX)
- `[academicYearId, lessonDate]` (—Å–æ—Å—Ç–∞–≤–Ω–æ–π INDEX –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)
- `[academicYearId, order]` (—Å–æ—Å—Ç–∞–≤–Ω–æ–π INDEX –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É)

**–°–≤—è–∑–∏:**
- `academicYear` ‚Üí AcademicYear (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `lessonGoldenVerses` ‚Üí LessonGoldenVerse[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `homeworkChecks` ‚Üí HomeworkCheck[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –£—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —É—á–µ–±–Ω–æ–º—É –≥–æ–¥—É
- **–£—Ä–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ–≥–æ (ACTIVE) –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ –≥–æ–¥–∞ –≥—Ä—É–ø–ø—ã**
- **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Ä–æ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –≥–æ–¥ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ**
- **–ï—Å–ª–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞, —Å–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ**
- lessonDate –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö [startDate, endDate] —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞
- –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (order) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —É—Ä–æ–∫–æ–≤
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ–≥–æ —É—Ä–æ–∫–∏
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ BlockNote JSON

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ –∑–∞ —É—á–µ–±–Ω—ã–π –≥–æ–¥
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ —É—Ä–æ–∫–æ–≤

---

### 3.9. GoldenVerse (–ó–æ–ª–æ—Ç—ã–µ —Å—Ç–∏—Ö–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–æ–ª–æ—Ç—ã—Ö —Å—Ç–∏—Ö–æ–≤ –∏–∑ –ë–∏–±–ª–∏–∏

**–¢–∞–±–ª–∏—Ü–∞:** `golden_verses`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| book | String | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –ë–∏–±–ª–∏–∏ | NOT NULL (e.g., "–ë—ã—Ç–∏–µ", "–ò–æ–∞–Ω–Ω") |
| chapter | Int | –ù–æ–º–µ—Ä –≥–ª–∞–≤—ã | NOT NULL, 1-150 |
| verse | Int | –ù–æ–º–µ—Ä —Å—Ç–∏—Ö–∞ | NOT NULL, 1-200 |
| text | Text | –¢–µ–∫—Å—Ç —Å—Ç–∏—Ö–∞ | NOT NULL, TEXT |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[book, chapter, verse]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á)
- `book` (INDEX –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `lessonGoldenVerses` ‚Üí LessonGoldenVerse[] (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º —á–µ—Ä–µ–∑ LessonGoldenVerse, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è book + chapter + verse –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –¢–µ–∫—Å—Ç —Å—Ç–∏—Ö–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç–∏—Ö–∞ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∏ —Å —É—Ä–æ–∫–∞–º–∏

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–æ–ª–æ—Ç—ã—Ö —Å—Ç–∏—Ö–æ–≤
- –í—ã–±–æ—Ä —Å—Ç–∏—Ö–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Ä–æ–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∏—Ö–æ–≤
- –ü–æ–∏—Å–∫ —Å—Ç–∏—Ö–æ–≤ –ø–æ –∫–Ω–∏–≥–µ/–≥–ª–∞–≤–µ/—Å—Ç–∏—Ö—É

---

### 3.10. LessonGoldenVerse (–°–≤—è–∑—å —É—Ä–æ–∫-—Å—Ç–∏—Ö)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–≤—è–∑—å many-to-many –º–µ–∂–¥—É —É—Ä–æ–∫–∞–º–∏ –∏ –∑–æ–ª–æ—Ç—ã–º–∏ —Å—Ç–∏—Ö–∞–º–∏

**–¢–∞–±–ª–∏—Ü–∞:** `lesson_golden_verses`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| lessonId | String | ID —É—Ä–æ–∫–∞ | FK ‚Üí Lesson.id, NOT NULL |
| goldenVerseId | String | ID –∑–æ–ª–æ—Ç–æ–≥–æ —Å—Ç–∏—Ö–∞ | FK ‚Üí GoldenVerse.id, NOT NULL |
| order | Int | –ü–æ—Ä—è–¥–æ–∫ —Å—Ç–∏—Ö–∞ –≤ —É—Ä–æ–∫–µ (1, 2, 3) | NOT NULL, 1-3 |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[lessonId, order]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á - –æ–¥–∏–Ω —É—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–≤–∞ —Å—Ç–∏—Ö–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º)
- `lessonId` (INDEX)
- `goldenVerseId` (INDEX)

**–°–≤—è–∑–∏:**
- `lesson` ‚Üí Lesson (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `goldenVerse` ‚Üí GoldenVerse (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–∏–Ω —É—Ä–æ–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–æ 3 –∑–æ–ª–æ—Ç—ã—Ö —Å—Ç–∏—Ö–æ–≤ (–µ—Å–ª–∏ showGoldenVerses = true –≤ GradeSettings)
- –ü–æ—Ä—è–¥–æ–∫ —Å—Ç–∏—Ö–∞ (order) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1, 2 –∏–ª–∏ 3
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è lessonId + order –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –û–¥–∏–Ω —Å—Ç–∏—Ö –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–∫–∞—Ö
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ –∏–ª–∏ —Å—Ç–∏—Ö–∞ —É–¥–∞–ª—è–µ—Ç—Å—è —Å–≤—è–∑—å

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–æ–ª–æ—Ç—ã—Ö —Å—Ç–∏—Ö–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Ä–æ–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π (goldenVerse1, goldenVerse2, goldenVerse3)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∏—Ö–æ–≤

---

### 3.11. Pupil (–£—á–µ–Ω–∏–∫–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—á–µ–Ω–∏–∫–∞—Ö –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–π —à–∫–æ–ª—ã

**–¢–∞–±–ª–∏—Ü–∞:** `pupils`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| gradeId | String? | ID –≥—Ä—É–ø–ø—ã | FK ‚Üí Grade.id, NULL (—É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–µ–∑ –≥—Ä—É–ø–ø—ã) |
| firstName | String | –ò–º—è | NOT NULL, min 2 chars |
| lastName | String | –§–∞–º–∏–ª–∏—è | NOT NULL, min 2 chars |
| middleName | String? | –û—Ç—á–µ—Å—Ç–≤–æ | NULL |
| dateOfBirth | Date? | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è | NULL |
| photo | String? | URL —Ñ–æ—Ç–æ (Supabase Storage) | NULL |
| active | Boolean | –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —É—á–µ–Ω–∏–∫ | DEFAULT true |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `gradeId` (INDEX)
- `active` (INDEX)
- `[gradeId, active]` (—Å–æ—Å—Ç–∞–≤–Ω–æ–π INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã)
- `lastName` (INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `grade` ‚Üí Grade (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, SET NULL)
- `homeworkChecks` ‚Üí HomeworkCheck[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `pupilAchievements` ‚Üí PupilAchievement[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)
- `familyMembers` ‚Üí FamilyMember[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –£—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–µ–∑ –≥—Ä—É–ø–ø—ã (gradeId = NULL) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–∞ (active = false) –æ–Ω —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã gradeId —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ NULL (–Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è —É—á–µ–Ω–∏–∫)
- –§–ò–û –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –õ–∏—á–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É—á–µ–Ω–∏–∫–∞
- –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã
- –†–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞–º–∏ (Admin)

---

### 3.12. HomeworkCheck (–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —É—Ä–æ–∫—É

**–¢–∞–±–ª–∏—Ü–∞:** `homework_checks`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| lessonId | String | ID —É—Ä–æ–∫–∞ | FK ‚Üí Lesson.id, NOT NULL |
| pupilId | String | ID —É—á–µ–Ω–∏–∫–∞ | FK ‚Üí Pupil.id, NOT NULL |
| isPresent | Boolean | –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ª–∏ –Ω–∞ —É—Ä–æ–∫–µ | DEFAULT false |
| goldenVerse1 | Boolean | –í—ã—É—á–∏–ª –ø–µ—Ä–≤—ã–π —Å—Ç–∏—Ö | DEFAULT false |
| goldenVerse1Score | Int? | –û—Ü–µ–Ω–∫–∞ –∑–∞ –ø–µ—Ä–≤—ã–π —Å—Ç–∏—Ö (0-2) | NULL, 0-2 |
| goldenVerse2 | Boolean | –í—ã—É—á–∏–ª –≤—Ç–æ—Ä–æ–π —Å—Ç–∏—Ö | DEFAULT false |
| goldenVerse2Score | Int? | –û—Ü–µ–Ω–∫–∞ –∑–∞ –≤—Ç–æ—Ä–æ–π —Å—Ç–∏—Ö (0-2) | NULL, 0-2 |
| goldenVerse3 | Boolean | –í—ã—É—á–∏–ª —Ç—Ä–µ—Ç–∏–π —Å—Ç–∏—Ö | DEFAULT false |
| goldenVerse3Score | Int? | –û—Ü–µ–Ω–∫–∞ –∑–∞ —Ç—Ä–µ—Ç–∏–π —Å—Ç–∏—Ö (0-2) | NULL, 0-2 |
| test | Boolean | –°–¥–∞–ª —Ç–µ—Å—Ç | DEFAULT false |
| testScore | Int? | –û—Ü–µ–Ω–∫–∞ –∑–∞ —Ç–µ—Å—Ç (0-5) | NULL, 0-5 |
| notebook | Boolean | –°–¥–∞–ª —Ç–µ—Ç—Ä–∞–¥—å | DEFAULT false |
| notebookScore | Int? | –û—Ü–µ–Ω–∫–∞ –∑–∞ —Ç–µ—Ç—Ä–∞–¥—å (0-5) | NULL, 0-5 |
| singing | Boolean | –ü–æ—Å–µ—Ç–∏–ª —Å–ø–µ–≤–∫—É | DEFAULT false |
| points | Int | –ù–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã | DEFAULT 0, 0-1000 |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[lessonId, pupilId]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á - –æ–¥–∏–Ω —É—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–≤–µ –∑–∞–ø–∏—Å–∏ –ø–æ –æ–¥–Ω–æ–º—É —É—Ä–æ–∫—É)
- `lessonId` (INDEX)
- `pupilId` (INDEX)
- `points` (INDEX –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `lesson` ‚Üí Lesson (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `pupil` ‚Üí Pupil (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è lessonId + pupilId –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –ï—Å–ª–∏ isPresent = false, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å false
- –û—Ü–µ–Ω–∫–∏ (Score) –º–æ–≥—É—Ç –±—ã—Ç—å NULL, –µ—Å–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —á–µ–∫–±–æ–∫—Å = false
- –ë–∞–ª–ª—ã (points) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä—É–ø–ø—ã
- –ï—Å–ª–∏ showGoldenVerses = false –≤ GradeSettings, –ø–æ–ª—è goldenVerse* –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ –∏–ª–∏ —É—á–µ–Ω–∏–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å

**–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –±–∞–ª–ª–æ–≤:**
- –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ isPresent = true
- –ó–∞ –∫–∞–∂–¥—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–∞–ª–ª—ã —Å–æ–≥–ª–∞—Å–Ω–æ GradeSettings.customPoints
- –ï—Å–ª–∏ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (–≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã = true), —É—á–µ–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç "–¥–æ–º–∏–∫" (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ú–∞—Å—Å–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
- –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ —É—Ä–æ–∫—É
- –õ–∏—á–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É—á–µ–Ω–∏–∫–∞ (–∏—Å—Ç–æ—Ä–∏—è —É—Ä–æ–∫–æ–≤)
- –†–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã (—Å—É–º–º–∞ –±–∞–ª–ª–æ–≤)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–æ–ª–æ—Ç—ã–º —Å—Ç–∏—Ö–∞–º

---

### 3.13. Family (–°–µ–º—å–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–º—å—è—Ö —É—á–µ–Ω–∏–∫–æ–≤

**–¢–∞–±–ª–∏—Ü–∞:** `families`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| name | String | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏ (—Ñ–∞–º–∏–ª–∏—è) | NOT NULL, min 2 chars |
| address | String? | –ê–¥—Ä–µ—Å | NULL, TEXT |
| phone | String? | –¢–µ–ª–µ—Ñ–æ–Ω | NULL |
| email | String? | Email | NULL, valid email |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `name` (INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞)
- `phone` (INDEX, –µ—Å–ª–∏ UNIQUE –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- `email` (INDEX, –µ—Å–ª–∏ UNIQUE –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `familyMembers` ‚Üí FamilyMember[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–Ω–∞ —Å–µ–º—å—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫–æ–≤
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–µ–º—å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∏ —Å —É—á–µ–Ω–∏–∫–∞–º–∏ (FamilyMember)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å—è–º–∏ (Admin)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–µ–π —Å–µ–º—å–∏
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —É—á–µ–Ω–∏–∫–æ–≤ —Å —Å–µ–º—å—è–º–∏

---

### 3.14. FamilyMember (–°–≤—è–∑—å —Å–µ–º—å—è-—É—á–µ–Ω–∏–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–≤—è–∑—å many-to-many –º–µ–∂–¥—É —Å–µ–º—å—è–º–∏ –∏ —É—á–µ–Ω–∏–∫–∞–º–∏

**–¢–∞–±–ª–∏—Ü–∞:** `family_members`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| familyId | String | ID —Å–µ–º—å–∏ | FK ‚Üí Family.id, NOT NULL |
| pupilId | String | ID —É—á–µ–Ω–∏–∫–∞ | FK ‚Üí Pupil.id, NOT NULL |
| relationship | String | –†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å | NOT NULL (e.g., "—Å—ã–Ω", "–¥–æ—á—å", "–±—Ä–∞—Ç") |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[familyId, pupilId]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á)
- `familyId` (INDEX)
- `pupilId` (INDEX)

**–°–≤—è–∑–∏:**
- `family` ‚Üí Family (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `pupil` ‚Üí Pupil (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–∏–Ω —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π —Å–µ–º—å–µ
- –û–¥–Ω–∞ —Å–µ–º—å—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫–æ–≤
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è familyId + pupilId –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–µ–º—å–∏ –∏–ª–∏ —É—á–µ–Ω–∏–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è —Å–≤—è–∑—å

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–µ–π —Å–µ–º—å–∏
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —É—á–µ–Ω–∏–∫–æ–≤ —Å —Å–µ–º—å—è–º–∏
- –ü–æ–∏—Å–∫ —Å–µ–º—å–∏ –ø–æ —É—á–µ–Ω–∏–∫—É

---

### 3.15. Achievement (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è/Badges)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (badges)

**–¢–∞–±–ª–∏—Ü–∞:** `achievements`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| name | String | –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | NOT NULL, min 3 chars |
| description | String? | –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | NULL, TEXT |
| icon | String? | –ò–∫–æ–Ω–∫–∞/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ badge | NULL (URL –∏–ª–∏ emoji) |
| type | String | –¢–∏–ø –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | NOT NULL (e.g., "points", "attendance", "verses") |
| criteria | Json | –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è (JSON) | NOT NULL (e.g., {"minPoints": 100, "minLessons": 10}) |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `type` (INDEX)
- `name` (INDEX –¥–ª—è –ø–æ–∏—Å–∫–∞)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `pupilAchievements` ‚Üí PupilAchievement[] (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (–±–∞–ª–ª—ã, –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å, —Å—Ç–∏—Ö–∏)
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–∏—Å—Ç–µ–º–∞ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ badges –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É—á–µ–Ω–∏–∫–∞

---

### 3.16. PupilAchievement (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–∞—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏

**–¢–∞–±–ª–∏—Ü–∞:** `pupil_achievements`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| pupilId | String | ID —É—á–µ–Ω–∏–∫–∞ | FK ‚Üí Pupil.id, NOT NULL |
| achievementId | String | ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | FK ‚Üí Achievement.id, NOT NULL |
| awardedAt | DateTime | –î–∞—Ç–∞ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è | NOT NULL, DEFAULT now() |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `[pupilId, achievementId]` (UNIQUE, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á - –æ–¥–∏–Ω —É—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã)
- `pupilId` (INDEX)
- `achievementId` (INDEX)
- `awardedAt` (INDEX –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)

**–°–≤—è–∑–∏:**
- `pupil` ‚Üí Pupil (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)
- `achievement` ‚Üí Achievement (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–∏–Ω —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è pupilId + achievementId –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—á–µ–Ω–∏–∫–∞ –∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É—á–µ–Ω–∏–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º

---

### 3.17. GradeEvent (–°–æ–±—ã—Ç–∏—è –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –≥—Ä—É–ø–ø—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –≥—Ä—É–ø–ø—ã (—É—Ä–æ–∫–∏, –≤—ã–µ–∑–¥–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –æ—Ç–º–µ–Ω—ã)

**–¢–∞–±–ª–∏—Ü–∞:** `grade_events`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| gradeId | String | ID –≥—Ä—É–ø–ø—ã | FK ‚Üí Grade.id, NOT NULL |
| type | Enum GradeEventType | –¢–∏–ø —Å–æ–±—ã—Ç–∏—è | NOT NULL |
| title | String | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è | NOT NULL, min 3 chars |
| description | Text? | –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è | NULL, TEXT |
| eventDate | Date | –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è | NOT NULL |
| startTime | Time? | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ | NULL |
| endTime | Time? | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è | NULL |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**Enum GradeEventType:**
- `LESSON` - –û–±—ã—á–Ω—ã–π —É—Ä–æ–∫ (üîµ –°–∏–Ω–∏–π)
- `OUTDOOR_EVENT` - –í—ã–µ–∑–¥–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (üü¢ –ó–µ–ª–µ–Ω—ã–π)
- `LESSON_SKIPPING` - –û—Ç–º–µ–Ω–∞ —É—Ä–æ–∫–∞ (üî¥ –ö—Ä–∞—Å–Ω—ã–π)

**–ò–Ω–¥–µ–∫—Å—ã:**
- `gradeId` (INDEX)
- `eventDate` (INDEX)
- `type` (INDEX)
- `[gradeId, eventDate]` (—Å–æ—Å—Ç–∞–≤–Ω–æ–π INDEX –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `grade` ‚Üí Grade (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- endTime –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > startTime (–µ—Å–ª–∏ –æ–±–∞ —É–∫–∞–∑–∞–Ω—ã)
- –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –≥—Ä—É–ø–ø—ã
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ—ë —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø—É

---

### 3.18. GradeSettings (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã

**–¢–∞–±–ª–∏—Ü–∞:** `grade_settings`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| id | String (CUID) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | PK, Auto-generated |
| gradeId | String | ID –≥—Ä—É–ø–ø—ã | FK ‚Üí Grade.id, UNIQUE, NOT NULL |
| showGoldenVerses | Boolean | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "–ó–æ–ª–æ—Ç—ã–µ —Å—Ç–∏—Ö–∏" | DEFAULT true |
| showTest | Boolean | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "–¢–µ—Å—Ç" | DEFAULT true |
| showNotebook | Boolean | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "–¢–µ—Ç—Ä–∞–¥—å" | DEFAULT true |
| showSinging | Boolean | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "–°–ø–µ–≤–∫–∞" | DEFAULT true |
| goldenVersesLabel | String? | –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç–∫–∞ –¥–ª—è "–ó–æ–ª–æ—Ç—ã–µ —Å—Ç–∏—Ö–∏" | NULL (e.g., "–°—Ç–∏—Ö–∏ –Ω–∞–∏–∑—É—Å—Ç—å") |
| testLabel | String? | –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç–∫–∞ –¥–ª—è "–¢–µ—Å—Ç" | NULL |
| notebookLabel | String? | –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç–∫–∞ –¥–ª—è "–¢–µ—Ç—Ä–∞–¥—å" | NULL |
| singingLabel | String? | –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç–∫–∞ –¥–ª—è "–°–ø–µ–≤–∫–∞" | NULL |
| customPoints | Json? | –ö–∞—Å—Ç–æ–º–Ω—ã–µ –±–∞–ª–ª—ã –∑–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | NULL (e.g., {"goldenVerse": 5, "test": 10}) |
| createdAt | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | Auto-generated |
| updatedAt | DateTime | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Auto-updated |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `gradeId` (UNIQUE)
- `createdAt` (INDEX)

**–°–≤—è–∑–∏:**
- `grade` ‚Üí Grade (–æ–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É, CASCADE DELETE)

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–Ω—É –∑–∞–ø–∏—Å—å GradeSettings
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä—É–ø–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è GradeSettings —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –ï—Å–ª–∏ showGoldenVerses = false, –≤ —É—Ä–æ–∫–∞—Ö –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –∑–æ–ª–æ—Ç—ã–µ —Å—Ç–∏—Ö–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≥—Ä—É–ø–ø—ã
- customPoints —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø—ã (Admin)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –î–ó
- –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ customPoints

---

## 4. –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 4.1. Primary Keys

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **CUID** (Collision-resistant Unique Identifier) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞:
- –§–æ—Ä–º–∞—Ç: `clxxx...` (25 —Å–∏–º–≤–æ–ª–æ–≤)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Prisma
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞

### 4.2. Foreign Keys –∏ –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

| –¢–∞–±–ª–∏—Ü–∞ | Foreign Key | –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ | –ö–∞—Å–∫–∞–¥–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è |
|---------|------------|--------------|-------------------|
| Account | userId | User.id | CASCADE DELETE |
| Session | userId | User.id | CASCADE DELETE |
| UserGrade | userId | User.id | CASCADE DELETE |
| UserGrade | gradeId | Grade.id | CASCADE DELETE |
| AcademicYear | gradeId | Grade.id | CASCADE DELETE |
| Pupil | gradeId | Grade.id | SET NULL |
| GradeEvent | gradeId | Grade.id | CASCADE DELETE |
| GradeSettings | gradeId | Grade.id | CASCADE DELETE |
| Lesson | academicYearId | AcademicYear.id | CASCADE DELETE |
| LessonGoldenVerse | lessonId | Lesson.id | CASCADE DELETE |
| LessonGoldenVerse | goldenVerseId | GoldenVerse.id | CASCADE DELETE |
| HomeworkCheck | lessonId | Lesson.id | CASCADE DELETE |
| HomeworkCheck | pupilId | Pupil.id | CASCADE DELETE |
| FamilyMember | familyId | Family.id | CASCADE DELETE |
| FamilyMember | pupilId | Pupil.id | CASCADE DELETE |
| PupilAchievement | pupilId | Pupil.id | CASCADE DELETE |
| PupilAchievement | achievementId | Achievement.id | CASCADE DELETE |

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**
- **CASCADE DELETE:** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –î–ó)
- **SET NULL:** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–ø–∏—Å–∏ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ NULL (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã gradeId —É —É—á–µ–Ω–∏–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è NULL)

### 4.3. Unique Constraints

| –¢–∞–±–ª–∏—Ü–∞ | –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------------------|----------|
| User | email | Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º |
| Account | [provider, providerAccountId] | –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ ID –∞–∫–∫–∞—É–Ω—Ç–∞ |
| Session | sessionToken | –¢–æ–∫–µ–Ω —Å–µ—Å—Å–∏–∏ —É–Ω–∏–∫–∞–ª–µ–Ω |
| VerificationToken | [identifier, token] | –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏ —Ç–æ–∫–µ–Ω–∞ |
| UserGrade | [userId, gradeId] | –û–¥–∏–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞–∂–¥—ã –Ω–∞–∑–Ω–∞—á–µ–Ω –≤ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É |
| LessonGoldenVerse | [lessonId, order] | –û–¥–∏–Ω —É—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–≤–∞ —Å—Ç–∏—Ö–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º |
| HomeworkCheck | [lessonId, pupilId] | –û–¥–∏–Ω —É—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–≤–µ –∑–∞–ø–∏—Å–∏ –ø–æ –æ–¥–Ω–æ–º—É —É—Ä–æ–∫—É |
| FamilyMember | [familyId, pupilId] | –û–¥–∏–Ω —É—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞–∂–¥—ã –≤ –æ–¥–Ω–æ–π —Å–µ–º—å–µ |
| PupilAchievement | [pupilId, achievementId] | –û–¥–∏–Ω —É—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã |
| GradeSettings | gradeId | –û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| GoldenVerse | [book, chapter, verse] | –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–Ω–∏–≥–∏, –≥–ª–∞–≤—ã –∏ —Å—Ç–∏—Ö–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞ |

### 4.4. –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**

1. **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
   - `User.email` (UNIQUE) - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `Grade.name` - –ø–æ–∏—Å–∫ –≥—Ä—É–ø–ø—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
   - `Pupil.lastName` - –ø–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–∞ –ø–æ —Ñ–∞–º–∏–ª–∏–∏
   - `GoldenVerse.book` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∏—Ö–æ–≤ –ø–æ –∫–Ω–∏–≥–µ

2. **–°–≤—è–∑–∏ –∏ JOIN –æ–ø–µ—Ä–∞—Ü–∏–∏:**
   - `UserGrade.userId` –∏ `UserGrade.gradeId` - –±—ã—Å—Ç—Ä—ã–µ JOIN –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
   - `Lesson.academicYearId` - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —É—Ä–æ–∫–∞–º —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞
   - `HomeworkCheck.lessonId` –∏ `HomeworkCheck.pupilId` - –±—ã—Å—Ç—Ä—ã–µ JOIN –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –î–ó

3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥:**
   - `HomeworkCheck.points` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –±–∞–ª–ª–∞–º –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
   - `Lesson.lessonDate` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —É—Ä–æ–∫–æ–≤ –ø–æ –¥–∞—Ç–µ
   - `PupilAchievement.awardedAt` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –¥–∞—Ç–µ

4. **–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
   - `[gradeId, status]` –≤ AcademicYear - –ø–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –≥–æ–¥–æ–≤ –≥—Ä—É–ø–ø—ã
   - `[academicYearId, lessonDate]` –≤ Lesson - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —É—Ä–æ–∫–æ–≤
   - `[gradeId, active]` –≤ Pupil - –ø–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã
   - `[gradeId, eventDate]` –≤ GradeEvent - –∫–∞–ª–µ–Ω–¥–∞—Ä—å –≥—Ä—É–ø–ø—ã

5. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
   - `Session.expires` - –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
   - `VerificationToken.expires` - –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

---

## 5. Enum —Ç–∏–ø—ã

### 5.1. UserRole

**–¢–∞–±–ª–∏—Ü–∞:** `users`

```typescript
enum UserRole {
  TEACHER      // –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
  ADMIN        // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  SUPERADMIN   // –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  PARENT       // –†–æ–¥–∏—Ç–µ–ª—å (Post-MVP)
  PUPIL        // –£—á–µ–Ω–∏–∫ (Post-MVP)
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤ proxy.ts
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–ª–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### 5.2. AcademicYearStatus

**–¢–∞–±–ª–∏—Ü–∞:** `academic_years`

```typescript
enum AcademicYearStatus {
  ACTIVE     // –ê–∫—Ç–∏–≤–Ω—ã–π (—Ç–µ–∫—É—â–∏–π —É—á–µ–±–Ω—ã–π –≥–æ–¥)
  COMPLETED  // –ó–∞–≤–µ—Ä—à–µ–Ω
  PLANNED    // –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω (Post-MVP)
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –≥–æ–¥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–æ–¥–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ

### 5.3. GradeEventType

**–¢–∞–±–ª–∏—Ü–∞:** `grade_events`

```typescript
enum GradeEventType {
  LESSON          // –û–±—ã—á–Ω—ã–π —É—Ä–æ–∫ (üîµ –°–∏–Ω–∏–π)
  OUTDOOR_EVENT   // –í—ã–µ–∑–¥–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (üü¢ –ó–µ–ª–µ–Ω—ã–π)
  LESSON_SKIPPING // –û—Ç–º–µ–Ω–∞ —É—Ä–æ–∫–∞ (üî¥ –ö—Ä–∞—Å–Ω—ã–π)
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ (—Ü–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø—É
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è

---

## 6. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 6.1. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Post-MVP)

1. **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:**
   - `homework_checks` - –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `lessonDate` (–ø–æ –º–µ—Å—è—Ü–∞–º/–≥–æ–¥–∞–º)
   - `lessons` - –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `academicYearId`
   - `sessions` - –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `expires` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞)

2. **Read Replicas:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ read replicas Supabase –¥–ª—è read-heavy –æ–ø–µ—Ä–∞—Ü–∏–π
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ read/write –æ–ø–µ—Ä–∞—Ü–∏–π

3. **–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤):**
   - –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `gradeId` –¥–ª—è —Ç–∞–±–ª–∏—Ü, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≥—Ä—É–ø–ø–∞–º–∏
   - –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `userId` –¥–ª—è —Ç–∞–±–ª–∏—Ü, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `EXPLAIN ANALYZE`
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è JOIN –æ–ø–µ—Ä–∞—Ü–∏–π

2. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ 3NF –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
   - –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 6.2. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### Server-Side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Next.js)

1. **Server Components –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Server Components –≤ Next.js
   - Revalidation —á–µ—Ä–µ–∑ `revalidate` –ø–∞—Ä–∞–º–µ—Ç—Ä
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø, —Å—Ç–∏—Ö–æ–≤)

2. **Data Cache (Post-MVP):**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Redis)
   - TTL –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:
     - –°–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø: 1 —á–∞—Å
     - –°–ø–∏—Å–∫–∏ —É—Ä–æ–∫–æ–≤: 30 –º–∏–Ω—É—Ç
     - –î–∞–Ω–Ω—ã–µ —É—á–µ–Ω–∏–∫–∞: 15 –º–∏–Ω—É—Ç
     - –†–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã: 5 –º–∏–Ω—É—Ç

3. **Request Memoization:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cache()` —Ñ—É–Ω–∫—Ü–∏–∏ React –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞

#### Client-Side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **React Query (Post-MVP, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è):**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –º—É—Ç–∞—Ü–∏—è—Ö
   - Optimistic updates

2. **Browser Cache:**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å—Ç–∏–ª–∏)
   - Service Worker –¥–ª—è offline –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (Post-MVP)

### 6.3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

#### –ß–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ –≥—Ä—É–ø–ø—ã:**
   ```sql
   -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å [academicYearId, lessonDate]
   SELECT * FROM lessons 
   WHERE academicYearId = ? 
   ORDER BY lessonDate DESC;
   ```

2. **–†–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã:**
   ```sql
   -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å points –∏ [lessonId, pupilId]
   SELECT pupilId, SUM(points) as totalPoints
   FROM homework_checks
   WHERE lessonId IN (SELECT id FROM lessons WHERE academicYearId = ?)
   GROUP BY pupilId
   ORDER BY totalPoints DESC;
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –î–ó –¥–ª—è —É—Ä–æ–∫–∞:**
   ```sql
   -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å [lessonId, pupilId]
   SELECT * FROM homework_checks
   WHERE lessonId = ?
   ORDER BY pupilId;
   ```

#### Batch –æ–ø–µ—Ä–∞—Ü–∏–∏

1. **–ú–∞—Å—Å–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –î–ó:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `prisma.$transaction()` –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏
   - Batch insert/update –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∏—Ö–∞–º:**
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (SUM, COUNT, AVG)
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 6.4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
   - –†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü

2. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
   - Supabase Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - Prisma Studio –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - PostgreSQL EXPLAIN ANALYZE –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## 7. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 7.1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Prisma:**
   ```bash
   npx prisma migrate dev --name migration_name
   npx prisma migrate deploy  # –¥–ª—è production
   ```

2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã:**
   - –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `prisma/migrations/`
   - –ö–∞–∂–¥–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –∏ timestamp
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

3. **Seed –¥–∞–Ω–Ω—ã–µ:**
   - –°–∫—Ä–∏–ø—Ç `prisma/seed.ts` –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ó–∞–ø—É—Å–∫: `npx prisma db seed`

### 7.2. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π:**
   - –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å nullable –∏–ª–∏ –∏–º–µ—Ç—å DEFAULT –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

2. **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π:**
   - –°–Ω–∞—á–∞–ª–∞ –ø–æ–º–µ—Ç–∏—Ç—å –ø–æ–ª–µ –∫–∞–∫ deprecated
   - –£–¥–∞–ª–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ
   - –ó–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å –∏–∑ —Å—Ö–µ–º—ã —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏—é

3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤:**
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ —Å –Ω–æ–≤—ã–º —Ç–∏–ø–æ–º
   - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∫–æ–ª–æ–Ω–∫–∏

---

## 8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### 8.1. –ó–∞—â–∏—Ç–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

1. **–ü–∞—Ä–æ–ª–∏:**
   - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ bcrypt (10 rounds)
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è (min 8 —Å–∏–º–≤–æ–ª–æ–≤)

2. **–¢–æ–∫–µ–Ω—ã:**
   - JWT —Ç–æ–∫–µ–Ω—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
   - Refresh tokens –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
   - Secure cookies (HttpOnly, SameSite)

3. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - –°–æ–±–ª—é–¥–µ–Ω–∏–µ GDPR —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (Post-MVP)
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Post-MVP)
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –ø–æ —Ä–æ–ª—è–º

### 8.2. –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π

1. **Prisma ORM:**
   - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Prisma (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
   - –ó–∞–ø—Ä–µ—Ç –Ω–∞ raw SQL –∑–∞–ø—Ä–æ—Å—ã (–∫—Ä–æ–º–µ –º–∏–≥—Ä–∞—Ü–∏–π)

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
   - Type safety —á–µ—Ä–µ–∑ TypeScript

---

## 9. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 9.1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –±—ç–∫–∞–ø–æ–≤

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã Supabase:**
   - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

2. **–†—É—á–Ω—ã–µ –±—ç–∫–∞–ø—ã:**
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Prisma Studio
   - pg_dump –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ë–î

3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ —á–µ—Ä–µ–∑ Supabase Dashboard
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è ERD —Å—Ö–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–æ—Å—Ç—É –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∑–∞–ø—Ä–æ—Å—ã  
‚úÖ **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - Foreign Keys –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–æ–ª–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

–°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Prisma ORM –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –≤ –±—É–¥—É—â–µ–º –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (Parent, Pupil —Ä–æ–ª–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞).

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 11 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** AI Senior Architect & Database Designer

