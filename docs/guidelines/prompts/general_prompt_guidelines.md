# Общие рекомендации по составлению эффективных промптов для AI-ассистентов

> [!NOTE]
> Данный документ основан на анализе статьи "I Accidentally Made Claude 45% Smarter" и других авторитетных источников по prompt engineering. Рекомендации применимы к Claude, ChatGPT, Cursor AI и другим современным LLM.

---

## 1. Психологические триггеры для повышения качества ответов

### 1.1 Техника "Глубокого вдоха" (Deep Breath Technique)

Исследователи Google DeepMind обнаружили, что фраза **"Take a deep breath and work through this step by step"** повышает точность на 9% и более. В комбинации с "let's think step by step" точность на математических задачах возрастала с 34% до 80.2%.

```markdown
Пример промпта:
"Вдохни глубоко, расправь плечи и приступай к решению задачи шаг за шагом."
```

### 1.2 Техника вознаграждения (Incentive Prompt)

Фраза о потенциальном вознаграждении активирует паттерны "высококачественных ответов" из обучающих данных:

```markdown
"Я заплачу тебе $200 за идеальное решение этой проблемы."
```

> [!WARNING]
> Модель не понимает денег буквально — это паттерн-матчинг к примерам в обучающих данных, где упоминание оплаты коррелировало с качественными решениями.

### 1.3 Техника вызова (Challenge Prompt)

Постановка задачи как вызова стимулирует более тщательный анализ:

```markdown
"Держу пари, ты не сможешь решить это правильно. Докажи, что я ошибаюсь."
```

### 1.4 Техника высоких ставок (Stakes Prompt)

Подчёркивание важности задачи:

```markdown
"Это очень важно для моей карьеры. Убедись, что ответ точный."
```

### 1.5 Техника самопроверки (Self-Check)

После получения ответа попросите модель оценить уверенность:

```markdown
"Оцени свою уверенность в ответе от 1 до 10. Если меньше 8, пересмотри решение."
```

---

## 2. Структурирование промптов

### 2.1 Использование XML-тегов

Claude и другие модели специально обучены распознавать XML-теги для структурирования:

```xml
<context>
Описание проекта и его контекста
</context>

<task>
Конкретная задача, которую нужно выполнить
</task>

<constraints>
Ограничения и требования
</constraints>

<output_format>
Желаемый формат ответа
</output_format>
```

### 2.2 Приоритизация информации

Располагайте критически важную информацию:
- **В начале** — для установки контекста
- **В конце** — для акцента на ключевых инструкциях

Модели Claude уделяют особое внимание концу промпта.

### 2.3 Использование специальных маркеров

```xml
<CRITICAL>Критически важная информация</CRITICAL>
<CONSTRAINT>Обязательное ограничение</CONSTRAINT>
<thinking>Пространство для размышлений модели</thinking>
```

---

## 3. Принцип ясности и конкретности

### 3.1 Будьте максимально конкретны

| ❌ Плохо | ✅ Хорошо |
|----------|-----------|
| "Напиши функцию" | "Напиши PHP-функцию для WordPress, которая принимает ID поста, проверяет существование мета-поля 'custom_price' и возвращает отформатированную цену с валютой" |
| "Исправь баг" | "Исправь TypeError в строке 45 файла functions.php, где переменная $meta_value используется как массив, но может быть null" |

### 3.2 Указывайте контекст проекта

```markdown
Контекст:
- Версия PHP: 8.1
- Версия WordPress: 6.4
- Используемые плагины: Carbon Fields 3.6
- Стандарты кодирования: WordPress Coding Standards
```

### 3.3 Определяйте формат вывода

```markdown
Выведи результат в следующем формате:
1. Краткое описание решения (1-2 предложения)
2. Код с inline-комментариями
3. Примеры использования
4. Возможные edge-cases
```

---

## 4. Техника Chain-of-Thought (Цепочка рассуждений)

### 4.1 Явный запрос пошагового анализа

```markdown
Прежде чем писать код:
1. Проанализируй требования
2. Определи необходимые зависимости
3. Продумай структуру решения
4. Оцени потенциальные проблемы
5. Только после этого приступи к реализации
```

### 4.2 Предоставление пространства для размышлений

```xml
<thinking>
Используй этот блок для анализа задачи перед ответом
</thinking>

<answer>
Здесь предоставь финальный ответ
</answer>
```

---

## 5. Few-Shot Prompting (Обучение на примерах)

### 5.1 Предоставляйте эталонные примеры

```markdown
Вот пример правильного решения аналогичной задачи:

Вход: [пример входных данных]
Выход: [пример ожидаемого результата]

Теперь реши следующую задачу по аналогии:
Вход: [новые входные данные]
```

### 5.2 Используйте "золотые стандарты"

Ссылайтесь на эталонные файлы в проекте:

```markdown
Используй структуру и стиль кода из файла 
controllers/ExampleController.php как образец.
```

---

## 6. Назначение ролей (Persona Assignment)

### 6.1 Конкретные экспертные роли

| ❌ Общая роль | ✅ Детализированная роль |
|---------------|-------------------------|
| "Ты — программист" | "Ты — senior PHP developer с 10-летним опытом разработки WordPress тем и плагинов, специализирующийся на безопасности и производительности" |

### 6.2 Комбинация экспертиз

```markdown
Действуй как команда экспертов:
1. Backend Developer — отвечает за PHP-логику
2. Security Specialist — проверяет уязвимости
3. WordPress Expert — следит за соответствие стандартам
```

---

## 7. Итеративное уточнение

### 7.1 Диалоговый подход

```markdown
Шаг 1: "Опиши архитектуру решения без кода"
Шаг 2: "Теперь реализуй основную функцию"
Шаг 3: "Добавь обработку ошибок"
Шаг 4: "Оптимизируй производительность"
```

### 7.2 Корректировка на основе ошибок

Если модель допустила ошибку:

```markdown
В предыдущем ответе ты использовал устаревший 
метод add_meta_box(). В WordPress 6.0+ следует 
использовать register_post_meta() с REST API поддержкой.
Исправь код с учётом этого.
```

---

## 8. Позитивные формулировки

### 8.1 Инструкции "делай" вместо "не делай"

| ❌ Негативно | ✅ Позитивно |
|--------------|-------------|
| "Не используй глобальные переменные" | "Используй только локальные переменные в области видимости функции" |
| "Не забудь про валидацию" | "Добавь валидацию всех входных данных" |

---

## 9. Декомпозиция сложных задач

### 9.1 Разбивайте большие задачи

Вместо:
```markdown
"Создай полноценную тему WordPress с кастомными полями и REST API"
```

Используйте:
```markdown
"Задача 1: Создай структуру файлов темы с style.css и functions.php"
"Задача 2: Настрой подключение Carbon Fields"  
"Задача 3: Определи контейнеры полей для страницы About"
...
```

### 9.2 Prompt Chaining

Используйте результат предыдущего промпта как вход для следующего:

```markdown
Промпт 1: "Проанализируй структуру данных"
Промпт 2: "На основе анализа создай схему БД"
Промпт 3: "На основе схемы напиши миграции"
```

---

## 10. Prefilling (Предзаполнение ответа)

### 10.1 Направляйте начало ответа

```markdown
Начни свой ответ с: "Оптимальное решение включает..."
```

Это помогает избежать вступительных фраз и сразу получить суть.

### 10.2 Задавайте формат кода

```markdown
Ответь только кодом PHP без дополнительных пояснений.
Код должен начинаться с:
<?php
/**
 * @package MyTheme
```

---

## 11. Избегание типичных ошибок

### 11.1 Распространённые антипаттерны

- **Размытые цели** → Формулируйте чёткий желаемый результат
- **Отсутствие контекста** → Всегда предоставляйте релевантный фон
- **Перегрузка информацией** → Держите промпт сфокусированным
- **Смешение режимов** → Не смешивайте написание, ревью и обучение в одном промпте
- **Повторение инструкций** → Избегайте дублирования

### 11.2 Проверка промпта

Перед отправкой убедитесь, что промпт отвечает на вопросы:
1. **Что** конкретно нужно сделать?
2. **Почему** это нужно (контекст)?
3. **Как** должен выглядеть результат?
4. **Какие** ограничения существуют?

---

## 12. Метапромптинг

### 12.1 Попросите AI улучшить промпт

```markdown
Проанализируй следующий промпт и улучши его:
- Убери избыточность
- Добавь необходимую структуру
- Повысь ясность

Оригинальный промпт: [ваш промпт]
```

### 12.2 Запрос альтернативных подходов

```markdown
Предложи 3 разных подхода к решению задачи с 
указанием плюсов и минусов каждого.
```

---

## 13. Шаблон универсального промпта

```markdown
# Роль
Ты — [конкретная экспертная роль]

# Контекст
- Проект: [описание]
- Технологии: [стек]
- Ограничения: [список]

# Задача
[Конкретное описание того, что нужно сделать]

# Требования
1. [Требование 1]
2. [Требование 2]
...

# Формат вывода
[Описание желаемой структуры ответа]

# Примеры (опционально)
Вход: [пример]
Выход: [пример]

# Дополнительные инструкции
- Вдохни глубоко и работай пошагово
- Это очень важная задача для проекта
```

---

## 14. Специфика работы с Cursor AI

### 14.1 Cursor Rules

Создавайте файлы правил в `.cursor/rules/`:

```markdown
# Пример .cursor/rules/wordpress.mdc

## Общие правила WordPress
- Используй WordPress Coding Standards
- Применяй escape-функции для вывода: esc_html(), esc_attr()
- Используй nonce для форм
- Добавляй inline-комментарии в PHPDoc формате
```

### 14.2 Использование контекста

- `@Files` — ссылка на конкретные файлы
- `@Folders` — ссылка на директории
- `@Codebase` — весь проект
- `@Docs` — документация
- `@Web` — поиск в интернете

### 14.3 Создание Notepads

Сохраняйте часто используемые промпты как Notepads для быстрого доступа.

---

## Заключение

> [!TIP]
> Эффективный prompt engineering — это навык, который развивается с практикой. Начните с базовых техник и постепенно добавляйте более сложные.

Ключевые принципы:
1. **Ясность** — формулируйте чётко и конкретно
2. **Контекст** — предоставляйте релевантную информацию
3. **Структура** — используйте разметку и теги
4. **Примеры** — показывайте желаемый результат
5. **Итерация** — уточняйте и совершенствуйте промпты

---

## Источники

- "I Accidentally Made Claude 45% Smarter" — Medium (@ichigoSan)
- Anthropic Claude Documentation
- OpenAI Prompt Engineering Guide
- Google DeepMind Research on Prompt Optimization
- Cursor AI Official Documentation
