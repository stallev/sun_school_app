# Phase 19: Библиотека золотых стихов

## Описание фазы
Реализация библиотеки золотых стихов: просмотр списка всех стихов, поиск по тексту, фильтрация по книге/главе, статистика использования в уроках.

## Зависимости
Phase 13: Управление уроками (Lessons)

## Оценка времени
4-5 часов

## Требования к AI Agent

> [!IMPORTANT]
> - AI Agent при создании программного кода должен использовать актуальную документацию через Context7
> - Следовать принципам из `docs/guidelines/prompts/general_prompt_guidelines.md`

## Задачи

### Task 19.01: Создание Server Actions для золотых стихов
- [ ] Создать `app/actions/goldenVerses.ts`
- [ ] Реализовать `getGoldenVerse(id)` - получение стиха
- [ ] Реализовать `listGoldenVerses(filters)` - список стихов с фильтрацией
- [ ] Реализовать `searchGoldenVerses(query)` - поиск по тексту
- [ ] Реализовать `getGoldenVerseStats(verseId)` - статистика использования

**Документация:**
- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - раздел Golden Verses
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.9 Библиотека золотых стихов

**Критерии приемки:**
- Все Server Actions созданы
- Фильтрация и поиск работают

---

### Task 19.02: Создание UI для списка стихов
- [ ] Создать `app/(private)/golden-verses/page.tsx`
- [ ] Реализовать таблицу/карточки со списком стихов
- [ ] Отобразить: текст стиха, книгу, главу, стих
- [ ] Добавить пагинацию

**Документация:**
- [WIREFRAMES.md](../../../ui_ux/WIREFRAMES.md) - раздел Golden Verses List
- [USER_FLOW.md](../../../user_flows/USER_FLOW.md) - раздел Golden Verses

**Критерии приемки:**
- Страница списка создана
- Стихи отображаются

---

### Task 19.03: Реализация поиска по тексту
- [ ] Создать компонент поиска
- [ ] Реализовать поиск по тексту стиха
- [ ] Добавить debounce для оптимизации
- [ ] Отобразить результаты поиска

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.9.1 Просмотр стихов

**Критерии приемки:**
- Поиск работает
- Результаты отображаются

---

### Task 19.04: Реализация фильтрации
- [ ] Создать компонент фильтров
- [ ] Реализовать фильтрацию по книге
- [ ] Реализовать фильтрацию по главе
- [ ] Применить фильтры к списку стихов

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.9.1 Фильтры

**Критерии приемки:**
- Фильтрация работает
- Фильтры применяются корректно

---

### Task 19.05: Реализация статистики использования
- [ ] Создать компонент статистики
- [ ] Отобразить количество использований стиха в уроках
- [ ] Показать статистику для каждого стиха
- [ ] Интегрировать с выбором стихов в уроках

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.9.2 Статистика

**Критерии приемки:**
- Статистика отображается
- Данные корректны

---

### Task 19.06: Интеграция с выбором стихов в уроках
- [ ] Обновить компонент выбора стихов в форме урока
- [ ] Использовать библиотеку стихов для выбора
- [ ] Отобразить выбранные стихи

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.3.1 Выбор золотых стихов

**Критерии приемки:**
- Интеграция работает
- Выбор стихов функционирует

---

### Task 19.07: Тестирование функционала библиотеки стихов
- [ ] Протестировать просмотр списка
- [ ] Протестировать поиск
- [ ] Протестировать фильтрацию
- [ ] Протестировать статистику

**Критерии приемки:**
- Все тесты пройдены успешно
- Функционал работает корректно

---

## Ссылки на документацию проекта

- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - Golden Verses Actions
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.9

---

**Версия:** 1.0  
**Последнее обновление:** 23 декабря 2025

