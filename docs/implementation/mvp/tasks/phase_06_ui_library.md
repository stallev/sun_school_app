# Phase 06: Настройка UI библиотеки (Shadcn UI)

## Описание фазы
Установка и настройка Shadcn UI компонентов, настройка Tailwind CSS, темизация, интеграция с дизайн-системой.

## Зависимости
Phase 01: Настройка проекта и окружения

## Оценка времени
3-4 часа

## Требования к AI Agent

<requirements>
<role>
Ты — Senior Frontend Developer с 5+ летним опытом разработки UI компонентов, специализирующийся на:
- Shadcn UI и Tailwind CSS
- React 19 и современные паттерны React
- Atomic Design принципы
- Accessibility (WCAG 2.1 AA)
- Дизайн-системы и темизация
</role>

<context>
Проект: Sunday School Management System (MVP)
Технологии: Shadcn UI, Tailwind CSS 4, React 19, Next.js 15.5.9, lucide-react
Ограничения: MVP подход, доступность критически важна, компоненты должны следовать дизайн-системе
Документация: DESIGN_SYSTEM.md должна быть изучена перед началом работы
</context>

<critical_instructions>
Вдохни глубоко, расправь плечи и приступай к решению задачи шаг за шагом. Это критически важная фаза для настройки UI библиотеки. Правильная настройка компонентов определит качество пользовательского интерфейса всего приложения.

<CRITICAL>Перед началом работы:</CRITICAL>
1. Изучи DESIGN_SYSTEM.md - полную дизайн-систему проекта
2. Изучи COMPONENT_LIBRARY.md - структуру компонентов
3. Используй Context7 для получения актуальной документации Shadcn UI
4. Используй Context7 для получения актуальной документации Tailwind CSS 4
5. Следуй принципам из `docs/guidelines/prompts/general_prompt_guidelines.md`

<CONSTRAINT>Все компоненты должны следовать дизайн-системе проекта и быть доступными (WCAG 2.1 AA). Shadcn UI компоненты копируются в проект, что дает полный контроль над кодом!</CONSTRAINT>
</critical_instructions>
</requirements>

## Задачи

### Task 06.01: Инициализация Shadcn UI

<context>
<CRITICAL>Это первая и критически важная задача фазы!</CRITICAL> Инициализация Shadcn UI создает основу для всех UI компонентов проекта. Правильная настройка на этом этапе определит работу всей UI библиотеки.
</context>

<task>
Инициализируй Shadcn UI используя команду `npx shadcn@latest init`. Выбери опции согласно дизайн-системе проекта и дождись создания конфигурационных файлов.
</task>

<constraints>
- Используй команду `npx shadcn@latest init`
- Выбери Style согласно дизайн-системе
- Выбери Base color согласно дизайн-системе
- CSS variables должны быть включены (Yes)
- Файл `components.json` должен быть создан
- Папка `components/ui/` должна быть создана
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи DESIGN_SYSTEM.md раздел 2 Design Tokens для понимания требований к цветам и стилям
2. Изучи COMPONENT_LIBRARY.md раздел 2 Directory Structure для понимания структуры компонентов
3. Используй Context7 для получения актуальной документации Shadcn UI
4. Определи правильные опции для инициализации согласно дизайн-системе
5. Только после этого запускай инициализацию
</thinking>

**Действия:**
- [ ] Установить Shadcn UI CLI: `npx shadcn@latest init`
- [ ] Выбрать опции:
  - Style: `Default` (или другой согласно дизайн-системе)
  - Base color: `Slate` (или другой согласно дизайн-системе)
  - CSS variables: `Yes`
- [ ] Дождаться создания конфигурационных файлов

**Документация:**
- <CRITICAL>[DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 2 Design Tokens</CRITICAL>
- <CRITICAL>[COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md) - раздел 2 Directory Structure</CRITICAL>
- <CRITICAL>Shadcn UI официальная документация (через Context7)</CRITICAL>

**Критерии приемки:**
- Shadcn UI инициализирован
- Создан файл `components.json`
- Создана папка `components/ui/`

<output_format>
После выполнения задачи Shadcn UI должен быть инициализирован, файл `components.json` должен быть создан, и папка `components/ui/` должна быть создана.
</output_format>

---

### Task 06.02: Установка базовых компонентов Shadcn UI

<context>
Установка базовых компонентов Shadcn UI необходима для создания пользовательского интерфейса. Все компоненты копируются в проект, что дает полный контроль над кодом.
</context>

<task>
Установи все базовые компоненты Shadcn UI согласно COMPONENT_LIBRARY.md. Убедись, что все компоненты установлены в `components/ui/` и могут быть импортированы и использованы.
</task>

<constraints>
- Все базовые компоненты должны быть установлены
- Компоненты должны находиться в `components/ui/`
- Компоненты должны быть импортируемы и используемы
- Используй команду `npx shadcn@latest add [component-name]`
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи COMPONENT_LIBRARY.md раздел 2 Directory Structure для понимания структуры
2. Изучи DESIGN_SYSTEM.md раздел 3 Component Library для понимания требований
3. Используй Context7 для получения актуальной документации Shadcn UI компонентов
4. Определи все необходимые компоненты согласно документации
5. Только после этого устанавливай компоненты
</thinking>

**Действия:**
- [ ] Установить Button: `npx shadcn@latest add button`
- [ ] Установить Card: `npx shadcn@latest add card`
- [ ] Установить Form: `npx shadcn@latest add form`
- [ ] Установить Input: `npx shadcn@latest add input`
- [ ] Установить Dialog: `npx shadcn@latest add dialog`
- [ ] Установить Table: `npx shadcn@latest add table`
- [ ] Установить Badge: `npx shadcn@latest add badge`
- [ ] Установить Dropdown Menu: `npx shadcn@latest add dropdown-menu`
- [ ] Установить Calendar: `npx shadcn@latest add calendar`
- [ ] Установить Avatar: `npx shadcn@latest add avatar`
- [ ] Установить другие необходимые компоненты согласно [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md)

**Документация:**
- <CRITICAL>[COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md) - раздел 2 Directory Structure</CRITICAL>
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 3 Component Library
- Shadcn UI компоненты документация (через Context7)

**Критерии приемки:**
- Все базовые компоненты установлены
- Компоненты находятся в `components/ui/`
- Компоненты можно импортировать и использовать

<output_format>
После выполнения задачи все базовые компоненты должны быть установлены, компоненты должны находиться в `components/ui/`, и компоненты должны быть импортируемы и используемы.
</output_format>

---

### Task 06.03: Настройка Tailwind CSS конфигурации

<context>
Настройка Tailwind CSS конфигурации критически важна для соответствия дизайн-системе проекта. Правильная настройка всех токенов дизайна обеспечит консистентность UI компонентов.
</context>

<task>
Настрой Tailwind CSS конфигурацию согласно DESIGN_SYSTEM.md. Настрой цвета, типографику, spacing, border radius и shadows согласно дизайн-системе проекта.
</task>

<constraints>
- Tailwind конфигурация должна соответствовать дизайн-системе
- Все токены дизайна должны быть настроены
- CSS переменные должны работать корректно
- Используй Tailwind CSS 4
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи DESIGN_SYSTEM.md раздел 2 Design Tokens детально
2. Используй Context7 для получения актуальной документации Tailwind CSS 4
3. Определи все токены дизайна, которые нужно настроить
4. Только после этого настраивай конфигурацию
</thinking>

**Действия:**
- [ ] Открыть `tailwind.config.ts`
- [ ] Настроить цвета согласно [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) раздел 2.1 Color Palette
- [ ] Настроить типографику согласно раздел 2.2 Typography
- [ ] Настроить spacing согласно раздел 2.3 Spacing
- [ ] Настроить border radius согласно раздел 2.4 Border Radius
- [ ] Настроить shadows согласно раздел 2.5 Shadows

**Документация:**
- <CRITICAL>[DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 2 Design Tokens</CRITICAL>
- Tailwind CSS документация (через Context7)

**Критерии приемки:**
- Tailwind конфигурация соответствует дизайн-системе
- Все токены дизайна настроены
- CSS переменные работают корректно

<output_format>
После выполнения задачи Tailwind конфигурация должна соответствовать дизайн-системе, все токены дизайна должны быть настроены, и CSS переменные должны работать корректно.
</output_format>

---

### Task 06.04: Настройка CSS переменных для темизации

<context>
Настройка CSS переменных для темизации критически важна для поддержки темной темы и кастомизации цветов. Правильная настройка переменных обеспечит гибкость темизации.
</context>

<task>
Настрой CSS переменные для темизации в `app/globals.css`. Убедись, что переменные соответствуют дизайн-системе и используются в компонентах.
</task>

<constraints>
- CSS переменные должны быть настроены
- Переменные должны соответствовать дизайн-системе
- Изменение переменных должно влиять на компоненты
- Переменные должны использоваться в компонентах
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи DESIGN_SYSTEM.md раздел 2 Design Tokens для понимания требований к цветам
2. Используй Context7 для получения актуальной документации Shadcn UI Theming
3. Определи все CSS переменные, которые нужно настроить
4. Только после этого настраивай переменные
</thinking>

**Действия:**
- [ ] Открыть `app/globals.css` (или `src/app/globals.css`)
- [ ] Проверить наличие CSS переменных для цветов
- [ ] Настроить переменные согласно [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) раздел 2.1
- [ ] Убедиться, что переменные используются в компонентах
- [ ] Протестировать изменение цветов через переменные

**Документация:**
- <CRITICAL>[DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 2 Design Tokens</CRITICAL>
- Shadcn UI Theming документация (через Context7)

**Критерии приемки:**
- CSS переменные настроены
- Переменные соответствуют дизайн-системе
- Изменение переменных влияет на компоненты

<output_format>
После выполнения задачи CSS переменные должны быть настроены, переменные должны соответствовать дизайн-системе, и изменение переменных должно влиять на компоненты.
</output_format>

---

### Task 06.05: Создание кастомных компонентов-оберток

<context>
Создание кастомных компонентов-оберток необходимо для часто используемых паттернов. Компоненты должны следовать Atomic Design принципам и структуре проекта.
</context>

<task>
Создай кастомные компоненты-обертки для часто используемых паттернов: иконки, логотип, спиннер загрузки. Убедись, что компоненты следуют Atomic Design принципам.
</task>

<constraints>
- Кастомные компоненты должны быть созданы
- Компоненты должны следовать структуре проекта
- Компоненты должны следовать Atomic Design принципам
- Компоненты должны быть используемы в приложении
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи COMPONENT_LIBRARY.md раздел 2 Directory Structure для понимания структуры
2. Изучи DESIGN_SYSTEM.md раздел 3 Component Library для понимания требований
3. Определи все кастомные компоненты, которые нужно создать
4. Только после этого создавай компоненты
</thinking>

**Действия:**
- [ ] Создать кастомные компоненты-обертки для часто используемых паттернов
- [ ] Создать `components/atoms/icon.tsx` для иконок
- [ ] Создать `components/atoms/logo.tsx` для логотипа
- [ ] Создать `components/atoms/spinner.tsx` для загрузки
- [ ] Убедиться, что компоненты следуют Atomic Design принципам

**Документация:**
- [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md) - раздел 2 Directory Structure
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 3 Component Library

**Критерии приемки:**
- Кастомные компоненты созданы
- Компоненты следуют структуре проекта
- Компоненты можно использовать в приложении

<output_format>
После выполнения задачи кастомные компоненты должны быть созданы, компоненты должны следовать структуре проекта, и компоненты должны быть используемы в приложении.
</output_format>

---

### Task 06.06: Настройка иконок (lucide-react)

<context>
Настройка иконок критически важна для консистентности UI. Правильная настройка утилиты для иконок обеспечит единообразное использование иконок во всем приложении.
</context>

<task>
Настрой утилиту для иконок используя lucide-react. Создай утилиту `lib/utils/icons.ts` и экспортируй часто используемые иконки. Протестируй использование иконок в компонентах.
</task>

<constraints>
- `lucide-react` должен быть установлен (из Phase 01)
- Утилита для иконок должна быть создана
- Иконки должны быть доступны через утилиту
- Размеры и стили иконок должны соответствовать дизайн-системе
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Убедись, что `lucide-react` установлен
2. Изучи DESIGN_SYSTEM.md раздел 2.6 Iconography для понимания требований
3. Используй Context7 для получения актуальной документации lucide-react
4. Определи часто используемые иконки
5. Только после этого создавай утилиту
</thinking>

**Действия:**
- [ ] Убедиться, что `lucide-react` установлен (из Phase 01)
- [ ] Создать утилиту для иконок: `lib/utils/icons.ts`
- [ ] Экспортировать часто используемые иконки
- [ ] Протестировать использование иконок в компонентах

**Документация:**
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 2.6 Iconography
- lucide-react документация (через Context7)

**Критерии приемки:**
- Иконки доступны через утилиту
- Иконки используются в компонентах
- Размеры и стили иконок соответствуют дизайн-системе

<output_format>
После выполнения задачи иконки должны быть доступны через утилиту, иконки должны использоваться в компонентах, и размеры и стили иконок должны соответствовать дизайн-системе.
</output_format>

---

### Task 06.07: Тестирование компонентов

<context>
Тестирование компонентов необходимо для подтверждения правильности работы всех установленных компонентов. Тестовая страница позволит проверить визуальное отображение и интерактивность компонентов.
</context>

<task>
Создай тестовую страницу для проверки всех установленных компонентов. Добавь примеры использования всех компонентов, проверь визуальное отображение, интерактивность и адаптивность.
</task>

<constraints>
- Тестовая страница должна быть создана
- Все компоненты должны быть протестированы
- Интерактивные компоненты должны работать
- Компоненты должны быть адаптивны для разных экранов
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Определи все установленные компоненты
2. Подготовь примеры использования для каждого компонента
3. Только после этого создавай тестовую страницу
</thinking>

**Действия:**
- [ ] Создать тестовую страницу для проверки компонентов: `app/test-components/page.tsx`
- [ ] Добавить примеры использования всех установленных компонентов
- [ ] Проверить визуальное отображение компонентов
- [ ] Проверить работу интерактивных компонентов (Dialog, Dropdown и др.)
- [ ] Проверить адаптивность компонентов (Mobile, Tablet, Desktop)

**Документация:**
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md)
- [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md)

**Критерии приемки:**
- Все компоненты отображаются корректно
- Интерактивные компоненты работают
- Компоненты адаптивны для разных экранов

<output_format>
После выполнения задачи все компоненты должны отображаться корректно, интерактивные компоненты должны работать, и компоненты должны быть адаптивны для разных экранов.
</output_format>

---

### Task 06.08: Настройка темной темы (опционально)

<context>
Настройка темной темы опциональна для MVP. Если темная тема не требуется для MVP, можно пропустить эту задачу или подготовить инфраструктуру для будущей реализации.
</context>

<task>
Определи, нужна ли темная тема для MVP согласно MVP_SCOPE.md. Если нужна, установи next-themes, создай ThemeProvider компонент и настрой переключение темы.
</task>

<constraints>
- Темная тема должна быть настроена только если требуется для MVP
- Переключение темы должно работать
- Компоненты должны корректно отображаться в обеих темах
- Используй next-themes для управления темой
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи MVP_SCOPE.md раздел 3.4.4 Темная тема для понимания требований
2. Изучи DESIGN_SYSTEM.md раздел 2.1 Color Palette для понимания цветов
3. Используй Context7 для получения актуальной документации next-themes
4. Определи, нужна ли темная тема для MVP
5. Только после этого настраивай темную тему
</thinking>

**Действия:**
- [ ] Определить, нужна ли темная тема для MVP (согласно MVP_SCOPE.md)
- [ ] Если нужна, установить next-themes: `npm install next-themes`
- [ ] Создать ThemeProvider компонент
- [ ] Настроить переключение темы
- [ ] Протестировать темную тему

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 3.4.4 Темная тема
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 2.1 Color Palette
- next-themes документация (через Context7)

**Критерии приемки:**
- Темная тема настроена (если требуется)
- Переключение темы работает
- Компоненты корректно отображаются в обеих темах

<output_format>
После выполнения задачи темная тема должна быть настроена (если требуется), переключение темы должно работать, и компоненты должны корректно отображаться в обеих темах.
</output_format>

---

### Task 06.09: Проверка доступности (Accessibility)

<context>
<CRITICAL>Это критически важная задача!</CRITICAL> Проверка доступности критически важна для обеспечения доступности приложения для всех пользователей. Все компоненты должны соответствовать WCAG 2.1 AA стандартам.
</context>

<task>
Проверь доступность всех компонентов. Убедись, что все компоненты имеют правильные ARIA атрибуты, keyboard navigation работает, и цветовой контраст соответствует WCAG 2.1 AA.
</task>

<constraints>
- Все компоненты должны иметь правильные ARIA атрибуты
- Keyboard navigation должна работать для всех интерактивных компонентов
- Цветовой контраст должен соответствовать WCAG 2.1 AA (4.5:1)
- Компоненты должны быть доступны для screen readers
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Изучи DESIGN_SYSTEM.md раздел 4 Accessibility для понимания требований
2. Изучи ACCESSIBILITY.md если существует
3. Используй WCAG 2.1 AA документацию для понимания стандартов
4. Определи все компоненты, которые нужно проверить
5. Только после этого проверяй доступность
</thinking>

**Действия:**
- [ ] Проверить, что все компоненты имеют правильные ARIA атрибуты
- [ ] Проверить keyboard navigation для интерактивных компонентов
- [ ] Проверить цветовой контраст согласно WCAG 2.1 AA
- [ ] Протестировать с screen reader (если возможно)

**Документация:**
- <CRITICAL>[DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - раздел 4 Accessibility</CRITICAL>
- [ACCESSIBILITY.md](../../../ui_ux/ACCESSIBILITY.md) - если существует
- WCAG 2.1 AA документация

**Критерии приемки:**
- Компоненты имеют правильные ARIA атрибуты
- Keyboard navigation работает
- Цветовой контраст соответствует WCAG 2.1 AA

<output_format>
После выполнения задачи все компоненты должны иметь правильные ARIA атрибуты, keyboard navigation должна работать, и цветовой контраст должен соответствовать WCAG 2.1 AA.
</output_format>

---

### Task 06.10: Документирование установленных компонентов

<context>
<CRITICAL>Это финальная задача фазы!</CRITICAL> Документирование установленных компонентов критически важно для команды и будущей работы с компонентами. Все компоненты должны быть задокументированы с примерами использования.
</context>

<task>
Задокументируй все установленные компоненты. Создай список всех компонентов, задокументируй кастомные компоненты, обнови COMPONENT_LIBRARY.md и создай примеры использования.
</task>

<constraints>
- Документация должна быть обновлена
- Список компонентов должен быть актуален
- Примеры использования должны быть добавлены
- Кастомные компоненты должны быть задокументированы
</constraints>

<thinking>
Прежде чем приступить к реализации:
1. Собери всю информацию о всех установленных компонентах
2. Определи кастомные компоненты, которые нужно задокументировать
3. Изучи COMPONENT_LIBRARY.md и DESIGN_SYSTEM.md для понимания структуры документации
4. Только после этого обновляй документацию
</thinking>

**Действия:**
- [ ] Создать список всех установленных компонентов
- [ ] Задокументировать кастомные компоненты
- [ ] Обновить [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md) если необходимо
- [ ] Создать примеры использования компонентов

**Документация:**
- [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md)
- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md)

**Критерии приемки:**
- Документация обновлена
- Список компонентов актуален
- Примеры использования добавлены

<output_format>
После выполнения задачи вся документация должна быть обновлена, список компонентов должен быть актуален, и примеры использования должны быть добавлены.
</output_format>

---

## Ссылки на документацию проекта

- [DESIGN_SYSTEM.md](../../../ui_ux/DESIGN_SYSTEM.md) - Дизайн-система
- [COMPONENT_LIBRARY.md](../../../components/COMPONENT_LIBRARY.md) - Библиотека компонентов
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - Область MVP

---

## Примечания

- Shadcn UI компоненты копируются в проект (не npm пакет), что дает полный контроль
- Все компоненты должны следовать дизайн-системе проекта
- Темная тема не входит в MVP согласно MVP_SCOPE.md, но можно подготовить инфраструктуру
- Доступность критически важна - все компоненты должны быть доступны

---

## ⚠️ Важно: Проверка дублирующих ресурсов

**После завершения фазы обязательно выполните проверку на наличие дублирующих AWS ресурсов:**

```bash
# Linux/Mac
./scripts/check-duplicate-resources.sh eu-west-1

# Windows
.\scripts\check-duplicate-resources.ps1 eu-west-1
```

**Почему это важно:**
- Предотвращает создание дублирующих ресурсов (AppSync API, Cognito User Pools, DynamoDB таблицы, CloudFormation стеки)
- Помогает обнаружить проблемы на раннем этапе
- Снижает неожиданные затраты на AWS

**Если обнаружены дублирующие ресурсы:**
- См. [DUPLICATE_RESOURCES_INCIDENT.md](../../../infrastructure/DUPLICATE_RESOURCES_INCIDENT.md) для инструкций по устранению
- Следуйте [BRANCH_SETUP_CHECKLIST.md](../../../infrastructure/BRANCH_SETUP_CHECKLIST.md) при подключении новых веток

---

**Версия:** 1.0  
**Последнее обновление:** 23 декабря 2025

