# Phase 20: Настройки оценивания групп

## Описание фазы
Реализация настроек оценивания для групп: включение/выключение параметров оценивания, настройка кастомных меток, настройка баллов за каждый параметр.

## Зависимости
Phase 11: Управление группами (Grades)

## Оценка времени
5-6 часов

## Требования к AI Agent

> [!IMPORTANT]
> - AI Agent при создании программного кода должен использовать актуальную документацию через Context7
> - Следовать принципам из `docs/guidelines/prompts/general_prompt_guidelines.md`

## Задачи

### Task 20.01: Создание Server Actions для настроек групп
- [ ] Создать `app/actions/gradeSettings.ts`
- [ ] Реализовать `getGradeSettings(gradeId)` - получение настроек группы
- [ ] Реализовать `updateGradeSettings(gradeId, settings)` - обновление настроек
- [ ] Добавить проверку прав доступа (Admin only)

**Документация:**
- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - раздел Grade Settings
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.11 Настройки оценивания

**Критерии приемки:**
- Все Server Actions созданы
- Проверка прав доступа работает

---

### Task 20.02: Создание UI для редактирования настроек
- [ ] Создать `app/(private)/grades/[gradeId]/settings/page.tsx`
- [ ] Реализовать форму настроек с чекбоксами для каждого параметра:
  - Золотые стихи (включено/выключено)
  - Оценка за тест (включено/выключено)
  - Оценка за тетрадь (включено/выключено)
  - Посещение спевки (включено/выключено)
- [ ] Использовать компоненты Shadcn UI (Form, Checkbox, Input)

**Документация:**
- [WIREFRAMES.md](../../../ui_ux/WIREFRAMES.md) - раздел Grade Settings
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.11.1 Параметры оценивания

**Критерии приемки:**
- Форма настроек создана
- Чекбоксы работают

---

### Task 20.03: Реализация кастомных меток
- [ ] Добавить поля для кастомных меток каждого параметра
- [ ] Реализовать сохранение меток
- [ ] Отобразить метки в форме проверки ДЗ

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.11.2 Кастомные метки

**Критерии приемки:**
- Кастомные метки работают
- Метки отображаются в проверке ДЗ

---

### Task 20.04: Реализация настройки баллов
- [ ] Добавить поля для настройки баллов за каждый параметр
- [ ] Реализовать валидацию баллов (положительные числа)
- [ ] Сохранить настройки баллов
- [ ] Использовать настройки в расчете баллов при проверке ДЗ

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.11.3 Настройка баллов

**Критерии приемки:**
- Настройка баллов работает
- Баллы используются в расчете

---

### Task 20.05: Интеграция с проверкой ДЗ
- [ ] Обновить форму проверки ДЗ:
  - Показывать только включенные параметры
  - Использовать кастомные метки
  - Использовать настройки баллов для расчета
- [ ] Протестировать интеграцию

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.4 Проверка домашних заданий

**Критерии приемки:**
- Интеграция работает
- Настройки применяются корректно

---

### Task 20.06: Тестирование функционала настроек
- [ ] Протестировать включение/выключение параметров
- [ ] Протестировать кастомные метки
- [ ] Протестировать настройку баллов
- [ ] Протестировать интеграцию с проверкой ДЗ

**Критерии приемки:**
- Все тесты пройдены успешно
- Функционал работает корректно

---

## Ссылки на документацию проекта

- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - Grade Settings Actions
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.11

---

**Версия:** 1.0  
**Последнее обновление:** 23 декабря 2025

