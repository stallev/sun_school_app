# Phase 17: Управление преподавателями (Teachers)

## Описание фазы
Реализация CRUD операций для преподавателей: создание, редактирование, деактивация. Назначение преподавателей на группы, управление через Cognito.

## Зависимости
Phase 05: Настройка аутентификации (Cognito), Phase 11: Управление группами (Grades)

## Оценка времени
5-6 часов

## Требования к AI Agent

> [!IMPORTANT]
> - AI Agent при создании программного кода должен использовать актуальную документацию через Context7
> - Для AWS Cognito должна быть использована официальная документация AWS Amplify Gen 1
> - Следовать принципам из `docs/guidelines/prompts/general_prompt_guidelines.md`

## Задачи

### Task 17.01: Создание Server Actions для преподавателей
- [ ] Создать `app/actions/teachers.ts`
- [ ] Реализовать CRUD операции: create, update, delete, get, list
- [ ] Реализовать `assignTeacherToGrade(teacherId, gradeId)` - назначение на группу
- [ ] Реализовать `createTeacherInCognito(input)` - создание пользователя в Cognito
- [ ] Добавить проверку прав доступа (Admin only)

**Документация:**
- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - раздел Users/Teachers
- [SECURITY.md](../../../infrastructure/SECURITY.md) - раздел Cognito User Management
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.10.1 Управление преподавателями

**Критерии приемки:**
- Все Server Actions созданы
- Проверка прав доступа работает

---

### Task 17.02: Реализация создания пользователя в Cognito
- [ ] Создать утилиту `lib/utils/cognito.ts`
- [ ] Реализовать функцию `createCognitoUser(email, password, name)`:
  - Создает пользователя в Cognito User Pool
  - Добавляет в группу TEACHER
  - Возвращает userId
- [ ] Интегрировать с Server Action создания преподавателя

**Документация:**
- [SECURITY.md](../../../infrastructure/SECURITY.md) - раздел Cognito User Management
- AWS Cognito Admin API документация (через Context7)

**Критерии приемки:**
- Создание пользователя в Cognito работает
- Пользователь добавляется в группу TEACHER

---

### Task 17.03: Создание UI для управления преподавателями
- [ ] Создать `app/(private)/teachers/page.tsx`
- [ ] Реализовать таблицу со списком преподавателей
- [ ] Добавить фильтрацию и поиск
- [ ] Добавить кнопку создания нового преподавателя (Admin only)
- [ ] Добавить кнопку деактивации преподавателя

**Документация:**
- [WIREFRAMES.md](../../../ui_ux/WIREFRAMES.md) - раздел Teachers List
- [USER_FLOW.md](../../../user_flows/USER_FLOW.md) - раздел Admin flows
- [ADMIN_FLOWS.md](../../../user_flows/ADMIN_FLOWS.md) - раздел 2.1 Создание нового преподавателя

**Критерии приемки:**
- Страница списка создана
- Фильтрация работает

---

### Task 17.04: Создание формы создания преподавателя
- [ ] Создать Client Component формы
- [ ] Реализовать поля: имя, email, пароль, группы
- [ ] Интегрировать с React Hook Form и Zod валидацией
- [ ] Добавить множественный выбор групп
- [ ] При создании создавать пользователя в Cognito

**Документация:**
- [WIREFRAMES.md](../../../ui_ux/WIREFRAMES.md) - раздел Teacher Form
- [VALIDATION.md](../../../api/VALIDATION.md) - раздел User Schemas
- [ADMIN_FLOWS.md](../../../user_flows/ADMIN_FLOWS.md) - раздел 2.1 Создание нового преподавателя

**Критерии приемки:**
- Форма создана
- Валидация работает
- Создание в Cognito работает

---

### Task 17.05: Реализация назначения на группы
- [ ] Создать компонент для назначения на группы
- [ ] Реализовать множественный выбор групп
- [ ] Сохранить назначения через Server Action
- [ ] Отобразить группы преподавателя в профиле

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.10.1 Назначение на группы

**Критерии приемки:**
- Назначение на группы работает
- Группы отображаются в профиле

---

### Task 17.06: Реализация деактивации преподавателя
- [ ] Реализовать Server Action деактивации
- [ ] Деактивировать пользователя в Cognito (если требуется)
- [ ] Обновить статус в базе данных
- [ ] Добавить подтверждение деактивации

**Документация:**
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.10.1 Деактивация преподавателя
- [SECURITY.md](../../../infrastructure/SECURITY.md)

**Критерии приемки:**
- Деактивация работает
- Подтверждение показывается

---

### Task 17.07: Тестирование функционала преподавателей
- [ ] Протестировать CRUD операции
- [ ] Протестировать создание в Cognito
- [ ] Протестировать назначение на группы
- [ ] Протестировать деактивацию

**Критерии приемки:**
- Все тесты пройдены успешно
- Функционал работает корректно

---

## Ссылки на документацию проекта

- [SERVER_ACTIONS.md](../../../api/SERVER_ACTIONS.md) - Teachers Actions
- [SECURITY.md](../../../infrastructure/SECURITY.md) - Cognito Management
- [MVP_SCOPE.md](../../../MVP_SCOPE.md) - раздел 2.10.1

---

**Версия:** 1.0  
**Последнее обновление:** 23 декабря 2025

